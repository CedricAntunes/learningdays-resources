<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Mettre votre nom" />
  <title>Tests d’hypothèses: résumer les informations sur les effets causaux</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="hypothesistesting-slides_files/reveal.js-3.3.0.1/css/reveal.css"/>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="hypothesistesting-slides_files/reveal.js-3.3.0.1/css/theme/simple.css" id="theme">


  <!-- some tweaks to reveal css -->
  <style type="text/css">
    .reveal h1 { font-size: 2.0em; }
    .reveal h2 { font-size: 1.5em;  }
    .reveal h3 { font-size: 1.25em;	}
    .reveal h4 { font-size: 1em;	}

    .reveal .slides>section,
    .reveal .slides>section>section {
      padding: 0px 0px;
    }



    .reveal table {
      border-width: 1px;
      border-spacing: 2px;
      border-style: dotted;
      border-color: gray;
      border-collapse: collapse;
      font-size: 0.7em;
    }

    .reveal table th {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      font-weight: bold;
      border-style: dotted;
      border-color: gray;
    }

    .reveal table td {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      border-style: dotted;
      border-color: gray;
    }


  </style>

    <style type="text/css">code{white-space: pre;}</style>


<!-- Printing and PDF exports -->
<script id="paper-css" type="application/dynamic-css">

/* Default Print Stylesheet Template
   by Rob Glazebrook of CSSnewbie.com
   Last Updated: June 4, 2008

   Feel free (nay, compelled) to edit, append, and
   manipulate this file as you see fit. */


@media print {

	/* SECTION 1: Set default width, margin, float, and
	   background. This prevents elements from extending
	   beyond the edge of the printed page, and prevents
	   unnecessary background images from printing */
	html {
		background: #fff;
		width: auto;
		height: auto;
		overflow: visible;
	}
	body {
		background: #fff;
		font-size: 20pt;
		width: auto;
		height: auto;
		border: 0;
		margin: 0 5%;
		padding: 0;
		overflow: visible;
		float: none !important;
	}

	/* SECTION 2: Remove any elements not needed in print.
	   This would include navigation, ads, sidebars, etc. */
	.nestedarrow,
	.controls,
	.fork-reveal,
	.share-reveal,
	.state-background,
	.reveal .progress,
	.reveal .backgrounds {
		display: none !important;
	}

	/* SECTION 3: Set body font face, size, and color.
	   Consider using a serif font for readability. */
	body, p, td, li, div {
		font-size: 20pt!important;
		font-family: Georgia, "Times New Roman", Times, serif !important;
		color: #000;
	}

	/* SECTION 4: Set heading font face, sizes, and color.
	   Differentiate your headings from your body text.
	   Perhaps use a large sans-serif for distinction. */
	h1,h2,h3,h4,h5,h6 {
		color: #000!important;
		height: auto;
		line-height: normal;
		font-family: Georgia, "Times New Roman", Times, serif !important;
		text-shadow: 0 0 0 #000 !important;
		text-align: left;
		letter-spacing: normal;
	}
	/* Need to reduce the size of the fonts for printing */
	h1 { font-size: 28pt !important;  }
	h2 { font-size: 24pt !important; }
	h3 { font-size: 22pt !important; }
	h4 { font-size: 22pt !important; font-variant: small-caps; }
	h5 { font-size: 21pt !important; }
	h6 { font-size: 20pt !important; font-style: italic; }

	/* SECTION 5: Make hyperlinks more usable.
	   Ensure links are underlined, and consider appending
	   the URL to the end of the link for usability. */
	a:link,
	a:visited {
		color: #000 !important;
		font-weight: bold;
		text-decoration: underline;
	}
	/*
	.reveal a:link:after,
	.reveal a:visited:after {
		content: " (" attr(href) ") ";
		color: #222 !important;
		font-size: 90%;
	}
	*/


	/* SECTION 6: more reveal.js specific additions by @skypanther */
	ul, ol, div, p {
		visibility: visible;
		position: static;
		width: auto;
		height: auto;
		display: block;
		overflow: visible;
		margin: 0;
		text-align: left !important;
	}
	.reveal pre,
	.reveal table {
		margin-left: 0;
		margin-right: 0;
	}
	.reveal pre code {
		padding: 20px;
		border: 1px solid #ddd;
	}
	.reveal blockquote {
		margin: 20px 0;
	}
	.reveal .slides {
		position: static !important;
		width: auto !important;
		height: auto !important;

		left: 0 !important;
		top: 0 !important;
		margin-left: 0 !important;
		margin-top: 0 !important;
		padding: 0 !important;
		zoom: 1 !important;

		overflow: visible !important;
		display: block !important;

		text-align: left !important;
		-webkit-perspective: none;
		   -moz-perspective: none;
		    -ms-perspective: none;
		        perspective: none;

		-webkit-perspective-origin: 50% 50%;
		   -moz-perspective-origin: 50% 50%;
		    -ms-perspective-origin: 50% 50%;
		        perspective-origin: 50% 50%;
	}
	.reveal .slides section {
		visibility: visible !important;
		position: static !important;
		width: auto !important;
		height: auto !important;
		display: block !important;
		overflow: visible !important;

		left: 0 !important;
		top: 0 !important;
		margin-left: 0 !important;
		margin-top: 0 !important;
		padding: 60px 20px !important;
		z-index: auto !important;

		opacity: 1 !important;

		page-break-after: always !important;

		-webkit-transform-style: flat !important;
		   -moz-transform-style: flat !important;
		    -ms-transform-style: flat !important;
		        transform-style: flat !important;

		-webkit-transform: none !important;
		   -moz-transform: none !important;
		    -ms-transform: none !important;
		        transform: none !important;

		-webkit-transition: none !important;
		   -moz-transition: none !important;
		    -ms-transition: none !important;
		        transition: none !important;
	}
	.reveal .slides section.stack {
		padding: 0 !important;
	}
	.reveal section:last-of-type {
		page-break-after: avoid !important;
	}
	.reveal section .fragment {
		opacity: 1 !important;
		visibility: visible !important;

		-webkit-transform: none !important;
		   -moz-transform: none !important;
		    -ms-transform: none !important;
		        transform: none !important;
	}
	.reveal section img {
		display: block;
		margin: 15px 0px;
		background: rgba(255,255,255,1);
		border: 1px solid #666;
		box-shadow: none;
	}

	.reveal section small {
		font-size: 0.8em;
	}

}  
</script>


<script id="pdf-css" type="application/dynamic-css">
    
/**
 * This stylesheet is used to print reveal.js
 * presentations to PDF.
 *
 * https://github.com/hakimel/reveal.js#pdf-export
 */

* {
	-webkit-print-color-adjust: exact;
}

body {
	margin: 0 auto !important;
	border: 0;
	padding: 0;
	float: none !important;
	overflow: visible;
}

html {
	width: 100%;
	height: 100%;
	overflow: visible;
}

/* Remove any elements not needed in print. */
.nestedarrow,
.reveal .controls,
.reveal .progress,
.reveal .playback,
.reveal.overview,
.fork-reveal,
.share-reveal,
.state-background {
	display: none !important;
}

h1, h2, h3, h4, h5, h6 {
	text-shadow: 0 0 0 #000 !important;
}

.reveal pre code {
	overflow: hidden !important;
	font-family: Courier, 'Courier New', monospace !important;
}

ul, ol, div, p {
	visibility: visible;
	position: static;
	width: auto;
	height: auto;
	display: block;
	overflow: visible;
	margin: auto;
}
.reveal {
	width: auto !important;
	height: auto !important;
	overflow: hidden !important;
}
.reveal .slides {
	position: static;
	width: 100%;
	height: auto;

	left: auto;
	top: auto;
	margin: 0 !important;
	padding: 0 !important;

	overflow: visible;
	display: block;

	-webkit-perspective: none;
	   -moz-perspective: none;
	    -ms-perspective: none;
	        perspective: none;

	-webkit-perspective-origin: 50% 50%; /* there isn't a none/auto value but 50-50 is the default */
	   -moz-perspective-origin: 50% 50%;
	    -ms-perspective-origin: 50% 50%;
	        perspective-origin: 50% 50%;
}

.reveal .slides section {
	page-break-after: always !important;

	visibility: visible !important;
	position: relative !important;
	display: block !important;
	position: relative !important;

	margin: 0 !important;
	padding: 0 !important;
	box-sizing: border-box !important;
	min-height: 1px;

	opacity: 1 !important;

	-webkit-transform-style: flat !important;
	   -moz-transform-style: flat !important;
	    -ms-transform-style: flat !important;
	        transform-style: flat !important;

	-webkit-transform: none !important;
	   -moz-transform: none !important;
	    -ms-transform: none !important;
	        transform: none !important;
}

.reveal section.stack {
	margin: 0 !important;
	padding: 0 !important;
	page-break-after: avoid !important;
	height: auto !important;
	min-height: auto !important;
}

.reveal img {
	box-shadow: none;
}

.reveal .roll {
	overflow: visible;
	line-height: 1em;
}

/* Slide backgrounds are placed inside of their slide when exporting to PDF */
.reveal section .slide-background {
	display: block !important;
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	z-index: -1;
}

/* All elements should be above the slide-background */
.reveal section>* {
	position: relative;
	z-index: 1;
}

/* Display slide speaker notes when 'showNotes' is enabled */
.reveal .speaker-notes-pdf {
	display: block;
	width: 100%;
	max-height: none;
	left: auto;
	top: auto;
	z-index: 100;
}

/* Display slide numbers when 'slideNumber' is enabled */
.reveal .slide-number-pdf {
	display: block;
	position: absolute;
	font-size: 14px;
}

</script>


<script>
var style = document.createElement( 'style' );
style.type = 'text/css';
var style_script_id = window.location.search.match( /print-pdf/gi ) ? 'pdf-css' : 'paper-css';
var style_script = document.getElementById(style_script_id).text;
style.innerHTML = style_script;
document.getElementsByTagName('head')[0].appendChild(style);
</script>

    <script src="hypothesistesting-slides_files/header-attrs-2.11/header-attrs.js"></script>
    <link href="hypothesistesting-slides_files/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
    <link href="hypothesistesting-slides_files/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section>
    <h1 class="title">Tests d’hypothèses: résumer les informations sur les effets causaux</h1>
    <h2 class="author">Mettre votre nom</h2>
    <h3 class="date">10-02-2022</h3>
</section>
<section id="TOC">
<ul>
<li><a href="#/le-rôle-des-tests-dhypothèses-dans-linférence-causale">Le rôle des tests d’hypothèses dans l’inférence causale</a>
<ul>
<li><a href="#/points-principaux">Points principaux</a></li>
<li><a href="#/le-role-des-tests-dhypothèses-dans-linférence-causale-i">Le role des tests d’hypothèses dans l’inférence causale I</a></li>
<li><a href="#/le-role-des-tests-dhypothèses-dans-linférence-causale-ii">Le role des tests d’hypothèses dans l’inférence causale II</a></li>
<li><a href="#/le-role-des-tests-dhypothèses-dans-linférence-causale-iii">Le role des tests d’hypothèses dans l’inférence causale III</a></li>
</ul></li>
<li><a href="#/les-bases-du-test-dhypothèse">Les bases du test d’hypothèse</a>
<ul>
<li><a href="#/ingrédients-dun-test-dhypothèse">Ingrédients d’un test d’hypothèse</a></li>
<li><a href="#/une-hypothèse-est-lénoncé-ou-le-modèle-dune-relation-entre-des-résultats-potentiels">Une hypothèse est l’énoncé ou le modèle d’une relation entre des résultats potentiels</a></li>
<li><a href="#/les-statistiques-de-test-résument-les-relations-entre-le-traitement-et-les-résultats">Les statistiques de test résument les relations entre le traitement et les résultats</a></li>
<li><a href="#/le-design-lie-la-statistique-de-test-et-lhypothèse">Le design lie la statistique de test et l’hypothèse</a></li>
<li><a href="#/la-conception-guide-la-création-dune-distribution-de-statistiques-de-test-hypothétiques">La conception guide la création d’une distribution de statistiques de test hypothétiques</a></li>
<li><a href="#/courbe-des-distributions-de-randomisation-sous-lhypothèse-nulle">Courbe des distributions de randomisation sous l’hypothèse nulle</a></li>
<li><a href="#/les-p-valeurs-résument-les-graphiques">Les <span class="math inline">\(p\)</span>-valeurs résument les graphiques</a></li>
<li><a href="#/comment-faire-cela-en-r-coin">Comment faire cela en R : COIN</a></li>
<li><a href="#/comment-faire-cela-en-r-ritools">Comment faire cela en R : RItools</a></li>
<li><a href="#/comment-faire-cela-en-r-ri2">Comment faire cela en R : RI2</a></li>
<li><a href="#/sujets-suivants">Sujets suivants</a></li>
</ul></li>
<li><a href="#/tester-lhypothèse-nulle-faible">Tester l’hypothèse nulle faible</a>
<ul>
<li><a href="#/tester-lhypothèse-nulle-faible-dabsence-deffets-moyens">Tester l’hypothèse nulle faible d’absence d’effets moyens</a></li>
<li><a href="#/tester-lhypothèse-nulle-faible-dabsence-deffets-moyens-1">Tester l’hypothèse nulle faible d’absence d’effets moyens</a></li>
<li><a href="#/tester-lhypothèse-nulle-faible-dabsence-deffets-moyens-2">Tester l’hypothèse nulle faible d’absence d’effets moyens</a></li>
</ul></li>
<li><a href="#/rejeter-lhypothèse-nulle">Rejeter l’hypothèse nulle</a>
<ul>
<li><a href="#/rejeter-lhypothèse-nulle-et-faire-des-erreurs">Rejeter l’hypothèse nulle et faire des erreurs</a></li>
<li><a href="#/taux-de-faux-positifs-dans-les-tests-dhypothèses">Taux de faux positifs dans les tests d’hypothèses</a></li>
<li><a href="#/erreurs-de-faux-positifs-et-de-faux-négatifs">Erreurs de faux positifs et de faux négatifs</a></li>
<li><a href="#/un-test-unique-dune-seule-hypothèse">Un test unique d’une seule hypothèse</a></li>
<li><a href="#/les-décisions-impliquent-des-erreurs">Les décisions impliquent des erreurs</a></li>
<li><a href="#/diagnostiquer-les-taux-de-faux-positifs-par-simulation">Diagnostiquer les taux de faux positifs par simulation</a></li>
<li><a href="#/diagnostiquer-les-taux-de-faux-positifs-par-simulation-1">Diagnostiquer les taux de faux positifs par simulation</a></li>
<li><a href="#/diagnostiquer-les-taux-de-faux-positifs-par-simulation-2">Diagnostiquer les taux de faux positifs par simulation</a></li>
<li><a href="#/diagnostiquer-les-taux-de-faux-positifs-par-simulation-3">Diagnostiquer les taux de faux positifs par simulation</a></li>
<li><a href="#/diagnostiquer-les-taux-de-faux-positifs-par-simulation-4">Diagnostiquer les taux de faux positifs par simulation</a></li>
<li><a href="#/taux-de-faux-positifs-avec-n60-et-résultat-binaire">Taux de faux positifs avec <span class="math inline">\(N=60\)</span> et résultat binaire</a></li>
<li><a href="#/taux-de-faux-positifs-avec-n60-et-résultat-continu">Taux de faux positifs avec <span class="math inline">\(N=60\)</span> et résultat continu</a></li>
<li><a href="#/sommaire">Sommaire</a></li>
</ul></li>
<li><a href="#/approfondissement">Approfondissement</a>
<ul>
<li><a href="#/quelques-sujets-approfondis-liés-aux-tests-dhypothèses">Quelques sujets approfondis liés aux tests d’hypothèses</a></li>
<li><a href="#/que-savoir-de-plus-sur-les-tests-dhypothèses">Que savoir de plus sur les tests d’hypothèses</a></li>
<li><a href="#/exercice-tests-dhypothèses-et-statistiques-de-test">Exercice : Tests d’hypothèses et statistiques de test</a></li>
</ul></li>
<li><a href="#/tester-de-nombreuses-hypothèses">Tester de nombreuses hypothèses</a>
<ul>
<li><a href="#/quand-pouvons-nous-tester-de-nombreuses-hypothèses">Quand pouvons-nous tester de nombreuses hypothèses ?</a></li>
<li><a href="#/taux-de-faux-positifs-dans-les-tests-dhypothèses-multiples">Taux de faux positifs dans les tests d’hypothèses multiples</a></li>
<li><a href="#/découvertes-avec-tests-multiples">Découvertes avec tests multiples</a></li>
<li><a href="#/deux-taux-derreur-principaux-à-contrôler-lors-du-test-de-nombreuses-hypothèses">Deux taux d’erreur principaux à contrôler lors du test de nombreuses hypothèses</a></li>
<li><a href="#/questions-à-résultats-multiples">Questions à résultats multiples</a></li>
<li><a href="#/tests-dhypothèses-multiples-résultats-multiples">Tests d’hypothèses multiples : résultats multiples</a></li>
<li><a href="#/pouvons-nous-détecter-un-effet-sur-le-résultat-y1">Pouvons-nous détecter un effet sur le résultat <code>Y1</code> ?</a></li>
<li><a href="#/pour-lequel-des-cinq-résultats-pouvons-nous-détecter-un-effet">Pour lequel des cinq résultats pouvons-nous détecter un effet ?</a></li>
<li><a href="#/pouvons-nous-détecter-un-effet-pour-un-des-cinq-résultats">Pouvons-nous détecter un effet pour un des cinq résultats ?</a></li>
<li><a href="#/comparaison-des-approches-i">Comparaison des approches I</a></li>
<li><a href="#/comparaison-des-approches-ii">Comparaison des approches II</a></li>
<li><a href="#/la-correction-de-holm">La correction de Holm</a></li>
<li><a href="#/approches-pour-tester-des-hypothèses-avec-plusieurs-bras">Approches pour tester des hypothèses avec plusieurs bras</a></li>
<li><a href="#/tests-dhypothèses-multiples-bras-de-traitement-multiples">Tests d’hypothèses multiples : bras de traitement multiples</a></li>
<li><a href="#/tests-dhypothèses-multiples-bras-de-traitement-multiples-1">Tests d’hypothèses multiples : bras de traitement multiples</a></li>
<li><a href="#/tests-dhypothèses-multiples-bras-de-traitement-multiples-2">Tests d’hypothèses multiples : bras de traitement multiples</a></li>
<li><a href="#/résumé">Résumé</a></li>
<li><a href="#/références">Références</a></li>
</ul></li>
</ul>
</section>

<section>
<section id="le-rôle-des-tests-dhypothèses-dans-linférence-causale" class="title-slide slide level1">
<h1>Le rôle des tests d’hypothèses dans l’inférence causale</h1>

</section>
<section id="points-principaux" class="slide level2">
<h2>Points principaux</h2>
<ul>
<li><p>L’inférence statistique (e.g., les tests d’hypothèses et les intervalles de confiance) nécessite <strong>l’inférence</strong> — i.e. raisonner sur ce qui n’a pas été observé.</p></li>
<li><p>Les <span class="math inline">\(p\)</span>-valeurs nécessitent des distributions de probabilité.</p></li>
<li><p>Une randomisation (ou un design) + une hypothèse + une fonction de test statistique <span class="math inline">\(\rightarrow\)</span> distributions de probabilité représentant l’hypothèse (distributions de référence)</p></li>
<li><p>Valeurs observées des tests statistiques + distribution de référence <span class="math inline">\(\rightarrow\)</span> <span class="math inline">\(p\)</span>-valeur.</p></li>
</ul>
</section>
<section id="le-role-des-tests-dhypothèses-dans-linférence-causale-i" class="slide level2">
<h2>Le role des tests d’hypothèses dans l’inférence causale I</h2>
<ul>
<li><p>Le <strong>problème fondamental de l’inférence causale</strong> dit que nous ne pouvons voir qu’un seul résultat potentiel pour une unité donnée.</p></li>
<li><p>Donc, si un effet causal contrefactuel du traitement, <span class="math inline">\(T\)</span>, pour Jake se produit lorsque <span class="math inline">\(y_{\text{Jake},T=1} \ne y_{\text{Jake},T=0}\)</span>, alors comment pouvons-nous en savoir plus sur l’effet causal ?</p></li>
<li><p>Une solution est l’<strong><a href="estimation-slides.Rmd">estimation</a> des moyennes des effets causaux</strong> (les ATE, ITT, LATE).</p></li>
<li><p>C’est ce que nous appellons l’approche de Neyman.</p></li>
</ul>
</section>
<section id="le-role-des-tests-dhypothèses-dans-linférence-causale-ii" class="slide level2">
<h2>Le role des tests d’hypothèses dans l’inférence causale II</h2>
<ul>
<li><p>Une autre solution consiste à faire des <strong>affirmations</strong> ou <strong>des suppositions</strong> sur les effets causaux.</p></li>
<li><p>On pourrait dire : “Je pense que l’effet sur Jake est de 5.” ou “Cette expérience n’a eu d’effet sur personne.” Et puis nous demandons “Quelles preuves apporte cette expérience à propos de cette affirmation ?”</p></li>
<li><p>Cette preuve est contenue dans la <span class="math inline">\(p\)</span>-valeur.</p></li>
<li><p>C’est ce que nous appelons l’approche de Fisher.</p></li>
</ul>
</section>
<section id="le-role-des-tests-dhypothèses-dans-linférence-causale-iii" class="slide level2">
<h2>Le role des tests d’hypothèses dans l’inférence causale III</h2>
<ul>
<li><p>L’approche du test d’hypothèse pour l’inférence causale ne fournit pas une meilleure supposition, mais indique <em>la quantité d’informations que le design de recherche fournit pour cette assertion causale</em>.</p></li>
<li><p>L’approche par estimation fournit une meilleure supposition, mais ne vous dit pas ce que vous savez sur cette supposition.</p>
<ul>
<li>Par exemple, une supposition avec <span class="math inline">\(N=10\)</span> semble en dire moins sur l’effet que pour <span class="math inline">\(N=1000\)</span>.</li>
<li>Par exemple, une supposition avec 95% de <span class="math inline">\(Y=1\)</span> et 5% de <span class="math inline">\(Y=0\)</span> semble en dire moins que lorsque les résultats sont répartis également entre 0 et 1.</li>
</ul></li>
<li><p>Nous rapportons presque toujours les deux approches, car les deux nous aident à prendre des décisions : “Notre supposition de l’effet du traitement était de 5, et nous pouvions rejeter l’idée que l’effet était de 0 (<span class="math inline">\(p\)</span>=0,01).”</p></li>
</ul>
</section></section>
<section>
<section id="les-bases-du-test-dhypothèse" class="title-slide slide level1">
<h1>Les bases du test d’hypothèse</h1>

</section>
<section id="ingrédients-dun-test-dhypothèse" class="slide level2">
<h2>Ingrédients d’un test d’hypothèse</h2>
<ul>
<li><p>Une <strong>hypothèse</strong> est un énoncé concernant une relation entre les résultats potentiels.</p></li>
<li><p>Une <strong>statistique de test</strong> résume la relation entre le traitement et les résultats observés.</p></li>
<li><p>Le <strong>design</strong> permet de lier l’hypothèse et la statistique de test : calculez une statistique de test qui décrit une relation entre des résultats potentiels.</p></li>
<li><p>Le <strong>design</strong> indique aussi comment générer une <em>distribution</em> des statistiques de test possibles implicitement liés à l’hypothèse.</p></li>
<li><p>Une <strong><span class="math inline">\(p\)</span>-valeur</strong> décrit la relation entre notre statistique de test observée et la distribution de possibles statistiques de test.</p></li>
</ul>
</section>
<section id="une-hypothèse-est-lénoncé-ou-le-modèle-dune-relation-entre-des-résultats-potentiels" class="slide level2">
<h2>Une hypothèse est l’énoncé ou le modèle d’une relation entre des résultats potentiels</h2>
<table>
<thead>
<tr class="header">
<th style="text-align: right;">Résultat</th>
<th style="text-align: right;">Traitement</th>
<th style="text-align: right;"><span class="math inline">\(y_{i,0}\)</span></th>
<th style="text-align: right;">ITE</th>
<th style="text-align: right;"><span class="math inline">\(y_{i,1}\)</span></th>
<th style="text-align: right;"><span class="math inline">\(Y&gt;0\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">30</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">200</td>
<td style="text-align: right;">200</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">91</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">23</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">23</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">34</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">34</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">45</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">190</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">190</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">280</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">200</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">200</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">220</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
<p>Par exemple, l’hypothèse nulle stricte d’absence d’effet est <span class="math inline">\(H_0 : y_{i,1} = y_{i,0}\)</span></p>
</section>
<section id="les-statistiques-de-test-résument-les-relations-entre-le-traitement-et-les-résultats" class="slide level2">
<h2>Les statistiques de test résument les relations entre le traitement et les résultats</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## La statistique de test de la différence des moyennes</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>meanTT <span class="ot">&lt;-</span> <span class="cf">function</span>(ys, z) {</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(ys[z <span class="sc">==</span> <span class="dv">1</span>]) <span class="sc">-</span> <span class="fu">mean</span>(ys[z <span class="sc">==</span> <span class="dv">0</span>])</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="do">## La statistique de test de la différence des moyennes selon le rang</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>meanrankTT <span class="ot">&lt;-</span> <span class="cf">function</span>(ys, z) {</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  ranky <span class="ot">&lt;-</span> <span class="fu">rank</span>(ys)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(ranky[z <span class="sc">==</span> <span class="dv">1</span>]) <span class="sc">-</span> <span class="fu">mean</span>(ranky[z <span class="sc">==</span> <span class="dv">0</span>])</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>observedMeanTT <span class="ot">&lt;-</span> <span class="fu">meanTT</span>(<span class="at">ys =</span> Y, <span class="at">z =</span> T)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>observedMeanRankTT <span class="ot">&lt;-</span> <span class="fu">meanrankTT</span>(<span class="at">ys =</span> Y, <span class="at">z =</span> T)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>observedMeanTT</span></code></pre></div>
<pre><code>[1] -49.6</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>observedMeanRankTT</span></code></pre></div>
<pre><code>[1] 1</code></pre>
</section>
<section id="le-design-lie-la-statistique-de-test-et-lhypothèse" class="slide level2">
<h2>Le design lie la statistique de test et l’hypothèse</h2>
<p>Ce que nous observons pour chaque personne <span class="math inline">\(i\)</span> (<span class="math inline">\(Y_i\)</span>) est soit ce que nous aurions observé en traitement (<span class="math inline">\(y_{i,1}\)</span>) <strong>ou</strong> ce que nous aurions observé en contrôle (<span class="math inline">\(y_{i ,0}\)</span>).</p>
<p><span class="math display">\[Y_i = T_i y_{i,1} + (1-T_i)* y_{i,0}\]</span></p>
<p>Donc, si <span class="math inline">\(y_{i,1}=y_{i,0}\)</span> alors <span class="math inline">\(Y_i = y_{i,0}\)</span>.</p>
<p>Ce que nous <em>observons réellement</em> est ce que nous <em>aurions observé dans la condition de contrôle</em>.</p>
</section>
<section id="la-conception-guide-la-création-dune-distribution-de-statistiques-de-test-hypothétiques" class="slide level2">
<h2>La conception guide la création d’une distribution de statistiques de test hypothétiques</h2>
<p>Nous devons savoir comment répéter notre expérience:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>repeatExperiment <span class="ot">&lt;-</span> <span class="cf">function</span>(N) {</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">complete_ra</span>(N)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Ensuite, on répète notre expérience en calculant à chaque fois une nouvelle statistique de test donnée par l’hypothèse et le design :</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123456</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>possibleMeanDiffsH0 <span class="ot">&lt;-</span> <span class="fu">replicate</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10000</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">meanTT</span>(<span class="at">ys =</span> Y, <span class="at">z =</span> <span class="fu">repeatExperiment</span>(<span class="at">N =</span> <span class="dv">10</span>))</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123456</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>possibleMeanRankDiffsH0 <span class="ot">&lt;-</span> <span class="fu">replicate</span>(</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10000</span>,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">meanrankTT</span>(<span class="at">ys =</span> Y, <span class="at">z =</span> <span class="fu">repeatExperiment</span>(<span class="at">N =</span> <span class="dv">10</span>))</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</section>
<section id="courbe-des-distributions-de-randomisation-sous-lhypothèse-nulle" class="slide level2">
<h2>Courbe des distributions de randomisation sous l’hypothèse nulle</h2>

<div class="figure" style="text-align: center">
<img src="figs/figunnamed-chunk-6-1.png" alt="Utiliser un design d'expérience pour tester une hypothèse avec deux statistiques de test différentes." width=".8\textwidth"  />
<p class="caption">
Utiliser un design d’expérience pour tester une hypothèse avec deux statistiques de test différentes.
</p>
</div>
</section>
<section id="les-p-valeurs-résument-les-graphiques" class="slide level2">
<h2>Les <span class="math inline">\(p\)</span>-valeurs résument les graphiques</h2>
<p>Comment devrions-nous interpréter ces <span class="math inline">\(p\)</span>-valeurs ? (Notez qu’elles sont unilatérales)</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>pMeanTT <span class="ot">&lt;-</span> <span class="fu">mean</span>(possibleMeanDiffsH0 <span class="sc">&gt;=</span> observedMeanTT)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>pMeanRankTT <span class="ot">&lt;-</span> <span class="fu">mean</span>(possibleMeanRankDiffsH0 <span class="sc">&gt;=</span> observedMeanRankTT)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>pMeanTT</span></code></pre></div>
<pre><code>[1] 0.7785</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>pMeanRankTT</span></code></pre></div>
<pre><code>[1] 0.3198</code></pre>
</section>
<section id="comment-faire-cela-en-r-coin" class="slide level2">
<h2>Comment faire cela en R : COIN</h2>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## avec le package coin</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(coin)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12345</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>pMean2 <span class="ot">&lt;-</span> coin<span class="sc">::</span><span class="fu">pvalue</span>(<span class="fu">oneway_test</span>(Y <span class="sc">~</span> <span class="fu">factor</span>(T),</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> dat,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">distribution =</span> <span class="fu">approximate</span>(<span class="at">nresample =</span> <span class="dv">1000</span>), <span class="at">alternative =</span> <span class="st">&quot;less&quot;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>dat<span class="sc">$</span>rankY <span class="ot">&lt;-</span> <span class="fu">rank</span>(dat<span class="sc">$</span>Y)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>pMeanRank2 <span class="ot">&lt;-</span> coin<span class="sc">::</span><span class="fu">pvalue</span>(<span class="fu">oneway_test</span>(rankY <span class="sc">~</span> <span class="fu">factor</span>(T),</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> dat,</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">distribution =</span> <span class="fu">approximate</span>(<span class="at">nresample =</span> <span class="dv">1000</span>), <span class="at">alternative =</span> <span class="st">&quot;less&quot;</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>pMean2</span></code></pre></div>
<pre><code>[1] 0.783
99 percent confidence interval:
 0.7476 0.8157 </code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>pMeanRank2</span></code></pre></div>
<pre><code>[1] 0.323
99 percent confidence interval:
 0.2853 0.3624 </code></pre>
</section>
<section id="comment-faire-cela-en-r-ritools" class="slide level2 allowframebreaks">
<h2 class="allowframebreaks">Comment faire cela en R : RItools</h2>
<p>Installez d’abord une version de développement du package RItools</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dev_mode() ## dont install the package globally</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">install</span>(<span class="st">&quot;markmfredrickson/RItools@randomization-distribution&quot;</span>,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">force =</span> <span class="cn">TRUE</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co"># dev_mode()</span></span></code></pre></div>
<p>Utilisez ensuite la fonction <code>RItest</code>.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dev_mode()</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RItools)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>thedesignA <span class="ot">&lt;-</span> <span class="fu">simpleRandomSampler</span>(<span class="at">total =</span> N, <span class="at">z =</span> dat<span class="sc">$</span>T, <span class="at">b =</span> <span class="fu">rep</span>(<span class="dv">1</span>, N))</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>pMean4 <span class="ot">&lt;-</span> <span class="fu">RItest</span>(</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> dat<span class="sc">$</span>Y, <span class="at">z =</span> dat<span class="sc">$</span>T, <span class="at">samples =</span> <span class="dv">1000</span>, <span class="at">test.stat =</span> meanTT,</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">sampler =</span> thedesignA</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>pMeanRank4 <span class="ot">&lt;-</span> <span class="fu">RItest</span>(</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> dat<span class="sc">$</span>Y, <span class="at">z =</span> dat<span class="sc">$</span>T, <span class="at">samples =</span> <span class="dv">1000</span>, <span class="at">test.stat =</span> meanrankTT,</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">sampler =</span> thedesignA</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>pMean4</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>pMeanRank4</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="co"># dev_mode() ## et désactiver le dev_mode</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>pMean4</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>Call<span class="sc">:</span>  <span class="fu">RItest</span>(<span class="at">y =</span> dat<span class="sc">$</span>Y, <span class="at">z =</span> dat<span class="sc">$</span>T, <span class="at">test.stat =</span> meanTT, <span class="at">sampler =</span> thedesignA,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">samples =</span> <span class="dv">1000</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>                             Value <span class="fu">Pr</span>(<span class="sc">&gt;</span>x)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>Statistique de test observée <span class="sc">-</span><span class="fl">49.6</span>   <span class="fl">0.78</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>pMeanRank4</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>Call<span class="sc">:</span>  <span class="fu">RItest</span>(<span class="at">y =</span> dat<span class="sc">$</span>Y, <span class="at">z =</span> dat<span class="sc">$</span>T, <span class="at">test.stat =</span> meanrankTT, <span class="at">sampler =</span> thedesignA,</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">samples =</span> <span class="dv">1000</span>)</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>                              Value <span class="fu">Pr</span>(<span class="sc">&gt;</span>x)</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>Statistique de test observée  <span class="dv">1</span>   <span class="fl">0.32</span></span></code></pre></div>
</section>
<section id="comment-faire-cela-en-r-ri2" class="slide level2">
<h2>Comment faire cela en R : RI2</h2>
<p>Comment interpréter la <span class="math inline">\(p\)</span>-valeur bilatérale ici ?</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="do">## en utilisant le package ri2</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ri2)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>thedesign <span class="ot">&lt;-</span> <span class="fu">declare_ra</span>(<span class="at">N =</span> N)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>dat<span class="sc">$</span>Z <span class="ot">&lt;-</span> dat<span class="sc">$</span>T</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>pMean4 <span class="ot">&lt;-</span> <span class="fu">conduct_ri</span>(Y <span class="sc">~</span> Z,</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">declaration =</span> thedesign,</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">sharp_hypothesis =</span> <span class="dv">0</span>, <span class="at">data =</span> dat, <span class="at">sims =</span> <span class="dv">1000</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(pMean4)</span></code></pre></div>
<pre><code>  term estimate two_tailed_p_value
1    Z    -49.6             0.4444</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>pMeanRank4 <span class="ot">&lt;-</span> <span class="fu">conduct_ri</span>(rankY <span class="sc">~</span> Z,</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">declaration =</span> thedesign,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">sharp_hypothesis =</span> <span class="dv">0</span>, <span class="at">data =</span> dat, <span class="at">sims =</span> <span class="dv">1000</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(pMeanRank4)</span></code></pre></div>
<pre><code>  term estimate two_tailed_p_value
1    Z        1             0.6349</code></pre>
</section>
<section id="sujets-suivants" class="slide level2">
<h2>Sujets suivants</h2>
<ul>
<li><p>Tester l’hypothèse nulle faible, <span class="math inline">\(H_0 : \bar{y}_{1} = \bar{y}_{0}\)</span>.</p></li>
<li><p>Rejeter l’hypothèse nulle (et faire des erreurs de faux positifs et/ou de faux négatifs).</p></li>
<li><p>Conserver un taux d’erreur correct de faux positifs quand on teste plus d’une hypothèse.</p></li>
<li><p>Puissance statistique des tests d’hypothèses (<a href="https://egap.github.io/learningdays-book/statistical-power-and-design-diagnosands.html">Module sur la puissance statistique et les diagnostics de conception</a>).</p></li>
</ul>
</section></section>
<section>
<section id="tester-lhypothèse-nulle-faible" class="title-slide slide level1">
<h1>Tester l’hypothèse nulle faible</h1>

</section>
<section id="tester-lhypothèse-nulle-faible-dabsence-deffets-moyens" class="slide level2">
<h2>Tester l’hypothèse nulle faible d’absence d’effets moyens</h2>
<ul>
<li><p>L’hypothèse nulle faible est une affirmation sur les agrégats. Elle est presque toujours exprimée en termes de moyennes : <span class="math inline">\(H_0 : \bar{y}_{1} = \bar{y}_{0}\)</span></p></li>
<li><p>La statistique de test pour cette hypothèse est presque toujours la simple différence des moyennes (c’est-à-dire <code>meanTT()</code> ci-dessus).</p></li>
</ul>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>lm1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Y <span class="sc">~</span> T, <span class="at">data =</span> dat)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>lm1P <span class="ot">&lt;-</span> <span class="fu">summary</span>(lm1)<span class="sc">$</span>coef[<span class="st">&quot;T&quot;</span>, <span class="st">&quot;Pr(&gt;|t|)&quot;</span>]</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>ttestP1 <span class="ot">&lt;-</span> <span class="fu">t.test</span>(Y <span class="sc">~</span> T, <span class="at">data =</span> dat)<span class="sc">$</span>p.value</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(estimatr)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>ttestP2 <span class="ot">&lt;-</span> <span class="fu">difference_in_means</span>(Y <span class="sc">~</span> T, <span class="at">data =</span> dat)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="at">lm1P =</span> lm1P, <span class="at">ttestP1 =</span> ttestP1, <span class="at">tttestP2 =</span> ttestP2<span class="sc">$</span>p.value)</span></code></pre></div>
<pre><code>      lm1P    ttestP1 tttestP2.T 
    0.3321     0.3587     0.3587 </code></pre>
<ul>
<li>Pourquoi la <span class="math inline">\(p\)</span>-valeur pour les moindres carrés ordinaires est différente ? Quelles hypothèses utiliser pour la calculer ?</li>
</ul>
</section>
<section id="tester-lhypothèse-nulle-faible-dabsence-deffets-moyens-1" class="slide level2">
<h2>Tester l’hypothèse nulle faible d’absence d’effets moyens</h2>
<p>La variation et l’emplacement de <span class="math inline">\(Y\)</span> changent avec le traitement dans cette simulation.</p>

<div class="figure">
<img src="figs/figunnamed-chunk-8-1.png" alt="Résultats observés en fonction du statut de traitement" width=".7\textwidth"  />
<p class="caption">
Résultats observés en fonction du statut de traitement
</p>
</div>
</section>
<section id="tester-lhypothèse-nulle-faible-dabsence-deffets-moyens-2" class="slide level2">
<h2>Tester l’hypothèse nulle faible d’absence d’effets moyens</h2>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="do">## à la main:</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>varEstATE <span class="ot">&lt;-</span> <span class="cf">function</span>(Y, T) {</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">var</span>(Y[T <span class="sc">==</span> <span class="dv">1</span>]) <span class="sc">/</span> <span class="fu">sum</span>(T) <span class="sc">+</span> <span class="fu">var</span>(Y[T <span class="sc">==</span> <span class="dv">0</span>]) <span class="sc">/</span> <span class="fu">sum</span>(<span class="dv">1</span> <span class="sc">-</span> T)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>seEstATE <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="fu">varEstATE</span>(dat<span class="sc">$</span>Y, dat<span class="sc">$</span>T))</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>obsTStat <span class="ot">&lt;-</span> observedMeanTT <span class="sc">/</span> seEstATE</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">observedTestStat =</span> observedMeanTT,</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">stderror =</span> seEstATE,</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">tstat =</span> obsTStat,</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">pval =</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">min</span>(</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pt</span>(obsTStat, <span class="at">df =</span> <span class="dv">8</span>, <span class="at">lower.tail =</span> <span class="cn">TRUE</span>),</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pt</span>(obsTStat, <span class="at">df =</span> <span class="dv">8</span>, <span class="at">lower.tail =</span> <span class="cn">FALSE</span>)</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>observedTestStat         stderror            tstat             pval 
        -49.6000          48.0448          -1.0324           0.3321 </code></pre>
</section></section>
<section>
<section id="rejeter-lhypothèse-nulle" class="title-slide slide level1">
<h1>Rejeter l’hypothèse nulle</h1>

</section>
<section id="rejeter-lhypothèse-nulle-et-faire-des-erreurs" class="slide level2">
<h2>Rejeter l’hypothèse nulle et faire des erreurs</h2>
<ul>
<li><p>“Typiquement, le niveau du test [<span class="math inline">\(\alpha\)</span>] est une promesse sur la performance du test et la taille est un fait sur sa performance…” (Rosenbaum 2010, Glossaire)</p></li>
<li><p><span class="math inline">\(\alpha\)</span> est la probabilité de rejeter l’hypothèse nulle lorsque l’hypothèse nulle est vraie.</p></li>
<li><p>Comment doit-on interpréter <span class="math inline">\(p\)</span>=0.78 ? Qu’en est-il de <span class="math inline">\(p\)</span>=0.32 (nos tests pour l’hypothèse nulle stricte) ?</p></li>
<li><p>Que signifie “rejeter” <span class="math inline">\(H_0 : y_{i,1}=y_{i,2}\)</span> à <span class="math inline">\(\alpha=0,05\)</span> ?</p></li>
</ul>
</section>
<section id="taux-de-faux-positifs-dans-les-tests-dhypothèses" class="slide level2 allowframebreaks">
<h2 class="allowframebreaks">Taux de faux positifs dans les tests d’hypothèses</h2>

<div class="figure">
<img src="figs/fignormp-1.png" alt="P-valeur unilatérale d'une statistique de test normale." width=".5\textwidth"  />
<p class="caption">
P-valeur unilatérale d’une statistique de test normale.
</p>
</div>
<p>Attention:</p>
<ul>
<li><p>La courbe est centrée sur la valeur hypothétique.</p></li>
<li><p>La courbe représente le monde de l’hypothèse.</p></li>
<li><p>La <span class="math inline">\(p\)</span>-valeur décrit à quel point il serait rare de voir la statistique de test observée (ou une valeur plus éloignée de la valeur hypothétique) dans le monde de l’hypothèse nulle.</p></li>
<li><p>Sur la figure, la valeur observée de la statistique de test est cohérente avec la distribution hypothétique, mais pas très cohérente.</p></li>
<li><p>Même si <span class="math inline">\(p &lt; 0,05\)</span> (ou <span class="math inline">\(p &lt; 0,001\)</span>) la statistique de test observée doit refléter en partie la distribution hypothétique. Cela signifie que vous pouvez toujours faire une erreur lorsque vous rejetez une hypothèse nulle.</p></li>
</ul>
</section>
<section id="erreurs-de-faux-positifs-et-de-faux-négatifs" class="slide level2">
<h2>Erreurs de faux positifs et de faux négatifs</h2>
<ul>
<li><p>Si nous disons, “le résultat expérimental est significativement différent de la valeur hypothétique de zéro (<span class="math inline">\(p=0,001\)</span>) ! Nous rejetons cette hypothèse !” <strong>lorsque la vérité est zéro</strong> nous faisons une <strong>erreur de faux positifs</strong> (prétendant détecter quelque chose lorsqu’il n’y a pas de signal, seulement du bruit).</p></li>
<li><p>Si nous disons : “Nous ne pouvons pas distinguer ce résultat de zéro (<span class="math inline">\(p=0,3\)</span>). Nous ne pouvons pas rejeter l’hypothèse de zéro.” <strong>lorsque la vérité n’est pas zéro</strong> nous faisons une <strong>erreur de faux négatifs</strong> (prétendant l’incapacité à détecter quelque chose lorsqu’il y a un signal, mais qu’il est noyé dans le bruit).</p></li>
</ul>
</section>
<section id="un-test-unique-dune-seule-hypothèse" class="slide level2">
<h2>Un test unique d’une seule hypothèse</h2>
<ul>
<li><p>Un test unique d’une seule hypothèse devrait rarement augmenter le taux de faux positifs (par exemple, si nous définissons <span class="math inline">\(\alpha=0,05\)</span>) alors nous acceptons que notre procédure de test produise des faux positifs dans <strong>au plus de 5% des tests d’une assignation de traitement donnée dans une expérience donnée</strong>.</p></li>
<li><p>De plus, un <strong>test unique d’une seule hypothèse</strong> doit détecter le signal lorsqu’il existe — il doit avoir une <strong>puissance statistique</strong> élevée. En d’autres termes, il ne doit pas manquer la détection du signal lorsqu’il existe (c’est-à-dire qu’il devrait avoir un faible taux de faux négatifs).</p></li>
</ul>
</section>
<section id="les-décisions-impliquent-des-erreurs" class="slide level2">
<h2>Les décisions impliquent des erreurs</h2>
<ul>
<li><p>Si les erreurs sont nécessaires, comment les diagnostiquer ? Comment savoir si notre procédure de tests d’hypothèses génère trop de faux positifs ?</p></li>
<li><p>Diagnostiquez par simulation !</p></li>
</ul>
</section>
<section id="diagnostiquer-les-taux-de-faux-positifs-par-simulation" class="slide level2">
<h2>Diagnostiquer les taux de faux positifs par simulation</h2>
<ul>
<li><p>A travers les répétitions du design :</p>
<ul>
<li>Créer une hypothèse nulle vraie.</li>
<li>Testez cette hypothèse.</li>
<li>La <span class="math inline">\(p\)</span>-valeur doit être élevée si le test fonctionne correctement.</li>
</ul></li>
<li><p>La proportion de petites <span class="math inline">\(p\)</span>-valeurs ne doit pas dépasser <span class="math inline">\(\alpha\)</span> si le test fonctionne correctement.</p></li>
</ul>
</section>
<section id="diagnostiquer-les-taux-de-faux-positifs-par-simulation-1" class="slide level2">
<h2>Diagnostiquer les taux de faux positifs par simulation</h2>
<p>Ex: avec un résultat binaire. Le test fonctionne-t-il comme il se doit ? À quoi ressemblent les p-valeurs lorsqu’il n’y a pas d’effet ?</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>collectPValues <span class="ot">&lt;-</span> <span class="cf">function</span>(y, trt, <span class="at">thedistribution =</span> <span class="fu">exact</span>()) {</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Faire en sorte que Y et T n&#39;aient aucune relation en randomisant T à nouveau</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  new_trt <span class="ot">&lt;-</span> <span class="fu">repeatExperiment</span>(<span class="fu">length</span>(y))</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  thedata <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">new_trt =</span> new_trt, <span class="at">y =</span> y)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  thedata<span class="sc">$</span>ranky <span class="ot">&lt;-</span> <span class="fu">rank</span>(y)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  thedata<span class="sc">$</span>new_trtF <span class="ot">&lt;-</span> <span class="fu">factor</span>(thedata<span class="sc">$</span>new_trt)</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Les 4 tests</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  thelm <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> new_trt, <span class="at">data =</span> thedata)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  t_test_CLT <span class="ot">&lt;-</span> <span class="fu">difference_in_means</span>(y <span class="sc">~</span> new_trt, <span class="at">data =</span> thedata)</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  t_test_exact <span class="ot">&lt;-</span> <span class="fu">oneway_test</span>(y <span class="sc">~</span> new_trtF,</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> thedata,</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">distribution =</span> thedistribution</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>  t_test_rank_exact <span class="ot">&lt;-</span> <span class="fu">oneway_test</span>(ranky <span class="sc">~</span> new_trtF,</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> thedata,</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">distribution =</span> thedistribution</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>  owP <span class="ot">&lt;-</span> coin<span class="sc">::</span><span class="fu">pvalue</span>(t_test_exact)[[<span class="dv">1</span>]]</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>  owRankP <span class="ot">&lt;-</span> coin<span class="sc">::</span><span class="fu">pvalue</span>(t_test_rank_exact)[[<span class="dv">1</span>]]</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Renvoyer les p-valeurs</span></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">c</span>(</span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">lmp =</span> <span class="fu">summary</span>(thelm)<span class="sc">$</span>coef[<span class="st">&quot;new_trt&quot;</span>, <span class="st">&quot;Pr(&gt;|t|)&quot;</span>],</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">neyp =</span> t_test_CLT<span class="sc">$</span>p.value[[<span class="dv">1</span>]],</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">rtp =</span> owP,</span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">rtpRank =</span> owRankP</span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</section>
<section id="diagnostiquer-les-taux-de-faux-positifs-par-simulation-2" class="slide level2">
<h2>Diagnostiquer les taux de faux positifs par simulation</h2>
<ul>
<li><p>Lorsqu’il n’y a pas d’effet, un test de l’hypothèse nulle d’absence d’effet doit produire une <strong>grande</strong> p-valeur.</p></li>
<li><p>Si le test fonctionne bien, nous devrions voir principalement de grandes p-valeurs et très peu de petites p-valeurs.</p></li>
<li><p>Quelques-unes des p-valeurs pour les quatre tests différents (nous avons fait 5000 simulations, en voici 5)</p></li>
</ul>
<pre><code>        [,1] [,2] [,3] [,4]   [,5]
lmp        1    1    1    1 0.1411
neyp       1    1    1    1 0.1778
rtp        1    1    1    1 0.4444
rtpRank    1    1    1    1 0.4444</code></pre>
</section>
<section id="diagnostiquer-les-taux-de-faux-positifs-par-simulation-3" class="slide level2">
<h2>Diagnostiquer les taux de faux positifs par simulation</h2>
<p>En fait, s’il n’y a pas d’effet, et si nous décidons de rejeter l’hypothèse nulle d’absence d’effet avec <span class="math inline">\(\alpha=0,25\)</span>, nous ne voudrions <strong>pas plus de 25% des p-valeurs de cette simulation en dessous de p=0,25</strong>. Que voit-on ici ? Quels tests semblent avoir des taux de faux positifs trop élevés ?</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Calculer la proportion de p-valeurs inférieures à 0,25</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="do">## pour chaque ligne de pDist</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(pDist, <span class="dv">1</span>, <span class="cf">function</span>(x) {</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(x <span class="sc">&lt;</span> .<span class="dv">25</span>)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<pre><code>    lmp    neyp     rtp rtpRank 
 0.4536  0.4536  0.0000  0.0000 </code></pre>
</section>
<section id="diagnostiquer-les-taux-de-faux-positifs-par-simulation-4" class="slide level2">
<h2>Diagnostiquer les taux de faux positifs par simulation</h2>
<p>Comparez les tests en traçant la proportion de p-valeurs inférieures à un nombre donné. Les tests “d’inférence de randomisation” contrôlent le taux de faux positifs (ce sont les tests avec permutation directe répétant l’expérience).</p>

<div class="figure">
<img src="figs/figplotecdf-1.png" alt="Distributions des p-valeurs quand il n y a aucun effet pour quatre tests avec n=10. Un test qui contrôle son taux de faux positifs doit avoir des points sur ou en dessous de la ligne diagonale." width=".6\textwidth"  />
<p class="caption">
Distributions des p-valeurs quand il n y a aucun effet pour quatre tests avec n=10. Un test qui contrôle son taux de faux positifs doit avoir des points sur ou en dessous de la ligne diagonale.
</p>
</div>
</section>
<section id="taux-de-faux-positifs-avec-n60-et-résultat-binaire" class="slide level2">
<h2>Taux de faux positifs avec <span class="math inline">\(N=60\)</span> et résultat binaire</h2>
<p>Dans ce design, seuls les tests basés sur l’inférence de randomisation directe contrôlent le taux de faux positifs.</p>

<div class="figure">
<img src="figs/figplotecdfBig-1.png" alt="Distributions des p-valeurs quand il n y a aucun effet pour quatre tests avec n=60 et un résultat binaire. Un test qui contrôle son taux de faux positifs doit avoir des points sur ou en dessous de la ligne diagonale." width=".7\textwidth"  />
<p class="caption">
Distributions des p-valeurs quand il n y a aucun effet pour quatre tests avec n=60 et un résultat binaire. Un test qui contrôle son taux de faux positifs doit avoir des points sur ou en dessous de la ligne diagonale.
</p>
</div>
</section>
<section id="taux-de-faux-positifs-avec-n60-et-résultat-continu" class="slide level2">
<h2>Taux de faux positifs avec <span class="math inline">\(N=60\)</span> et résultat continu</h2>
<p>Ici, tous les tests contrôlent bien le taux de faux positifs.</p>

<div class="figure">
<img src="figs/figplotecdfBig2-1.png" alt="Distributions des p-valeurs quand il n y a aucun effet pour quatre tests avec n=60 et un résultat continu. Un test qui contrôle son taux de faux positifs doit avoir des points sur ou en dessous de la ligne diagonale." width=".7\textwidth"  />
<p class="caption">
Distributions des p-valeurs quand il n y a aucun effet pour quatre tests avec n=60 et un résultat continu. Un test qui contrôle son taux de faux positifs doit avoir des points sur ou en dessous de la ligne diagonale.
</p>
</div>
</section>
<section id="sommaire" class="slide level2">
<h2>Sommaire</h2>
<ul>
<li><p>Un bon test :</p>
<ol type="1">
<li><p>met rarement en doute la vérité, et</p></li>
<li><p>distingue facilement le signal du bruit (met souvent en doute les contrevérités).</p></li>
</ol></li>
<li><p>Nous pouvons savoir si notre procédure de test contrôle le taux de faux positifs compte tenu de notre dsign.</p></li>
<li><p>Lorsque le taux de faux positifs n’est pas contrôlé, qu’est-ce qui ne va pas ? (probablement lié à l’asymptotique).</p></li>
</ul>
</section></section>
<section>
<section id="approfondissement" class="title-slide slide level1">
<h1>Approfondissement</h1>

</section>
<section id="quelques-sujets-approfondis-liés-aux-tests-dhypothèses" class="slide level2">
<h2>Quelques sujets approfondis liés aux tests d’hypothèses</h2>
<ul>
<li><p>Même si une procédure de test donnée contrôle le taux de faux positifs pour un seul test, elle peut ne pas contrôler le taux pour un groupe de tests. Voir <a href="https://egap.org/resource/10-things-to-know-about-multiple-comparisons/">10 choses à savoir sur les comparaisons multiples</a> pour les approches de contrôle de taux de rejet dans plusieurs tests.</p></li>
<li><p>Un intervalle de confiance de <span class="math inline">\(100(1-\alpha)\)</span>% peut être défini comme la plage d’hypothèses où toutes les <span class="math inline">\(p\)</span>-valeurs sont supérieures ou égales à <span class="math inline">\(\alpha\)</span>. C’est ce qu’on appelle l’inversion du test d’hypothèse (<span class="citation" data-cites="rosenbaum2010design"><a href="#/ref-rosenbaum2010design" role="doc-biblioref">Rosenbaum</a> (<a href="#/ref-rosenbaum2010design" role="doc-biblioref">2010</a>)</span>). Autrement dit, un intervalle de confiance est un ensemble de tests d’hypothèses.</p></li>
</ul>
</section>
<section id="que-savoir-de-plus-sur-les-tests-dhypothèses" class="slide level2 allowframebreaks">
<h2 class="allowframebreaks">Que savoir de plus sur les tests d’hypothèses</h2>
<ul>
<li><p>Une estimation ponctuelle basée sur des tests d’hypothèse est appelée une estimation ponctuelle de Hodges-Lehmann (<span class="citation" data-cites="rosenbaum1993hlp"><a href="#/ref-rosenbaum1993hlp" role="doc-biblioref">Rosenbaum</a> (<a href="#/ref-rosenbaum1993hlp" role="doc-biblioref">1993</a>)</span>,<span class="citation" data-cites="hodges1963elb"><a href="#/ref-hodges1963elb" role="doc-biblioref">Hodges and Lehmann</a> (<a href="#/ref-hodges1963elb" role="doc-biblioref">1963</a>)</span>).</p></li>
<li><p>Un ensemble de tests d’hypothèses peut être combiné en un seul test d’hypothèse (<span class="citation" data-cites="hansen:bowers:2008"><a href="#/ref-hansen:bowers:2008" role="doc-biblioref">Hansen and Bowers</a> (<a href="#/ref-hansen:bowers:2008" role="doc-biblioref">2008</a>)</span>,<span class="citation" data-cites="caughey2017nonparametric"><a href="#/ref-caughey2017nonparametric" role="doc-biblioref">Caughey, Dafoe, and Seawright</a> (<a href="#/ref-caughey2017nonparametric" role="doc-biblioref">2017</a>)</span>).</p></li>
<li><p>Dans les tests d’équivalence, on peut émettre l’hypothèse que deux statistiques de test sont équivalentes (c’est-à-dire que le groupe de traitement est le même que le groupe témoin) plutôt que d’environ une seule statistique de test (la différence entre les deux groupes est de zéro) (<span class="citation" data-cites="hartman2018equivalence"><a href="#/ref-hartman2018equivalence" role="doc-biblioref">Hartman and Hidalgo</a> (<a href="#/ref-hartman2018equivalence" role="doc-biblioref">2018</a>)</span>).</p></li>
<li><p>Étant donné qu’un test d’hypothèse est un modèle de résultats potentiels, on peut utiliser les tests d’hypothèses pour en savoir plus sur des modèles complexes, tels que des modèles de débordement et de propagation des effets de traitement à travers les réseaux (<span class="citation" data-cites="bowers2013reasoning"><a href="#/ref-bowers2013reasoning" role="doc-biblioref">Bowers, Fredrickson, and Panagopoulos</a> (<a href="#/ref-bowers2013reasoning" role="doc-biblioref">2013</a>)</span>, <span class="citation" data-cites="bowers2016research"><a href="#/ref-bowers2016research" role="doc-biblioref">Bowers, Fredrickson, and Aronow</a> (<a href="#/ref-bowers2016research" role="doc-biblioref">2016</a>)</span>, <span class="citation" data-cites="bowers2018models"><a href="#/ref-bowers2018models" role="doc-biblioref">Bowers et al.</a> (<a href="#/ref-bowers2018models" role="doc-biblioref">2018</a>)</span>)</p></li>
</ul>
</section>
<section id="exercice-tests-dhypothèses-et-statistiques-de-test" class="slide level2">
<h2>Exercice : Tests d’hypothèses et statistiques de test</h2>
<ol type="1">
<li><p>Si une intervention était très efficace pour augmenter la variabilité d’un résultat mais ne changeait pas la moyenne, la <span class="math inline">\(p\)</span>-valeur rapportée par R ou Stata en utilisant <code>lm_robust()</code> ou <code>difference_of_means()</code> ou <code>reg</code> ou <code>t.test</code> serait-elle grande ou petite ?</p></li>
<li><p>Si une intervention réduisait modérément la moyenne dans le groupe témoin mais augmentait considérablement quelques résultats (comme un effet 10 fois supérieur), la <span class="math inline">\(p\)</span>-valeur de R <code>lm_robust()</code> ou <code>difference_of_means()</code> serait-elle grande ou petite ?</p></li>
</ol>
</section></section>
<section>
<section id="tester-de-nombreuses-hypothèses" class="title-slide slide level1">
<h1>Tester de nombreuses hypothèses</h1>

</section>
<section id="quand-pouvons-nous-tester-de-nombreuses-hypothèses" class="slide level2">
<h2>Quand pouvons-nous tester de nombreuses hypothèses ?</h2>
<ul>
<li><p>L’effet d’un traitement expérimental diffère-t-il entre les différents groupes ? Les différences de l’effet du traitement pourraient-elles survenir en raison de certaines caractéristiques de base des sujets expérimentaux ?</p></li>
<li><p>Parmi plusieurs stratégies de communication, lesquelles ont été les plus efficaces sur un résultat particulier ?</p></li>
<li><p>Parmi plusieurs résultats, lesquels ont été influencés par une seule intervention expérimentale ?</p></li>
</ul>
</section>
<section id="taux-de-faux-positifs-dans-les-tests-dhypothèses-multiples" class="slide level2 fragile">
<h2 class="fragile">Taux de faux positifs dans les tests d’hypothèses multiples</h2>
<p>Supposons que notre probabilité de faux positifs est de 0,05 pour un seul test. Que se passe-t-il si nous demandons: (1) lequel de ces 10 résultats a une relation statistiquement significative avec les deux bras de traitement ? (2) <em>lequel de ces 10 bras de traitement avait une relation statistiquement significative avec un résultat unique</em> ?</p>
<ul>
<li>La probabilité de faux positifs doit être inférieure ou égale à 0,05 dans un test.</li>
<li>La probabilité de faux positifs doit être inférieure ou égale à <span class="math inline">\(1 - ( ( 1 - 0,05 ) \times (1 - 0,05) ) = 0,0975\)</span> dans 2 tests.</li>
<li>La probabilité d’avoir au moins un faux positif avec <span class="math inline">\(\alpha=0,05\)</span> dans 10 tests devrait être <span class="math inline">\(\le\)</span> <span class="math inline">\(1 - (1-0,05)^{10}=0,40\)</span>.</li>
</ul>
</section>
<section id="découvertes-avec-tests-multiples" class="slide level2">
<h2>Découvertes avec tests multiples</h2>
<p><strong>Nombre d’erreurs commises en testant <span class="math inline">\(m\)</span> hypothèses nulles</strong> <span class="citation" data-cites="benjamini1995">(Table 1 de <a href="#/ref-benjamini1995" role="doc-biblioref">Benjamini and Hochberg 1995</a>)</span>. Les cellules sont le nombre de tests. <span class="math inline">\(R\)</span> est le nombre de “découvertes” et <span class="math inline">\(V\)</span> est le nombre de fausses découvertes, <span class="math inline">\(U\)</span> est le nombre de non-rejets corrects et <span class="math inline">\(S\)</span> est le nombre de rejets corrects.</p>
<table>
<colgroup>
<col style="width: 40%" />
<col style="width: 25%" />
<col style="width: 21%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;"></th>
<th style="text-align: center;">Déclarés Non-Significatifs</th>
<th style="text-align: center;">Déclarés Significatifs</th>
<th style="text-align: center;">Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">hypo. nulle vraie (<span class="math inline">\(H_{true}=0\)</span>)</td>
<td style="text-align: center;"><pre><code>        U</code></pre></td>
<td style="text-align: center;"><pre><code>      V</code></pre></td>
<td style="text-align: center;"><span class="math inline">\(m_0\)</span></td>
</tr>
<tr class="even">
<td style="text-align: right;">hypo. nulle fausse (<span class="math inline">\(H_{true} \ne 0\)</span>)</td>
<td style="text-align: center;"><pre><code>        T</code></pre></td>
<td style="text-align: center;"><pre><code>      S</code></pre></td>
<td style="text-align: center;">m - <span class="math inline">\(m_0\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: right;">Total</td>
<td style="text-align: center;"><pre><code>       m-R</code></pre></td>
<td style="text-align: center;"><pre><code>      R</code></pre></td>
<td style="text-align: center;">m</td>
</tr>
</tbody>
</table>
</section>
<section id="deux-taux-derreur-principaux-à-contrôler-lors-du-test-de-nombreuses-hypothèses" class="slide level2 allowframebreaks">
<h2 class="allowframebreaks">Deux taux d’erreur principaux à contrôler lors du test de nombreuses hypothèses</h2>
<ol type="1">
<li><p><strong>Le taux d’erreur par famille (family wise error rate, FWER)</strong> est de <span class="math inline">\(P(V&gt;0)\)</span> (Probabilité d’un quelconque de faux positif).</p>
<ul>
<li><p>à contrôler si nous prévoyons de prendre une décision sur les résultats de nos multiples tests. Le projet de recherche est essentiellement confirmatoire.</p></li>
<li><p>voir par exemple les projets de l’<a href="https://oes.gsa.gov">OES</a> : les agences fédérales prennent des décisions sur leurs programmes en fonction des résultats détectés (ou non).</p></li>
</ul></li>
<li><p><strong>Le taux de fausse découverte (false discovery rate, FDR)</strong> est de <span class="math inline">\(E(V/R | R&gt;0)\)</span> (proportion moyenne de faux positifs compte tenu de certains rejets).</p>
<ul>
<li><p>à contrôler si nous utilisons <em>cette</em> expérience pour planifier <em>la prochaine</em> expérience. Nous sommes prêts à accepter une probabilité d’erreur plus élevée dans le but de nous donner plus de possibilités de découverte.</p></li>
<li><p>par exemple, on pourrait imaginer une organisation, un gouvernement ou une ONG qui déciderait de mener <em>une série</em> d’expériences dans le cadre d’un <em>programme exploratoire</em> : aucune expérience ne détermine seule la prise de décision, cela offre plus de possibilité pour l’exploration.</p></li>
</ul></li>
</ol>
<p>Nous nous concentrerons sur le FWER mais recommandons de penser au FDR pour les programmes exploratoires.</p>
</section>
<section id="questions-à-résultats-multiples" class="slide level2">
<h2>Questions à résultats multiples</h2>
<ul>
<li><p>Quel est l’effet d’un traitement sur plusieurs résultats ?</p></li>
<li><p>Sur quels résultats le traitement a-t-il eu un effet (parmi l’ensemble des résultats) ?</p></li>
<li><p>La deuxième question, en particulier, peut conduire aux problèmes de taux d’erreur non contrôlés par famille (voir ci-dessus).</p></li>
</ul>
</section>
<section id="tests-dhypothèses-multiples-résultats-multiples" class="slide level2">
<h2>Tests d’hypothèses multiples : résultats multiples</h2>
<p>Imaginez que nous ayons cinq résultats et un traitement (ici les résultats potentiels et observés) :</p>
<pre><code>   ID T Y1_T_0 Y1_T_1 Y2_T_0 Y2_T_1 Y3_T_0 Y3_T_1 Y4_T_0 Y4_T_1 Y5_T_0 Y5_T_1
1 001 0   0.19   0.19  0.366  0.366  0.546  0.546 -0.626 -0.626 -0.125 -0.125
2 002 0  -0.43  -0.43  0.931  0.931 -2.233 -2.233  1.309  1.309  1.078  1.078
3 003 0   0.91   0.91 -1.907 -1.907  0.288  0.288 -0.133 -0.133 -1.261 -1.261
4 004 0   1.79   1.79  0.052  0.052  0.544  0.544 -1.608 -1.608 -0.452 -0.452
5 005 1   1.00   1.00 -0.848 -0.848 -1.192 -1.192 -1.308 -1.308 -1.027 -1.027
6 006 0   1.11   1.11 -0.368 -0.368 -0.018 -0.018 -0.045 -0.045  0.068  0.068</code></pre>
<pre><code>   ID T    Y1     Y2     Y3     Y4     Y5
1 001 0  0.19  0.366  0.546 -0.626 -0.125
2 002 0 -0.43  0.931 -2.233  1.309  1.078
3 003 0  0.91 -1.907  0.288 -0.133 -1.261
4 004 0  1.79  0.052  0.544 -1.608 -0.452
5 005 1  1.00 -0.848 -1.192 -1.308 -1.027
6 006 0  1.11 -0.368 -0.018 -0.045  0.068</code></pre>
</section>
<section id="pouvons-nous-détecter-un-effet-sur-le-résultat-y1" class="slide level2">
<h2>Pouvons-nous détecter un effet sur le résultat <code>Y1</code> ?</h2>
<p>Pouvons-nous détecter un effet sur le résultat <code>Y1</code> ? (c’est-à-dire, le test d’hypothèse produit-il une <span class="math inline">\(p\)</span>-valeur suffisamment petite ?) </p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>coin<span class="sc">::</span><span class="fu">pvalue</span>(<span class="fu">oneway_test</span>(Y1 <span class="sc">~</span> <span class="fu">factor</span>(T), <span class="at">data =</span> dat1))</span></code></pre></div>
<pre><code>[1] 0.88</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Notez que la p-valeur du test t est également un test du chi carré</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>coin<span class="sc">::</span><span class="fu">pvalue</span>(<span class="fu">independence_test</span>(Y1 <span class="sc">~</span> <span class="fu">factor</span>(T),</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> dat1,</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">teststat =</span> <span class="st">&quot;quadratic&quot;</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>))</span></code></pre></div>
<pre><code>[1] 0.88</code></pre>
</section>
<section id="pour-lequel-des-cinq-résultats-pouvons-nous-détecter-un-effet" class="slide level2">
<h2>Pour lequel des cinq résultats pouvons-nous détecter un effet ?</h2>
<p>Pour lequel des cinq résultats pouvons-nous détecter un effet ? (c’est-à-dire, l’un des cinq tests d’hypothèses produit-il une <span class="math inline">\(p\)</span>-valeur suffisamment petite ?)</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> coin<span class="sc">::</span><span class="fu">pvalue</span>(<span class="fu">oneway_test</span>(Y1 <span class="sc">~</span> <span class="fu">factor</span>(T), <span class="at">data =</span> dat1))</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> coin<span class="sc">::</span><span class="fu">pvalue</span>(<span class="fu">oneway_test</span>(Y2 <span class="sc">~</span> <span class="fu">factor</span>(T), <span class="at">data =</span> dat1))</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> coin<span class="sc">::</span><span class="fu">pvalue</span>(<span class="fu">oneway_test</span>(Y3 <span class="sc">~</span> <span class="fu">factor</span>(T), <span class="at">data =</span> dat1))</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>p4 <span class="ot">&lt;-</span> coin<span class="sc">::</span><span class="fu">pvalue</span>(<span class="fu">oneway_test</span>(Y4 <span class="sc">~</span> <span class="fu">factor</span>(T), <span class="at">data =</span> dat1))</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>p5 <span class="ot">&lt;-</span> coin<span class="sc">::</span><span class="fu">pvalue</span>(<span class="fu">oneway_test</span>(Y5 <span class="sc">~</span> <span class="fu">factor</span>(T), <span class="at">data =</span> dat1))</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>theps <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">p1 =</span> p1, <span class="at">p2 =</span> p2, <span class="at">p3 =</span> p3, <span class="at">p4 =</span> p4, <span class="at">p5 =</span> p5)</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(theps)</span></code></pre></div>
<pre><code>  p5   p4   p3   p2   p1 
0.27 0.30 0.43 0.59 0.88 </code></pre>
</section>
<section id="pouvons-nous-détecter-un-effet-pour-un-des-cinq-résultats" class="slide level2">
<h2>Pouvons-nous détecter un effet pour un des cinq résultats ?</h2>
<p>Pouvons-nous détecter un effet pour un des cinq résultats ? (c’est-à-dire, un test d’hypothèse pour tous les résultats ensemble produit-il une <span class="math inline">\(p\)</span>-valeur suffisamment petite ?) </p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>coin<span class="sc">::</span><span class="fu">pvalue</span>(<span class="fu">independence_test</span>(Y1 <span class="sc">+</span> Y2 <span class="sc">+</span> Y3 <span class="sc">+</span> Y4 <span class="sc">+</span> Y5 <span class="sc">~</span> <span class="fu">factor</span>(T),</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> dat1, <span class="at">teststat =</span> <span class="st">&quot;quadratic&quot;</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>))</span></code></pre></div>
<pre><code>[1] 0.67</code></pre>
<p>Quelle approche est susceptible de nous induire en erreur avec trop de résultats “statistiquement significatifs” (5 tests ou 1 test omnibus) ?</p>
</section>
<section id="comparaison-des-approches-i" class="slide level2">
<h2>Comparaison des approches I</h2>
<p>Faisons une simulation pour en savoir plus sur ces approches de test.</p>
<ul>
<li><p>Nous allons (1) définir les véritables effets causaux à 0, (2) réassigner le traitement à plusieurs reprises, et (3) à chaque fois, faire chacun de ces trois tests.</p></li>
<li><p>Puisque le véritable effet est 0, nous nous attendons à ce que <em>la plupart</em> des <span class="math inline">\(p\)</span>-valeurs soient grandes. (En fait, nous ne voulons pas plus de 5% des <span class="math inline">\(p\)</span>-valeurs supérieures à <span class="math inline">\(p=0,05\)</span> si nous utilisons le critère d’acceptance ou de rejet <span class="math inline">\(\alpha=0,05\)</span>).</p></li>
</ul>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>des1_sim <span class="ot">&lt;-</span> <span class="fu">simulate_design</span>(des1_plus, <span class="at">sims =</span> <span class="dv">1000</span>)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>res1 <span class="ot">&lt;-</span> des1_sim <span class="sc">%&gt;%</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(estimator) <span class="sc">%&gt;%</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">fwer =</span> <span class="fu">mean</span>(p.value <span class="sc">&lt;</span> .<span class="dv">05</span>), <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>)</span></code></pre></div>
</section>
<section id="comparaison-des-approches-ii" class="slide level2">
<h2>Comparaison des approches II</h2>
<table>
<caption>Taux d’erreur par famille</caption>
<thead>
<tr class="header">
<th style="text-align: left;">estimator</th>
<th style="text-align: right;">fwer</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">test-t omnibus</td>
<td style="text-align: right;">0.04</td>
</tr>
<tr class="even">
<td style="text-align: left;">test-t pour tous</td>
<td style="text-align: right;">0.22</td>
</tr>
<tr class="odd">
<td style="text-align: left;">test-t pour tous holm adj</td>
<td style="text-align: right;">0.04</td>
</tr>
<tr class="even">
<td style="text-align: left;">test-t pour Y1</td>
<td style="text-align: right;">0.05</td>
</tr>
</tbody>
</table>
<ul>
<li><p>L’approche utilisant 5 tests produit une <span class="math inline">\(p\)</span>-valeur <span class="math inline">\(&lt; 0,05\)</span> beaucoup trop souvent — rappelons qu’il n’y a aucun effet causal pour aucun de ces résultats.</p>
<ul>
<li><p>Un test d’un seul résultat (ici <code>Y1</code>) une <span class="math inline">\(p\)</span>-valeur <span class="math inline">\(&lt; 0,05\)</span> pour moins de 5% des simulations.</p></li>
<li><p>Le test omnibus montre également un taux d’erreur bien maîtrisé.</p></li>
<li><p>L’utilisation d’une correction de tests multiples (ici nous utilisons la correction de Holm) contrôle également correctement le taux de faux positifs.</p></li>
</ul></li>
</ul>
</section>
<section id="la-correction-de-holm" class="slide level2">
<h2>La correction de Holm</h2>
<p>Comment utiliser la correction de Holm (notez ce qui arrive aux <span class="math inline">\(p\)</span>-valeurs):</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>theps</span></code></pre></div>
<pre><code>  p1   p2   p3   p4   p5 
0.88 0.59 0.43 0.30 0.27 </code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">p.adjust</span>(theps, <span class="at">method =</span> <span class="st">&quot;holm&quot;</span>)</span></code></pre></div>
<pre><code>p1 p2 p3 p4 p5 
 1  1  1  1  1 </code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Pour montrer ce qui se passe avec des p-valeurs &quot;significatives&quot;</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>theps_new <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">c</span>(theps, <span class="at">newlowp =</span> .<span class="dv">01</span>))</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="fu">p.adjust</span>(theps_new, <span class="at">method =</span> <span class="st">&quot;holm&quot;</span>)</span></code></pre></div>
<pre><code>newlowp      p5      p4      p3      p2      p1 
   0.06    1.00    1.00    1.00    1.00    1.00 </code></pre>
</section>
<section id="approches-pour-tester-des-hypothèses-avec-plusieurs-bras" class="slide level2 allowframebreaks">
<h2 class="allowframebreaks">Approches pour tester des hypothèses avec plusieurs bras</h2>
<ul>
<li><p>Le même genre de problème peut arriver lorsque la question porte sur l’effet différentiel d’un traitement multi-bras.</p></li>
<li><p>Avec 5 bras, “l’effet du bras 1” pourrait signifier beaucoup de choses différentes : “Est-ce que les résultats potentiels moyens sont plus grands pour le bras 1 par rapport au bras 2 ?” “Les résultats potentiels sont-ils plus grands pour le bras 1 comparé à tous les autres ?”</p></li>
<li><p>Si nous nous concentrons uniquement sur les comparaisons par paires de bras, nous pourrions avoir <span class="math inline">\(((5 \times 5) - 5)/2 = 10\)</span> tests uniques !</p></li>
</ul>
</section>
<section id="tests-dhypothèses-multiples-bras-de-traitement-multiples" class="slide level2 allowframebreaks">
<h2 class="allowframebreaks">Tests d’hypothèses multiples : bras de traitement multiples</h2>
<p>Voici quelques résultats potentiels et observés quand <code>T</code> prend plusieurs valeurs.</p>
<pre><code>   ID T  Y_T_2  Y_T_3  Y_T_4  Y_T_5      Y
1 001 3  0.366  0.546 -0.626 -0.125  0.546
2 002 3  0.931 -2.233  1.309  1.078 -2.233
3 003 4 -1.907  0.288 -0.133 -1.261 -0.133
4 004 5  0.052  0.544 -1.608 -0.452 -0.452
5 005 2 -0.848 -1.192 -1.308 -1.027 -0.848
6 006 3 -0.368 -0.018 -0.045  0.068 -0.018</code></pre>
</section>
<section id="tests-dhypothèses-multiples-bras-de-traitement-multiples-1" class="slide level2 allowframebreaks">
<h2 class="allowframebreaks">Tests d’hypothèses multiples : bras de traitement multiples</h2>
<p>Voici les 10 tests par paire avec et sans ajustement pour les tests multiples. Remarquez comment un résultat “significatif” (<span class="math inline">\(p=0,01\)</span>) change avec l’ajustement.</p>
<pre><code>   Comparison      Stat p.value p.adjust
1   1 - 2 = 0     1.435   0.231   1.0000
2   1 - 3 = 0    0.8931  0.3447   1.0000
3   1 - 4 = 0     6.404 0.01139   0.1139
4   1 - 5 = 0    0.8216  0.3647   1.0000
5   2 - 3 = 0   0.05882  0.8084   1.0000
6   2 - 4 = 0     2.641  0.1041   0.7287
7   2 - 5 = 0    0.0437  0.8344   1.0000
8   3 - 4 = 0     3.232 0.07222   0.6500
9   3 - 5 = 0 0.0003464  0.9852   1.0000
10  4 - 5 = 0     2.899 0.08861   0.7089</code></pre>
</section>
<section id="tests-dhypothèses-multiples-bras-de-traitement-multiples-2" class="slide level2">
<h2>Tests d’hypothèses multiples : bras de traitement multiples</h2>
<p>Nous illustrons quatre approches différentes :</p>
<ol type="1">
<li>faire tous les tests par paire et choisir le meilleur (une mauvaise idée) ;</li>
<li>faire tous les tests par paire et choisir le meilleur après avoir ajusté les p-valeurs pour les tests multiples (une bonne idée mais avec une très faible puissance statistique) ;</li>
<li>tester l’hypothèse d’absence de relation pour <em>chaque bras</em> (un test omnibus) et le résultat (une bonne idée) ;</li>
<li>choisissez un bras sur lequel vous concentrer à l’avance (une bonne idée).</li>
</ol>
<table>
<caption>Approches de test pour les expériences à bras multiples.</caption>
<thead>
<tr class="header">
<th style="text-align: left;">estimator</th>
<th style="text-align: right;">fwer</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Choix du meilleur test de paire</td>
<td style="text-align: right;">0.238</td>
</tr>
<tr class="even">
<td style="text-align: left;">Choix du meilleur test de paire après ajustement</td>
<td style="text-align: right;">0.028</td>
</tr>
<tr class="odd">
<td style="text-align: left;">t-test T1 vs. tous</td>
<td style="text-align: right;">0.018</td>
</tr>
<tr class="even">
<td style="text-align: left;">test d’ensembe</td>
<td style="text-align: right;">0.034</td>
</tr>
</tbody>
</table>
</section>
<section id="résumé" class="slide level2">
<h2>Résumé</h2>
<ul>
<li><p>Utiliser plusieurs résultats ou plusieurs traitements (ou plusieurs modérateurs/interactions) peut causer des problèmes de test.</p></li>
<li><p>La procédure pour faire les tests d’hypothèses et intervalles de confiance peut comporter des erreurs. Normalement on contrôle le taux d’erreur dans un seul test (ou un seul intervalle de confiance). Mais utiliser plusieurs tests nécessite plus d’effort pour s’assurer que le taux d’erreur est sous contrôle.</p></li>
<li><p>La perte de puissance statistique induite par les approches d’ajustement nous incite à réfléchir aux <em>questions que nous voulons poser sur les données</em>. Par exemple, si nous voulons savoir si le traitement a eu <em>un quelconque effet</em>, alors un test conjoint ou un test omnibus de résultats multiples augmentera notre puissance statistique sans nécessiter d’ajustement.</p></li>
</ul>
</section>
<section id="références" class="slide level2 unnumbered allowframebreaks">
<h2 class="unnumbered allowframebreaks">Références</h2>
<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-benjamini1995" class="csl-entry" role="doc-biblioentry">
Benjamini, Yoav, and Yosef Hochberg. 1995. <span>“<span class="nocase">Controlling the false discovery rate: a practical and powerful approach to multiple testing</span>.”</span> <em>Journal of the Royal Statistical Society</em> 57 (1): 289–300. <a href="http://www.jstor.org/stable/2346101">http://www.jstor.org/stable/2346101</a>.
</div>
<div id="ref-bowers2018models" class="csl-entry" role="doc-biblioentry">
Bowers, Jake, Bruce A Desmarais, Mark Frederickson, Nahomi Ichino, Hsuan-Wei Lee, and Simi Wang. 2018. <span>“Models, Methods and Network Topology: Experimental Design for the Study of Interference.”</span> <em>Social Networks</em> 54: 196–208.
</div>
<div id="ref-bowers2013reasoning" class="csl-entry" role="doc-biblioentry">
Bowers, Jake, Mark M Fredrickson, and Costas Panagopoulos. 2013. <span>“<span class="nocase">Reasoning about Interference Between Units: A General Framework</span>.”</span> <em>Political Analysis</em> 21 (1): 97–124.
</div>
<div id="ref-bowers2016research" class="csl-entry" role="doc-biblioentry">
Bowers, Jake, Mark Fredrickson, and Peter M Aronow. 2016. <span>“Research Note: A More Powerful Test Statistic for Reasoning about Interference Between Units.”</span> <em>Political Analysis</em> 24 (3): 395–403.
</div>
<div id="ref-caughey2017nonparametric" class="csl-entry" role="doc-biblioentry">
Caughey, Devin, Allan Dafoe, and Jason Seawright. 2017. <span>“Nonparametric Combination (NPC): A Framework for Testing Elaborate Theories.”</span> <em>The Journal of Politics</em> 79 (2): 688–701.
</div>
<div id="ref-hansen:bowers:2008" class="csl-entry" role="doc-biblioentry">
Hansen, Ben B., and Jake Bowers. 2008. <span>“Covariate Balance in Simple, Stratified and Clustered Comparative Studies.”</span> <em>Statistical Science</em> 23 (2): 219–36.
</div>
<div id="ref-hartman2018equivalence" class="csl-entry" role="doc-biblioentry">
Hartman, Erin, and F Daniel Hidalgo. 2018. <span>“An Equivalence Approach to Balance and Placebo Tests.”</span> <em>American Journal of Political Science</em> 62 (4): 1000–1013.
</div>
<div id="ref-hodges1963elb" class="csl-entry" role="doc-biblioentry">
Hodges, J. L., and E. L. Lehmann. 1963. <span>“<span class="nocase">Estimates of location based on rank tests</span>.”</span> <em>Ann. Math. Statist</em> 34: 598–611.
</div>
<div id="ref-rosenbaum1993hlp" class="csl-entry" role="doc-biblioentry">
Rosenbaum, Paul R. 1993. <span>“Hodges-Lehmann Point Estimates of Treatment Effect in Observational Studies.”</span> <em>Journal of the American Statistical Association</em> 88 (424): 1250–53.
</div>
<div id="ref-rosenbaum2010design" class="csl-entry" role="doc-biblioentry">
———. 2010. <span>“<span class="nocase">Design of observational studies</span>.”</span> <em>Springer Series in Statistics</em>.
</div>
</div>
</section></section>
    </div>
  </div>

  <script src="hypothesistesting-slides_files/reveal.js-3.3.0.1/lib/js/head.min.js"></script>
  <script src="hypothesistesting-slides_files/reveal.js-3.3.0.1/js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        // Display the page number of the current slide
        slideNumber: true,
        // Push each slide change to the browser history
        history: true,
        // Vertical centering of slides
        center: false,
        // Opens links in an iframe preview overlay
        previewLinks: true,
        // Transition style
        transition: 'fade', // none/fade/slide/convex/concave/zoom
        // Transition style for full page slide backgrounds
        backgroundTransition: 'default', // none/fade/slide/convex/concave/zoom



        chalkboard: {
          toggleNotesButton: false,
          theme: 'whiteboard',
        },

        keyboard: {
          67: function() { RevealChalkboard.toggleNotesCanvas() },    // toggle notes canvas when 'c' is pressed
          66: function() { RevealChalkboard.toggleChalkboard() }, // toggle chalkboard when 'b' is pressed
          46: function() { RevealChalkboard.clear() },    // clear chalkboard when 'DEL' is pressed
           8: function() { RevealChalkboard.reset() },    // reset chalkboard data on current slide when 'BACKSPACE' is pressed
          68: function() { RevealChalkboard.download() }, // downlad recorded chalkboard drawing when 'd' is pressed
        },

        // Optional reveal.js plugins
        dependencies: [
          { src: 'hypothesistesting-slides_files/reveal.js-3.3.0.1/plugin/notes/notes.js', async: true },
          { src: 'hypothesistesting-slides_files/reveal.js-3.3.0.1/plugin/search/search.js', async: true },
          { src: 'hypothesistesting-slides_files/reveal.js-3.3.0.1/plugin/chalkboard/chalkboard.js', async: true },
        ]
      });
    </script>
  <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>

<script>
  (function() {
    if (window.jQuery) {
      Reveal.addEventListener( 'slidechanged', function(event) {  
        window.jQuery(event.previousSlide).trigger('hidden');
        window.jQuery(event.currentSlide).trigger('shown');
      });
    }
  })();
</script>


  </body>
</html>
