<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Fill In Your Name" />
  <meta name="dcterms.date" content="2021-02-20" />
  <title>Randomization</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="randomization-slides_files/reveal.js-3.3.0.1/css/reveal.css"/>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="randomization-slides_files/reveal.js-3.3.0.1/css/theme/simple.css" id="theme">


  <!-- some tweaks to reveal css -->
  <style type="text/css">
    .reveal h1 { font-size: 2.0em; }
    .reveal h2 { font-size: 1.5em;  }
    .reveal h3 { font-size: 1.25em;	}
    .reveal h4 { font-size: 1em;	}

    .reveal .slides>section,
    .reveal .slides>section>section {
      padding: 0px 0px;
    }



    .reveal table {
      border-width: 1px;
      border-spacing: 2px;
      border-style: dotted;
      border-color: gray;
      border-collapse: collapse;
      font-size: 0.7em;
    }

    .reveal table th {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      font-weight: bold;
      border-style: dotted;
      border-color: gray;
    }

    .reveal table td {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      border-style: dotted;
      border-color: gray;
    }


  </style>

    <style type="text/css">code{white-space: pre;}</style>


<!-- Printing and PDF exports -->
<script id="paper-css" type="application/dynamic-css">

/* Default Print Stylesheet Template
   by Rob Glazebrook of CSSnewbie.com
   Last Updated: June 4, 2008

   Feel free (nay, compelled) to edit, append, and
   manipulate this file as you see fit. */


@media print {

	/* SECTION 1: Set default width, margin, float, and
	   background. This prevents elements from extending
	   beyond the edge of the printed page, and prevents
	   unnecessary background images from printing */
	html {
		background: #fff;
		width: auto;
		height: auto;
		overflow: visible;
	}
	body {
		background: #fff;
		font-size: 20pt;
		width: auto;
		height: auto;
		border: 0;
		margin: 0 5%;
		padding: 0;
		overflow: visible;
		float: none !important;
	}

	/* SECTION 2: Remove any elements not needed in print.
	   This would include navigation, ads, sidebars, etc. */
	.nestedarrow,
	.controls,
	.fork-reveal,
	.share-reveal,
	.state-background,
	.reveal .progress,
	.reveal .backgrounds {
		display: none !important;
	}

	/* SECTION 3: Set body font face, size, and color.
	   Consider using a serif font for readability. */
	body, p, td, li, div {
		font-size: 20pt!important;
		font-family: Georgia, "Times New Roman", Times, serif !important;
		color: #000;
	}

	/* SECTION 4: Set heading font face, sizes, and color.
	   Differentiate your headings from your body text.
	   Perhaps use a large sans-serif for distinction. */
	h1,h2,h3,h4,h5,h6 {
		color: #000!important;
		height: auto;
		line-height: normal;
		font-family: Georgia, "Times New Roman", Times, serif !important;
		text-shadow: 0 0 0 #000 !important;
		text-align: left;
		letter-spacing: normal;
	}
	/* Need to reduce the size of the fonts for printing */
	h1 { font-size: 28pt !important;  }
	h2 { font-size: 24pt !important; }
	h3 { font-size: 22pt !important; }
	h4 { font-size: 22pt !important; font-variant: small-caps; }
	h5 { font-size: 21pt !important; }
	h6 { font-size: 20pt !important; font-style: italic; }

	/* SECTION 5: Make hyperlinks more usable.
	   Ensure links are underlined, and consider appending
	   the URL to the end of the link for usability. */
	a:link,
	a:visited {
		color: #000 !important;
		font-weight: bold;
		text-decoration: underline;
	}
	/*
	.reveal a:link:after,
	.reveal a:visited:after {
		content: " (" attr(href) ") ";
		color: #222 !important;
		font-size: 90%;
	}
	*/


	/* SECTION 6: more reveal.js specific additions by @skypanther */
	ul, ol, div, p {
		visibility: visible;
		position: static;
		width: auto;
		height: auto;
		display: block;
		overflow: visible;
		margin: 0;
		text-align: left !important;
	}
	.reveal pre,
	.reveal table {
		margin-left: 0;
		margin-right: 0;
	}
	.reveal pre code {
		padding: 20px;
		border: 1px solid #ddd;
	}
	.reveal blockquote {
		margin: 20px 0;
	}
	.reveal .slides {
		position: static !important;
		width: auto !important;
		height: auto !important;

		left: 0 !important;
		top: 0 !important;
		margin-left: 0 !important;
		margin-top: 0 !important;
		padding: 0 !important;
		zoom: 1 !important;

		overflow: visible !important;
		display: block !important;

		text-align: left !important;
		-webkit-perspective: none;
		   -moz-perspective: none;
		    -ms-perspective: none;
		        perspective: none;

		-webkit-perspective-origin: 50% 50%;
		   -moz-perspective-origin: 50% 50%;
		    -ms-perspective-origin: 50% 50%;
		        perspective-origin: 50% 50%;
	}
	.reveal .slides section {
		visibility: visible !important;
		position: static !important;
		width: auto !important;
		height: auto !important;
		display: block !important;
		overflow: visible !important;

		left: 0 !important;
		top: 0 !important;
		margin-left: 0 !important;
		margin-top: 0 !important;
		padding: 60px 20px !important;
		z-index: auto !important;

		opacity: 1 !important;

		page-break-after: always !important;

		-webkit-transform-style: flat !important;
		   -moz-transform-style: flat !important;
		    -ms-transform-style: flat !important;
		        transform-style: flat !important;

		-webkit-transform: none !important;
		   -moz-transform: none !important;
		    -ms-transform: none !important;
		        transform: none !important;

		-webkit-transition: none !important;
		   -moz-transition: none !important;
		    -ms-transition: none !important;
		        transition: none !important;
	}
	.reveal .slides section.stack {
		padding: 0 !important;
	}
	.reveal section:last-of-type {
		page-break-after: avoid !important;
	}
	.reveal section .fragment {
		opacity: 1 !important;
		visibility: visible !important;

		-webkit-transform: none !important;
		   -moz-transform: none !important;
		    -ms-transform: none !important;
		        transform: none !important;
	}
	.reveal section img {
		display: block;
		margin: 15px 0px;
		background: rgba(255,255,255,1);
		border: 1px solid #666;
		box-shadow: none;
	}

	.reveal section small {
		font-size: 0.8em;
	}

}  
</script>


<script id="pdf-css" type="application/dynamic-css">
    
/**
 * This stylesheet is used to print reveal.js
 * presentations to PDF.
 *
 * https://github.com/hakimel/reveal.js#pdf-export
 */

* {
	-webkit-print-color-adjust: exact;
}

body {
	margin: 0 auto !important;
	border: 0;
	padding: 0;
	float: none !important;
	overflow: visible;
}

html {
	width: 100%;
	height: 100%;
	overflow: visible;
}

/* Remove any elements not needed in print. */
.nestedarrow,
.reveal .controls,
.reveal .progress,
.reveal .playback,
.reveal.overview,
.fork-reveal,
.share-reveal,
.state-background {
	display: none !important;
}

h1, h2, h3, h4, h5, h6 {
	text-shadow: 0 0 0 #000 !important;
}

.reveal pre code {
	overflow: hidden !important;
	font-family: Courier, 'Courier New', monospace !important;
}

ul, ol, div, p {
	visibility: visible;
	position: static;
	width: auto;
	height: auto;
	display: block;
	overflow: visible;
	margin: auto;
}
.reveal {
	width: auto !important;
	height: auto !important;
	overflow: hidden !important;
}
.reveal .slides {
	position: static;
	width: 100%;
	height: auto;

	left: auto;
	top: auto;
	margin: 0 !important;
	padding: 0 !important;

	overflow: visible;
	display: block;

	-webkit-perspective: none;
	   -moz-perspective: none;
	    -ms-perspective: none;
	        perspective: none;

	-webkit-perspective-origin: 50% 50%; /* there isn't a none/auto value but 50-50 is the default */
	   -moz-perspective-origin: 50% 50%;
	    -ms-perspective-origin: 50% 50%;
	        perspective-origin: 50% 50%;
}

.reveal .slides section {
	page-break-after: always !important;

	visibility: visible !important;
	position: relative !important;
	display: block !important;
	position: relative !important;

	margin: 0 !important;
	padding: 0 !important;
	box-sizing: border-box !important;
	min-height: 1px;

	opacity: 1 !important;

	-webkit-transform-style: flat !important;
	   -moz-transform-style: flat !important;
	    -ms-transform-style: flat !important;
	        transform-style: flat !important;

	-webkit-transform: none !important;
	   -moz-transform: none !important;
	    -ms-transform: none !important;
	        transform: none !important;
}

.reveal section.stack {
	margin: 0 !important;
	padding: 0 !important;
	page-break-after: avoid !important;
	height: auto !important;
	min-height: auto !important;
}

.reveal img {
	box-shadow: none;
}

.reveal .roll {
	overflow: visible;
	line-height: 1em;
}

/* Slide backgrounds are placed inside of their slide when exporting to PDF */
.reveal section .slide-background {
	display: block !important;
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	z-index: -1;
}

/* All elements should be above the slide-background */
.reveal section>* {
	position: relative;
	z-index: 1;
}

/* Display slide speaker notes when 'showNotes' is enabled */
.reveal .speaker-notes-pdf {
	display: block;
	width: 100%;
	max-height: none;
	left: auto;
	top: auto;
	z-index: 100;
}

/* Display slide numbers when 'slideNumber' is enabled */
.reveal .slide-number-pdf {
	display: block;
	position: absolute;
	font-size: 14px;
}

</script>


<script>
var style = document.createElement( 'style' );
style.type = 'text/css';
var style_script_id = window.location.search.match( /print-pdf/gi ) ? 'pdf-css' : 'paper-css';
var style_script = document.getElementById(style_script_id).text;
style.innerHTML = style_script;
document.getElementsByTagName('head')[0].appendChild(style);
</script>

    <script src="randomization-slides_files/header-attrs-2.6/header-attrs.js"></script>
    <link href="randomization-slides_files/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
    <link href="randomization-slides_files/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section>
    <h1 class="title">Randomization</h1>
    <h2 class="author">Fill In Your Name</h2>
    <h3 class="date">20 February 2021</h3>
</section>
<section id="TOC">
<ul>
<li><a href="#/randomization">Randomization</a>
<ul>
<li><a href="#/randomization-of-treatment-assignment">Randomization of treatment assignment</a></li>
<li><a href="#/random-assignment-neq-random-sampling">Random assignment <span class="math inline">\(\neq\)</span> random sampling</a></li>
<li><a href="#/random-assignment-neq-random-sampling-1">Random assignment <span class="math inline">\(\neq\)</span> random sampling</a></li>
<li><a href="#/randomization-is-closely-linked-to-your-research-design">Randomization is closely linked to your research design</a></li>
<li><a href="#/level-of-treatments-and-outcomes">Level of treatments and outcomes</a></li>
</ul></li>
<li><a href="#/some-common-types-of-randomization">Some common types of randomization</a>
<ul>
<li><a href="#/simple-randomization-coin-flipping">Simple randomization (coin-flipping)</a></li>
<li><a href="#/example-code-for-simple-randomization-i">Example code for simple randomization I</a></li>
<li><a href="#/example-code-for-simple-randomization-ii">Example code for simple randomization II</a></li>
<li><a href="#/complete-ramdomization-drawing-from-an-urn">Complete ramdomization (drawing from an urn)</a></li>
<li><a href="#/example-code-for-complete-randomization-i">Example code for complete randomization I</a></li>
<li><a href="#/example-code-for-complete-randomization-ii">Example code for complete randomization II</a></li>
<li><a href="#/block-or-stratified-randomization-i">Block (or stratified) randomization I</a></li>
<li><a href="#/block-or-stratified-randomization-ii">Block (or stratified) randomization II</a></li>
<li><a href="#/cluster-randomization-i">Cluster randomization I</a></li>
<li><a href="#/cluster-randomization-ii">Cluster randomization II</a></li>
<li><a href="#/you-can-combine-blocks-and-clusters">You can combine blocks and clusters</a></li>
</ul></li>
<li><a href="#/best-practices">Best practices</a>
<ul>
<li><a href="#/best-practices-replicability">Best practices: replicability</a></li>
<li><a href="#/best-practices-balance">Best practices: balance</a></li>
<li><a href="#/best-practices-balance-1">Best practices: balance</a></li>
</ul></li>
<li><a href="#/some-experimental-designs">Some experimental designs</a>
<ul>
<li><a href="#/access">Access</a></li>
<li><a href="#/delayed-access-phase-in-or-wait-list">Delayed access (Phase-in or wait list)</a></li>
<li><a href="#/factorial-or-crossed-assignment">Factorial or crossed-assignment</a></li>
<li><a href="#/encouragement">Encouragement</a></li>
</ul></li>
<li><a href="#/some-limits">Some limits</a>
<ul>
<li><a href="#/limits-to-randomized-studies">Limits to randomized studies</a></li>
<li><a href="#/references">References</a></li>
</ul></li>
</ul>
</section>

<section>
<section id="randomization" class="title-slide slide level1">
<h1>Randomization</h1>

</section>
<section id="randomization-of-treatment-assignment" class="slide level2">
<h2>Randomization of treatment assignment</h2>
<p>Start with a group units who you can directly observe: like the people who showed up to a lab, villages in a region, respondents willing to take a survey.</p>
<ul>
<li><p>Every observation has a known probability of treatment assignment between 0 and 1.</p>
<ul>
<li>No unit in the experimental sample is assigned to treatment or to control with certainty.</li>
</ul></li>
<li><p>Units can vary in their probability of treatment assignment.</p>
<ul>
<li><p>For example, the probability might vary by group: women might have a 75% probability of being assigned to treatment.</p></li>
<li><p>Assignment probabilities can even vary across units <strong>as long as you know the probability for each and every unit</strong>, though that would complicate your analysis.</p></li>
</ul></li>
</ul>
</section>
<section id="random-assignment-neq-random-sampling" class="slide level2">
<h2>Random assignment <span class="math inline">\(\neq\)</span> random sampling</h2>
<ul>
<li><p>Random sampling (from population): selecting subjects into your sample from a population with known probability. You cannot directly observe the whole population so you draw a sample.</p></li>
<li><p>Randomization (of treatment): assigning subjects from an existing group of subjects with known probability to experimental conditions.</p>
<ul>
<li>You need to be able to see outcomes and assign treatment for every subject in the group</li>
<li>This random assignment of treatment can be combined with any kind of sample (random sample, convenience sample, etc.) or even with the whole population (all the hospitals, all the judges).</li>
</ul></li>
</ul>
</section>
<section id="random-assignment-neq-random-sampling-1" class="slide level2">
<h2>Random assignment <span class="math inline">\(\neq\)</span> random sampling</h2>
<ul>
<li><p>How you recruit your initial group (or experimental pool) matters:</p>
<ul>
<li><p>a big initial group means a big experiment and more statistical power to detect small effects.</p></li>
<li><p>an initial group which is a random sample from a known population helps you make the argument that your effects might be the same or similar if you did this experiment with another sample from that population.</p></li>
<li><p>an experimental pool that is a random sample might also help with the argument that the effect should be similar if you scaled up the intervention to the whole population — depending on the factors driving a global equilibrium.</p></li>
</ul></li>
</ul>
</section>
<section id="randomization-is-closely-linked-to-your-research-design" class="slide level2">
<h2>Randomization is closely linked to your research design</h2>
<ul>
<li><p>See module on <a href="/research-design.html">Research Design</a></p></li>
<li><p>Remember that you need to define and justify your control condition:</p>
<ul>
<li>this may be no intervention</li>
<li>or a placebo</li>
</ul></li>
</ul>
</section>
<section id="level-of-treatments-and-outcomes" class="slide level2">
<h2>Level of treatments and outcomes</h2>
<ul>
<li><p>Treatment can be assigned at different levels: individuals, groups, institutions, communities, time periods, or many different levels.</p></li>
<li><p>You may be constrained in what level you can <em>assign</em> treatment and <em>measure</em> outcomes.</p>
<ul>
<li><p>Example: Treatment at the classroom level, but outcomes at the student level.</p></li>
<li><p>Example: Treatment at the district level, but outcomes at the community level.</p></li>
</ul></li>
<li><p>The level at which treatment is assigned and at which outcomes are measured affect what your study can demonstrate.</p></li>
</ul>
</section></section>
<section>
<section id="some-common-types-of-randomization" class="title-slide slide level1">
<h1>Some common types of randomization</h1>

</section>
<section id="simple-randomization-coin-flipping" class="slide level2">
<h2>Simple randomization (coin-flipping)</h2>
<ul>
<li><p>For each unit, flip a coin to see if it will be treated. Then you measure outcomes at the same level as the coin.</p></li>
<li><p>The coins don’t have to be fair (50-50), but you have to know the probability of treatment assignment.</p></li>
<li><p>You can’t guarantee a specific number of treated units and control units.</p></li>
<li><p>Example: If you have 6 units and you flip a fair coin for each, you have about a 3% chance of assigning <strong>all</strong> units to treatment or assigning <strong>all</strong> units to control.</p></li>
</ul>
</section>
<section id="example-code-for-simple-randomization-i" class="slide level2">
<h2>Example code for simple randomization I</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set the random number seed to make this replicable</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12345</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># set a sample size</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>N <span class="ot">&lt;-</span> <span class="dv">200</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate the simple random assignment</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># (Notice that in an experiment we have a single</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># trial and thus size=1)</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Our object with N people total is called simple.ra</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>simple.ra <span class="ot">&lt;-</span> <span class="fu">rbinom</span>(<span class="at">n =</span> N, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">prob =</span> .<span class="dv">5</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co"># 112 people ended up in the treatment group</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(simple.ra)</span></code></pre></div>
<pre><code>[1] 112</code></pre>
</section>
<section id="example-code-for-simple-randomization-ii" class="slide level2">
<h2>Example code for simple randomization II</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># you can also use the randomizr package</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(randomizr)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># for replicability</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">23456</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple random assignment uses the simple_ra function</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Our object with N people total is called treatment</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>treatment <span class="ot">&lt;-</span> <span class="fu">simple_ra</span>(</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">N =</span> N, <span class="co"># total sample size</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">prob =</span> .<span class="dv">5</span> <span class="co"># probability of receiving treatment</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(treatment)</span></code></pre></div>
<pre><code>[1] 96</code></pre>
</section>
<section id="complete-ramdomization-drawing-from-an-urn" class="slide level2">
<h2>Complete ramdomization (drawing from an urn)</h2>
<ul>
<li><p>A fixed number <span class="math inline">\(m\)</span> out of <span class="math inline">\(N\)</span> units are assigned to treatment.</p></li>
<li><p>The probability a unit is assigned to treatment is <span class="math inline">\(m/N\)</span>.</p></li>
<li><p>This is like having an urn or bowl with <span class="math inline">\(N\)</span> balls, of which <span class="math inline">\(m\)</span> are marked as treatment and <span class="math inline">\(N-m\)</span> are marked as control. Public lotteries use this method.</p></li>
</ul>
</section>
<section id="example-code-for-complete-randomization-i" class="slide level2">
<h2>Example code for complete randomization I</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set sample size N</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>N <span class="ot">&lt;-</span> <span class="dv">200</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># set number of treated units m</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="dv">100</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co"># create a vector of m 1&#39;s and N-m 0&#39;s</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>complete.ra <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">1</span>, m), <span class="fu">rep</span>(<span class="dv">0</span>, N <span class="sc">-</span> m))</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co"># And then scramble it randomly using sample()</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co"># The default is sampling without replacement</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12345</span>) <span class="co"># for replicability</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>complete.ra <span class="ot">&lt;-</span> <span class="fu">sample</span>(complete.ra)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(complete.ra)</span></code></pre></div>
<pre><code>[1] 100</code></pre>
</section>
<section id="example-code-for-complete-randomization-ii" class="slide level2">
<h2>Example code for complete randomization II</h2>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># you can also use the randomizr package</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(randomizr)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># for replicability</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">23456</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Complete random assignment:</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>treatment <span class="ot">&lt;-</span> <span class="fu">complete_ra</span>(</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">N =</span> <span class="dv">200</span>, <span class="co"># total sample size</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">m =</span> <span class="dv">100</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>) <span class="co"># number to assign to treatment</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(treatment)</span></code></pre></div>
<pre><code>[1] 100</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># note what happens if you don&#39;t specify m!</span></span></code></pre></div>
</section>
<section id="block-or-stratified-randomization-i" class="slide level2">
<h2>Block (or stratified) randomization I</h2>
<ul>
<li><p>We create blocks of units and randomize separately within each block. We are doing mini-experiments in each block.</p>
<ul>
<li>Example: block = district, units = communities. We randomize treatment at the community level <strong>within district</strong> and also measure outcomes at the community level.</li>
</ul></li>
<li><p>Blocks that represent a substantively meaningful subgroup can help you to learn about how effects might differ by subgroup.</p>
<ul>
<li><p>By controlling number of subjects per subgroup, you ensure that you have enough subjects in each group.</p></li>
<li><p>Especially useful when you have a rare group — by chance you might get very few of them in treatment or control even under random assignment (or you might have some imbalance).</p></li>
</ul></li>
</ul>
</section>
<section id="block-or-stratified-randomization-ii" class="slide level2">
<h2>Block (or stratified) randomization II</h2>
<ul>
<li>Blocks that are homogeneous on a given outcome increase precision of estimation for that outcome as compared with the experiment without blocks. (We will address this more in the power analysis section).</li>
</ul>
</section>
<section id="cluster-randomization-i" class="slide level2">
<h2>Cluster randomization I</h2>
<ul>
<li><p>A cluster is a <strong>group of units</strong>. In a cluster-randomized study, all units in the cluster are assigned to the same treatment status.</p></li>
<li><p>Use cluster randomization if the intervention has to work at the cluster level.</p>
<ul>
<li>For example, if the intervention is about school playgrounds, then the school is the unit of assignment even if student health may be an outcome measured at level of individual students.</li>
</ul></li>
<li><p>Having fewer clusters hurts your ability to detect treatment effects and make cause misleading <span class="math inline">\(p\)</span>-values and confidence intervals (or even estimates). <em>How much</em> depends on the intra-cluster correlation (ICC or <span class="math inline">\(\rho\)</span>).</p></li>
</ul>
</section>
<section id="cluster-randomization-ii" class="slide level2">
<h2>Cluster randomization II</h2>
<ul>
<li><p>Higher <span class="math inline">\(\rho\)</span> is worse:</p>
<ul>
<li>When <span class="math inline">\(\rho=0\)</span> then the village doesn’t matter for the behavior of the individuals.</li>
<li>When <span class="math inline">\(\rho=1\)</span> then every person in the village would give exactly the same answer. Having another person from this village doesn’t give you additional information since his outcome is identical to the person you already had.</li>
</ul></li>
<li><p>For the same number of units, having <strong>more clusters</strong> with fewer units per cluster can help.</p></li>
<li><p>Trade off spillover and power.</p></li>
<li><p>If you would not like an experiment with 10 units, then you should not be happy with an experiment with 10 clusters of 100 units. The effective sample size of this cluster randomized experiment is between 10 and 10 <span class="math inline">\(\times\)</span> 100 = 1000, but closer to 10 the higher the <span class="math inline">\(\rho\)</span>.</p></li>
</ul>
</section>
<section id="you-can-combine-blocks-and-clusters" class="slide level2">
<h2>You can combine blocks and clusters</h2>
<ul>
<li><p>You can have clusters within blocks.</p>
<ul>
<li><p>Example: block = district, cluster = communities, units = individuals. You are measuring outcomes at the individual level.</p></li>
<li><p>Example: block = province, cluster = district, units = communities. You are measuring outcomes at the community level.</p></li>
</ul></li>
<li><p>You can’t have blocks within clusters.</p></li>
<li><p>For block and cluster randomization, you can use <code>block_ra</code> and <code>cluster_ra</code> in the <code>randomizr</code> package in R.</p></li>
<li><p>For more complicated designs, you might find <code>DeclareDesign</code> helpful. (<a href="https://declaredesign.org" class="uri">https://declaredesign.org</a>)</p></li>
</ul>
</section></section>
<section>
<section id="best-practices" class="title-slide slide level1">
<h1>Best practices</h1>

</section>
<section id="best-practices-replicability" class="slide level2">
<h2>Best practices: replicability</h2>
<ul>
<li><p>EGAP Methods Guide on Randomization (<a href="https://egap.org/resource/10-things-to-know-about-randomization/" class="uri">https://egap.org/resource/10-things-to-know-about-randomization/</a>)</p></li>
<li><p>Set a seed and save your code and random assignment column</p></li>
<li><p>Verify</p></li>
<li><p>Sometimes increased transparency &gt; replicability</p></li>
</ul>
</section>
<section id="best-practices-balance" class="slide level2">
<h2>Best practices: balance</h2>
<ul>
<li>Check overall balance with a D-square test using <code>xBalance</code> in the <code>RItools</code> package (<span class="citation" data-cites="hansen:bowers:2008"><a href="#/ref-hansen:bowers:2008" role="doc-biblioref">Hansen and Bowers</a> (<a href="#/ref-hansen:bowers:2008" role="doc-biblioref">2008</a>)</span>) (large sample randomization inference):</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">xBalance</span>(treatment <span class="sc">~</span> x1 <span class="sc">+</span> x2, <span class="at">data =</span> dat, <span class="at">report =</span> <span class="st">&quot;chisquare&quot;</span>)</span></code></pre></div>
<ul>
<li><p>See also the <code>coin</code> package <code>independence_test</code> for permutation based version</p></li>
<li><p>Use an F-test for a regression of treatment assignment on LHS and covariates on RHS (large sample approximate to randomization inference):</p></li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(<span class="fu">lm</span>(treatment <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> dat),</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lm</span>(treatment <span class="sc">~</span> x1 <span class="sc">+</span> x2 <span class="sc">+</span> x3, <span class="at">data =</span> dat),</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">test =</span> <span class="st">&quot;F&quot;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</section>
<section id="best-practices-balance-1" class="slide level2">
<h2>Best practices: balance</h2>
<ul>
<li><p>Random assignment gives us, in expectation, <strong>overall balance</strong> on the many covariates. It does not guarantee that all covariate to treatment relationships will be zero. In fact, in a small experiment, the magnitudes of imbalance may be high even if the randomization occurred perfectly.</p></li>
<li><p>You will see t-tests of covariates one by one. Just by chance, you might get statistically significant differences on a variable. If you check balance on 100 variables, you will reject the null of no relationship in 5 of them even if there truly is no relationship.</p></li>
</ul>
</section></section>
<section>
<section id="some-experimental-designs" class="title-slide slide level1">
<h1>Some experimental designs</h1>

</section>
<section id="access" class="slide level2">
<h2>Access</h2>
<ul>
<li><p>Randomly select a treatment group through a lottery or equivalent mechanism, which randomizes <strong>access</strong> to the program.</p></li>
<li><p>Useful when you do not have enough resources to treat everyone.</p></li>
<li><p>Sometimes, some units (peoples, communities) must have access to a program.</p>
<ul>
<li>For example: a partner organization doesn’t want to risk a vulnerable community NOT getting a program (want a guarantee that they will be always be treated).</li>
<li>You can exclude those units from the experiment, and do random assignment among the remaining units that have a probability of assignment strictly between (and not including) 0 and 1.</li>
</ul></li>
</ul>
</section>
<section id="delayed-access-phase-in-or-wait-list" class="slide level2">
<h2>Delayed access (Phase-in or wait list)</h2>
<ul>
<li><p>Randomize <em>timing</em> of access to the program.</p></li>
<li><p>Often you do not have the capacity to implement the treatment in a lot of places at once.</p></li>
<li><p>When an intervention can be or must be rolled out in stages, you can randomize the order in which units are treated.</p></li>
<li><p>Your control group are the as-yet untreated units.</p></li>
<li><p>Be careful: the probability of assignment to treatment will vary over time because units that are assigned to treatment in earlier stages are not eligible to be assigned to treatment in later stages.</p></li>
</ul>
</section>
<section id="factorial-or-crossed-assignment" class="slide level2">
<h2>Factorial or crossed-assignment</h2>
<ul>
<li><p>Factorial design enables testing of more than one treatment.</p></li>
<li><p>You can analyze one treatment at a time.</p></li>
<li><p>Or combinations thereof.</p></li>
<li><p>Example:</p></li>
</ul>
<p>We might focus on an estimand like <span class="math inline">\(\mathbb{E}[Y(X_1=1, X_2=1)]-\mathbb{E}[Y(X_1=0, X_2=0)]\)</span>.</p>
</section>
<section id="encouragement" class="slide level2">
<h2>Encouragement</h2>
<ul>
<li><p>Randomize <strong>encouragement</strong> to take the treatment, such as an invitation or subsidy to participate in a program.</p></li>
<li><p>Useful when you cannot force a subject to participate.</p></li>
<li><p>Estimands:</p>
<ul>
<li><p>the ATE of the encouragement for your experimental sample.</p></li>
<li><p>the ATE of participation (not the encouragement) for the units who would participate when encouraged and wouldn’t participate when not encouraged (compliers).</p></li>
</ul></li>
<li><p>Instrumental variables analysis for the complier ATE, with the assignment as the instrument. Note the exclusion restriction.</p></li>
</ul>
</section></section>
<section>
<section id="some-limits" class="title-slide slide level1">
<h1>Some limits</h1>

</section>
<section id="limits-to-randomized-studies" class="slide level2">
<h2>Limits to randomized studies</h2>
<ul>
<li><p>Ethics — is this sort of manipulation ethical? Sometimes not.</p></li>
<li><p>Must be done in real time, ahead of the intervention roll-out.</p></li>
<li><p>Reduced flexibility for a partner organization (problem for any prospective evaluation).</p></li>
<li><p>Limits to the size of the experimental pool.</p></li>
<li><p>Cost.</p></li>
<li><p>The power constraint — you need a lot of units (problem for many statistical approaches).</p></li>
<li><p>Violations of the key assumptions (spillovers; violation of the second key assumption for <a href="causalinference.html">Causal Inference</a>).</p></li>
<li><p>External validity (problem for any evaluation and social science in general).</p></li>
</ul>
</section>
<section id="references" class="slide level2 unnumbered">
<h2 class="unnumbered">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-hansen:bowers:2008" class="csl-entry" role="doc-biblioentry">
Hansen, Ben B., and Jake Bowers. 2008. <span>“Covariate Balance in Simple, Stratified and Clustered Comparative Studies.”</span> <em>Statistical Science</em> 23 (2): 219–36.
</div>
</div>
</section></section>
    </div>
  </div>

  <script src="randomization-slides_files/reveal.js-3.3.0.1/lib/js/head.min.js"></script>
  <script src="randomization-slides_files/reveal.js-3.3.0.1/js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        // Display the page number of the current slide
        slideNumber: true,
        // Push each slide change to the browser history
        history: true,
        // Vertical centering of slides
        center: false,
        // Opens links in an iframe preview overlay
        previewLinks: true,
        // Transition style
        transition: 'fade', // none/fade/slide/convex/concave/zoom
        // Transition style for full page slide backgrounds
        backgroundTransition: 'default', // none/fade/slide/convex/concave/zoom



        chalkboard: {
          toggleNotesButton: false,
          theme: 'whiteboard',
        },

        keyboard: {
          67: function() { RevealChalkboard.toggleNotesCanvas() },    // toggle notes canvas when 'c' is pressed
          66: function() { RevealChalkboard.toggleChalkboard() }, // toggle chalkboard when 'b' is pressed
          46: function() { RevealChalkboard.clear() },    // clear chalkboard when 'DEL' is pressed
           8: function() { RevealChalkboard.reset() },    // reset chalkboard data on current slide when 'BACKSPACE' is pressed
          68: function() { RevealChalkboard.download() }, // downlad recorded chalkboard drawing when 'd' is pressed
        },

        // Optional reveal.js plugins
        dependencies: [
          { src: 'randomization-slides_files/reveal.js-3.3.0.1/plugin/notes/notes.js', async: true },
          { src: 'randomization-slides_files/reveal.js-3.3.0.1/plugin/search/search.js', async: true },
          { src: 'randomization-slides_files/reveal.js-3.3.0.1/plugin/chalkboard/chalkboard.js', async: true },
        ]
      });
    </script>
  <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>

<script>
  (function() {
    if (window.jQuery) {
      Reveal.addEventListener( 'slidechanged', function(event) {  
        window.jQuery(event.previousSlide).trigger('hidden');
        window.jQuery(event.currentSlide).trigger('shown');
      });
    }
  })();
</script>


  </body>
</html>
