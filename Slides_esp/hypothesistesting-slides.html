<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Fill In Your Name" />
  <meta name="dcterms.date" content="2022-03-02" />
  <title>Pruebas de hipótesis: Resumiendo información acerca de los efectos causales</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="hypothesistesting-slides_files/reveal.js-3.3.0.1/css/reveal.css"/>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="hypothesistesting-slides_files/reveal.js-3.3.0.1/css/theme/simple.css" id="theme">


  <!-- some tweaks to reveal css -->
  <style type="text/css">
    .reveal h1 { font-size: 2.0em; }
    .reveal h2 { font-size: 1.5em;  }
    .reveal h3 { font-size: 1.25em;	}
    .reveal h4 { font-size: 1em;	}

    .reveal .slides>section,
    .reveal .slides>section>section {
      padding: 0px 0px;
    }



    .reveal table {
      border-width: 1px;
      border-spacing: 2px;
      border-style: dotted;
      border-color: gray;
      border-collapse: collapse;
      font-size: 0.7em;
    }

    .reveal table th {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      font-weight: bold;
      border-style: dotted;
      border-color: gray;
    }

    .reveal table td {
      border-width: 1px;
      padding-left: 10px;
      padding-right: 25px;
      border-style: dotted;
      border-color: gray;
    }


  </style>

    <style type="text/css">code{white-space: pre;}</style>


<!-- Printing and PDF exports -->
<script id="paper-css" type="application/dynamic-css">

/* Default Print Stylesheet Template
   by Rob Glazebrook of CSSnewbie.com
   Last Updated: June 4, 2008

   Feel free (nay, compelled) to edit, append, and
   manipulate this file as you see fit. */


@media print {

	/* SECTION 1: Set default width, margin, float, and
	   background. This prevents elements from extending
	   beyond the edge of the printed page, and prevents
	   unnecessary background images from printing */
	html {
		background: #fff;
		width: auto;
		height: auto;
		overflow: visible;
	}
	body {
		background: #fff;
		font-size: 20pt;
		width: auto;
		height: auto;
		border: 0;
		margin: 0 5%;
		padding: 0;
		overflow: visible;
		float: none !important;
	}

	/* SECTION 2: Remove any elements not needed in print.
	   This would include navigation, ads, sidebars, etc. */
	.nestedarrow,
	.controls,
	.fork-reveal,
	.share-reveal,
	.state-background,
	.reveal .progress,
	.reveal .backgrounds {
		display: none !important;
	}

	/* SECTION 3: Set body font face, size, and color.
	   Consider using a serif font for readability. */
	body, p, td, li, div {
		font-size: 20pt!important;
		font-family: Georgia, "Times New Roman", Times, serif !important;
		color: #000;
	}

	/* SECTION 4: Set heading font face, sizes, and color.
	   Differentiate your headings from your body text.
	   Perhaps use a large sans-serif for distinction. */
	h1,h2,h3,h4,h5,h6 {
		color: #000!important;
		height: auto;
		line-height: normal;
		font-family: Georgia, "Times New Roman", Times, serif !important;
		text-shadow: 0 0 0 #000 !important;
		text-align: left;
		letter-spacing: normal;
	}
	/* Need to reduce the size of the fonts for printing */
	h1 { font-size: 28pt !important;  }
	h2 { font-size: 24pt !important; }
	h3 { font-size: 22pt !important; }
	h4 { font-size: 22pt !important; font-variant: small-caps; }
	h5 { font-size: 21pt !important; }
	h6 { font-size: 20pt !important; font-style: italic; }

	/* SECTION 5: Make hyperlinks more usable.
	   Ensure links are underlined, and consider appending
	   the URL to the end of the link for usability. */
	a:link,
	a:visited {
		color: #000 !important;
		font-weight: bold;
		text-decoration: underline;
	}
	/*
	.reveal a:link:after,
	.reveal a:visited:after {
		content: " (" attr(href) ") ";
		color: #222 !important;
		font-size: 90%;
	}
	*/


	/* SECTION 6: more reveal.js specific additions by @skypanther */
	ul, ol, div, p {
		visibility: visible;
		position: static;
		width: auto;
		height: auto;
		display: block;
		overflow: visible;
		margin: 0;
		text-align: left !important;
	}
	.reveal pre,
	.reveal table {
		margin-left: 0;
		margin-right: 0;
	}
	.reveal pre code {
		padding: 20px;
		border: 1px solid #ddd;
	}
	.reveal blockquote {
		margin: 20px 0;
	}
	.reveal .slides {
		position: static !important;
		width: auto !important;
		height: auto !important;

		left: 0 !important;
		top: 0 !important;
		margin-left: 0 !important;
		margin-top: 0 !important;
		padding: 0 !important;
		zoom: 1 !important;

		overflow: visible !important;
		display: block !important;

		text-align: left !important;
		-webkit-perspective: none;
		   -moz-perspective: none;
		    -ms-perspective: none;
		        perspective: none;

		-webkit-perspective-origin: 50% 50%;
		   -moz-perspective-origin: 50% 50%;
		    -ms-perspective-origin: 50% 50%;
		        perspective-origin: 50% 50%;
	}
	.reveal .slides section {
		visibility: visible !important;
		position: static !important;
		width: auto !important;
		height: auto !important;
		display: block !important;
		overflow: visible !important;

		left: 0 !important;
		top: 0 !important;
		margin-left: 0 !important;
		margin-top: 0 !important;
		padding: 60px 20px !important;
		z-index: auto !important;

		opacity: 1 !important;

		page-break-after: always !important;

		-webkit-transform-style: flat !important;
		   -moz-transform-style: flat !important;
		    -ms-transform-style: flat !important;
		        transform-style: flat !important;

		-webkit-transform: none !important;
		   -moz-transform: none !important;
		    -ms-transform: none !important;
		        transform: none !important;

		-webkit-transition: none !important;
		   -moz-transition: none !important;
		    -ms-transition: none !important;
		        transition: none !important;
	}
	.reveal .slides section.stack {
		padding: 0 !important;
	}
	.reveal section:last-of-type {
		page-break-after: avoid !important;
	}
	.reveal section .fragment {
		opacity: 1 !important;
		visibility: visible !important;

		-webkit-transform: none !important;
		   -moz-transform: none !important;
		    -ms-transform: none !important;
		        transform: none !important;
	}
	.reveal section img {
		display: block;
		margin: 15px 0px;
		background: rgba(255,255,255,1);
		border: 1px solid #666;
		box-shadow: none;
	}

	.reveal section small {
		font-size: 0.8em;
	}

}  
</script>


<script id="pdf-css" type="application/dynamic-css">
    
/**
 * This stylesheet is used to print reveal.js
 * presentations to PDF.
 *
 * https://github.com/hakimel/reveal.js#pdf-export
 */

* {
	-webkit-print-color-adjust: exact;
}

body {
	margin: 0 auto !important;
	border: 0;
	padding: 0;
	float: none !important;
	overflow: visible;
}

html {
	width: 100%;
	height: 100%;
	overflow: visible;
}

/* Remove any elements not needed in print. */
.nestedarrow,
.reveal .controls,
.reveal .progress,
.reveal .playback,
.reveal.overview,
.fork-reveal,
.share-reveal,
.state-background {
	display: none !important;
}

h1, h2, h3, h4, h5, h6 {
	text-shadow: 0 0 0 #000 !important;
}

.reveal pre code {
	overflow: hidden !important;
	font-family: Courier, 'Courier New', monospace !important;
}

ul, ol, div, p {
	visibility: visible;
	position: static;
	width: auto;
	height: auto;
	display: block;
	overflow: visible;
	margin: auto;
}
.reveal {
	width: auto !important;
	height: auto !important;
	overflow: hidden !important;
}
.reveal .slides {
	position: static;
	width: 100%;
	height: auto;

	left: auto;
	top: auto;
	margin: 0 !important;
	padding: 0 !important;

	overflow: visible;
	display: block;

	-webkit-perspective: none;
	   -moz-perspective: none;
	    -ms-perspective: none;
	        perspective: none;

	-webkit-perspective-origin: 50% 50%; /* there isn't a none/auto value but 50-50 is the default */
	   -moz-perspective-origin: 50% 50%;
	    -ms-perspective-origin: 50% 50%;
	        perspective-origin: 50% 50%;
}

.reveal .slides section {
	page-break-after: always !important;

	visibility: visible !important;
	position: relative !important;
	display: block !important;
	position: relative !important;

	margin: 0 !important;
	padding: 0 !important;
	box-sizing: border-box !important;
	min-height: 1px;

	opacity: 1 !important;

	-webkit-transform-style: flat !important;
	   -moz-transform-style: flat !important;
	    -ms-transform-style: flat !important;
	        transform-style: flat !important;

	-webkit-transform: none !important;
	   -moz-transform: none !important;
	    -ms-transform: none !important;
	        transform: none !important;
}

.reveal section.stack {
	margin: 0 !important;
	padding: 0 !important;
	page-break-after: avoid !important;
	height: auto !important;
	min-height: auto !important;
}

.reveal img {
	box-shadow: none;
}

.reveal .roll {
	overflow: visible;
	line-height: 1em;
}

/* Slide backgrounds are placed inside of their slide when exporting to PDF */
.reveal section .slide-background {
	display: block !important;
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	z-index: -1;
}

/* All elements should be above the slide-background */
.reveal section>* {
	position: relative;
	z-index: 1;
}

/* Display slide speaker notes when 'showNotes' is enabled */
.reveal .speaker-notes-pdf {
	display: block;
	width: 100%;
	max-height: none;
	left: auto;
	top: auto;
	z-index: 100;
}

/* Display slide numbers when 'slideNumber' is enabled */
.reveal .slide-number-pdf {
	display: block;
	position: absolute;
	font-size: 14px;
}

</script>


<script>
var style = document.createElement( 'style' );
style.type = 'text/css';
var style_script_id = window.location.search.match( /print-pdf/gi ) ? 'pdf-css' : 'paper-css';
var style_script = document.getElementById(style_script_id).text;
style.innerHTML = style_script;
document.getElementsByTagName('head')[0].appendChild(style);
</script>

    <script src="hypothesistesting-slides_files/header-attrs-2.10/header-attrs.js"></script>
    <link href="hypothesistesting-slides_files/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
    <link href="hypothesistesting-slides_files/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section>
    <h1 class="title">Pruebas de hipótesis: Resumiendo información
acerca de los efectos causales</h1>
    <h2 class="author">Fill In Your Name</h2>
    <h3 class="date">02 March 2022</h3>
</section>
<section id="TOC">
<ul>
<li><a
href="#/el-papel-de-las-pruebas-de-hipótesis-en-la-inferencia-causal">El
papel de las pruebas de hipótesis en la inferencia causal</a>
<ul>
<li><a href="#/puntos-clave-para-esta-lectura">Puntos clave para esta
lectura</a></li>
<li><a
href="#/el-rol-de-las-pruebas-de-hipótesis-en-la-inferencia-causal">El
rol de las pruebas de hipótesis en la inferencia causal</a></li>
</ul></li>
<li><a href="#/temas-básicos-de-las-prueba-de-hipótesis">Temas básicos
de las prueba de hipótesis</a>
<ul>
<li><a href="#/ingredientes-de-una-prueba-de-hipótesis">Ingredientes de
una prueba de hipótesis</a></li>
<li><a
href="#/una-hipótesis-es-una-afirmación-o-modelo-de-una-relación-entre-posibles-variables-de-resultado">Una
hipótesis es una afirmación o modelo de una relación entre posibles
variables de resultado</a></li>
<li><a
href="#/las-estadísticas-de-pruebas-resumen-las-relaciones-entre-el-tratamiento-y-las-variables-de-resultado">Las
estadísticas de pruebas resumen las relaciones entre el tratamiento y
las variables de resultado</a></li>
<li><a
href="#/el-diseño-conecta-la-estadística-de-prueba-y-la-hipótesis">El
diseño conecta la estadística de prueba y la hipótesis</a></li>
<li><a
href="#/el-diseño-guía-la-creación-de-una-distribución-de-estadísticas-de-prueba-hipotéticas">El
diseño guía la creación de una distribución de estadísticas de prueba
hipotéticas</a></li>
<li><a
href="#/planear-las-distribuciones-de-aleatoriedad-bajo-la-hipótesis-nula">Planear
las distribuciones de aleatoriedad bajo la hipótesis nula</a></li>
<li><a href="#/los-valores-p-resumen-los-planes">Los valores-<span
class="math inline">\(p\)</span> resumen los planes</a></li>
<li><a href="#/cómo-hacer-esto-en-r-coin">Cómo hacer esto en R:
COIN</a></li>
<li><a href="#/cómo-hacer-esto-en-r-ritools">Cómo hacer esto en R:
RItools</a></li>
<li><a href="#/cómo-hacer-esto-en-r-ri2">Cómo hacer esto en R:
RI2</a></li>
<li><a href="#/siguientes-temas">Siguientes temas</a></li>
</ul></li>
<li><a href="#/probando-hipótesis-nulas-débiles">Probando hipótesis
nulas débiles</a>
<ul>
<li><a
href="#/probando-las-hipótesis-nulas-débiles-de-que-no-hay-efectos-promedio">Probando
las hipótesis nulas débiles de que no hay efectos promedio</a></li>
<li><a
href="#/probando-las-hipótesis-nulas-débiles-de-que-no-hay-efectos-promedio-1">Probando
las hipótesis nulas débiles de que no hay efectos promedio</a></li>
<li><a
href="#/probando-las-hipótesis-nulas-débiles-de-que-no-hay-efectos-promedio-2">Probando
las hipótesis nulas débiles de que no hay efectos promedio</a></li>
</ul></li>
<li><a href="#/rechazando-hipótesis-nulas">Rechazando hipótesis
nulas</a>
<ul>
<li><a href="#/rechazando-hipótesis-y-creando-errores">Rechazando
hipótesis y creando errores</a></li>
<li><a
href="#/tasas-de-falsos-positivos-en-las-pruebas-de-hipótesis">Tasas de
falsos positivos en las pruebas de hipótesis</a></li>
<li><a href="#/errores-de-falsos-positivos-y-falsos-negativos">Errores
de falsos positivos y falsos negativos</a></li>
<li><a href="#/una-sola-prueba-de-una-sola-hipótesis">Una sola prueba de
una sola hipótesis</a></li>
<li><a href="#/las-decisiones-implican-errores">Las decisiones implican
errores</a></li>
<li><a
href="#/diagnosticar-las-tasas-de-falsos-positivos-mediante-simulación">Diagnosticar
las tasas de falsos positivos mediante simulación</a></li>
<li><a
href="#/diagnosticar-las-tasas-de-falsos-positivos-mediante-simulación-1">Diagnosticar
las tasas de falsos positivos mediante simulación</a></li>
<li><a
href="#/diagnosticar-falsos-positivos-mediante-simulación">Diagnosticar
falsos positivos mediante simulación</a></li>
<li><a
href="#/diagnosticar-las-tasas-de-falsos-positivos-mediante-simulación-2">Diagnosticar
las tasas de falsos positivos mediante simulación</a></li>
<li><a
href="#/diagnosticar-las-tasas-de-falsos-positivos-mediante-simulación-3">Diagnosticar
las tasas de falsos positivos mediante simulación</a></li>
<li><a
href="#/diagnosticar-las-tasas-de-falsos-positivos-mediante-simulación-4">Diagnosticar
las tasas de falsos positivos mediante simulación</a></li>
<li><a
href="#/tasa-de-falsos-positivos-con-n60-y-variable-de-resultado-binaria">Tasa
de falsos positivos con <span class="math inline">\(N=60\)</span> y
variable de resultado binaria</a></li>
<li><a
href="#/tasa-de-falsos-positivos-con-n60-y-variable-de-resultado-continua">Tasa
de falsos positivos con <span class="math inline">\(N=60\)</span> y
variable de resultado continua</a></li>
<li><a href="#/resumen">Resumen</a></li>
</ul></li>
<li><a href="#/temas-avanzados">Temas avanzados</a>
<ul>
<li><a
href="#/algunos-temas-avanzados-relacionados-con-las-pruebas-de-hipótesis">Algunos
temas avanzados relacionados con las pruebas de hipótesis</a></li>
<li><a href="#/qué-más-debe-saber-sobre-las-pruebas-de-hipótesis">Qué
más debe saber sobre las pruebas de hipótesis</a></li>
<li><a
href="#/ejercicio-pruebas-de-hipótesis-y-estadísticas-de-prueba">Ejercicio:
Pruebas de hipótesis y estadísticas de prueba</a></li>
</ul></li>
<li><a href="#/probar-muchas-hipótesis">Probar muchas hipótesis</a>
<ul>
<li><a href="#/cuándo-podríamos-probar-muchas-hipótesis">¿Cuándo
podríamos probar muchas hipótesis?</a></li>
<li><a
href="#/tasas-de-falsos-positivos-en-las-pruebas-de-hipótesis-múltiples">Tasas
de falsos positivos en las pruebas de hipótesis múltiples</a></li>
<li><a href="#/descubrimientos-con-pruebas-múltiples">Descubrimientos
con pruebas múltiples</a></li>
<li><a
href="#/dos-tasas-de-error-principales-a-controlar-cuando-se-prueban-muchas-hipótesis">Dos
tasas de error principales a controlar cuando se prueban muchas
hipótesis</a></li>
<li><a href="#/preguntas-con-variables-de-resultado-múltiples">Preguntas
con variables de resultado múltiples</a></li>
<li><a
href="#/pruebas-de-hipótesis-múltiples-variables-de-resultado-múltiples">Pruebas
de hipótesis múltiples: Variables de Resultado Múltiples</a></li>
<li><a
href="#/podemos-detectar-un-efecto-en-la-variable-de-resultado-y1">Podemos
detectar un efecto en la variable de resultado <code>Y1</code>?</a></li>
<li><a
href="#/en-cuál-de-las-cinco-variables-de-resultado-podemos-detectar-un-efecto">¿En
cuál de las cinco variables de resultado podemos detectar un
efecto?</a></li>
<li><a
href="#/podemos-detectar-un-efecto-en-cualquiera-de-las-cinco-variables-de-resultado">¿Podemos
detectar un efecto en “cualquiera” de las cinco variables de
resultado?</a></li>
<li><a href="#/comparación-de-enfoques-i">Comparación de enfoques
I</a></li>
<li><a href="#/comparación-de-enfoques-ii">Comparación de enfoques
II</a></li>
<li><a href="#/la-corrección-de-holm">La corrección de Holm</a></li>
<li><a
href="#/pruebas-de-hipótesis-múltiples-brazos-de-tratamiento-múltiples">Pruebas
de hipótesis múltiples: Brazos de tratamiento múltiples</a></li>
<li><a
href="#/pruebas-de-hipótesis-múltiples-brazos-de-tratamiento-múltiples-1">Pruebas
de hipótesis múltiples: Brazos de tratamiento múltiples</a></li>
<li><a
href="#/pruebas-de-hipótesis-múltiples-brazos-de-tratamiento-múltiples-2">Pruebas
de hipótesis múltiples: Brazos de tratamiento múltiples</a></li>
<li><a
href="#/enfoques-para-la-prueba-de-hipótesis-con-múltiples-brazos">Enfoques
para la prueba de hipótesis con múltiples brazos</a></li>
<li><a href="#/resumen-1">Resumen</a></li>
</ul></li>
<li><a href="#/referencias">Referencias</a></li>
</ul>
</section>

<section>
<section
id="el-papel-de-las-pruebas-de-hipótesis-en-la-inferencia-causal"
class="title-slide slide level1 allowframebreaks">
<h1 class="allowframebreaks">El papel de las pruebas de hipótesis en la
inferencia causal</h1>

</section>
<section id="puntos-clave-para-esta-lectura"
class="slide level2 allowframebreaks">
<h2 class="allowframebreaks">Puntos clave para esta lectura</h2>
<ul>
<li><p>La inferencia estadística (por ejemplo, las pruebas de hipótesis
y los intervalos de confianza) requiere <strong>inferencia</strong>, es
decir, razonamiento sobre lo no observado.</p></li>
<li><p>Los valores <span class="math inline">\(p\)</span> requieren
distribuciones de probabilidad.</p></li>
<li><p>Aleatorización (o diseño) + una hipótesis + una función de
estadística de prueba <span class="math inline">\(\rightarrow\)</span>
distribuciones de probabilidad que representan la hipótesis
(distribuciones de referencia)</p></li>
<li><p>Valores observados de las estadísticas de prueba + Distribución
de referencia <span class="math inline">\(\rightarrow\)</span>
valor-<span class="math inline">\(p\)</span>.</p></li>
</ul>
</section>
<section id="el-rol-de-las-pruebas-de-hipótesis-en-la-inferencia-causal"
class="slide level2 allowframebreaks">
<h2 class="allowframebreaks">El rol de las pruebas de hipótesis en la
inferencia causal</h2>
<ul>
<li><p>El <strong>problema fundamental de la inferencia causal</strong>
dice que sólo podemos ver una variable de resultado potencial para
cualquier unidad.</p></li>
<li><p>Por lo tanto, si para Jake se produce un efecto causal
contrafactual del tratamiento <span class="math inline">\(T\)</span>,
cuando <span class="math inline">\(y_{text{Jake},T=1} \ne
y_{text{Jake},T=0}\)</span>, entonces ¿cómo podemos aprender sobre el
efecto causal?</p></li>
<li><p>Una solución es la <strong><a
href="estimation-slides.Rmd">estimación</a> de los promedios de los
efectos causales</strong> (el ATE, ITT, LATE).</p></li>
<li><p>Esto es lo que llamamos el enfoque de Neyman.</p></li>
<li><p>Otra posible solución es hacer <strong>afirmaciones</strong> o
<strong>suposiciones</strong> sobre los efectos causales.</p></li>
<li><p>Podríamos decir: “Creo que el efecto sobre Jake es 5” o “Este
experimento no ha tenido ningún efecto sobre nadie”. Y entonces
podríamos preguntarnos “¿Cuánta evidencia tiene este experimento sobre
esa afirmación?”</p></li>
<li><p>Esta evidencia se resume en un valor <span
class="math inline">\(p\)</span>.</p></li>
<li><p>A esto lo llamamos enfoque de Fisher.</p></li>
<li><p>El enfoque de las pruebas de hipótesis para la inferencia causal
no nos muestra cuál la mejor suposición, sino que nos dice <em>cuánta
evidencia o información obtenemos del diseño de la investigación sobre
una afirmación causal</em>.</p></li>
<li><p>La estimación nos permite hacer mejores suposiciones, pero no nos
dice qué tanto sabemos sobre esas suposiciones.</p></li>
<li><p>Por ejemplo, una mejor suposición con <span
class="math inline">\(N=10\)</span> parece decirnos menos sobre el
efecto que <span class="math inline">\(N=1000\)</span>.</p></li>
<li><p>Por ejemplo, una mejor suposición cuando el 95% de <span
class="math inline">\(Y=1\)</span> y el 5% de <span
class="math inline">\(Y=0\)</span> parece decirnos menos que cuando las
variables de resultado se dividen por igual entre 0 y 1.</p></li>
<li><p>Casi siempre damos reporte de ambos, ya que esto nos ayuda a
tomar decisiones: “Nuestra mejor suposición del efecto del tratamiento
fue 5, y pudimos rechazar la idea de que el efecto fuera 0 (<span
class="math inline">\(p\)</span>=.01)”.</p></li>
</ul>
</section></section>
<section>
<section id="temas-básicos-de-las-prueba-de-hipótesis"
class="title-slide slide level1 allowframebreaks">
<h1 class="allowframebreaks">Temas básicos de las prueba de
hipótesis</h1>

</section>
<section id="ingredientes-de-una-prueba-de-hipótesis"
class="slide level2 allowframebreaks">
<h2 class="allowframebreaks">Ingredientes de una prueba de
hipótesis</h2>
<ul>
<li><p>Una <strong>hipótesis</strong> es una afirmación sobre una
relación entre variables de resultado potenciales.</p></li>
<li><p>Una <strong>estadística de prueba</strong> resume la relación
entre el tratamiento y las variables de resultado observadas.</p></li>
<li><p>El <strong>diseño</strong> nos permite vincular la hipótesis y la
estadística de prueba: calcule una estadística de prueba que describa
una relación entre variables de resultado potenciales.</p></li>
<li><p>El <strong>diseño</strong> también nos indica cómo generar una
<em>distribución</em> de las posibles estadísticas de prueba sugeridas
por la hipótesis.</p></li>
<li><p>Un valor <strong><span class="math inline">\(p\)</span></strong>
describe la relación entre nuestra estadística de prueba observada y la
distribución de las posibles estadísticas de prueba
hipotéticas.</p></li>
</ul>
</section>
<section
id="una-hipótesis-es-una-afirmación-o-modelo-de-una-relación-entre-posibles-variables-de-resultado"
class="slide level2 allowframebreaks">
<h2 class="allowframebreaks">Una hipótesis es una afirmación o modelo de
una relación entre posibles variables de resultado</h2>
<table>
<thead>
<tr class="header">
<th style="text-align: right;">Outcome</th>
<th style="text-align: right;">Treatment</th>
<th style="text-align: right;"><span
class="math inline">\(y_{i,0}\)</span></th>
<th style="text-align: right;">ITE</th>
<th style="text-align: right;"><span
class="math inline">\(y_{i,1}\)</span></th>
<th style="text-align: right;"><span
class="math inline">\(Y&gt;0\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">30</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">200</td>
<td style="text-align: right;">200</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">91</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">11</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">23</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">23</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">34</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">34</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">45</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">190</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">190</td>
<td style="text-align: right;">90</td>
<td style="text-align: right;">280</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">200</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">200</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">220</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
<p>Por ejemplo, la hipótesis nula de ausencia de efectos, débil o
tajante, es <span class="math inline">\(H_0:y_{i,1} =
y_{i,0}\)</span></p>
</section>
<section
id="las-estadísticas-de-pruebas-resumen-las-relaciones-entre-el-tratamiento-y-las-variables-de-resultado"
class="slide level2 allowframebreaks">
<h2 class="allowframebreaks">Las estadísticas de pruebas resumen las
relaciones entre el tratamiento y las variables de resultado</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## La estadística de prueba de diferencia de medias</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>meanTT <span class="ot">&lt;-</span> <span class="cf">function</span>(ys, z) {</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(ys[z <span class="sc">==</span> <span class="dv">1</span>]) <span class="sc">-</span> <span class="fu">mean</span>(ys[z <span class="sc">==</span> <span class="dv">0</span>])</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Rangos de la estadística de prueba de diferencia de medias</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>meanrankTT <span class="ot">&lt;-</span> <span class="cf">function</span>(ys, z) {</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  ranky <span class="ot">&lt;-</span> <span class="fu">rank</span>(ys)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(ranky[z <span class="sc">==</span> <span class="dv">1</span>]) <span class="sc">-</span> <span class="fu">mean</span>(ranky[z <span class="sc">==</span> <span class="dv">0</span>])</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>observedMeanTT <span class="ot">&lt;-</span> <span class="fu">meanTT</span>(<span class="at">ys =</span> Y, <span class="at">z =</span> T)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>observedMeanRankTT <span class="ot">&lt;-</span> <span class="fu">meanrankTT</span>(<span class="at">ys =</span> Y, <span class="at">z =</span> T)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>observedMeanTT</span></code></pre></div>
<pre><code>[1] -49.6</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>observedMeanRankTT</span></code></pre></div>
<pre><code>[1] 1</code></pre>
</section>
<section id="el-diseño-conecta-la-estadística-de-prueba-y-la-hipótesis"
class="slide level2 allowframebreaks">
<h2 class="allowframebreaks">El diseño conecta la estadística de prueba
y la hipótesis</h2>
<p>Lo que observamos para cada persona <span
class="math inline">\(i\)</span> (<span
class="math inline">\(Y_i\)</span>) es lo que habríamos observado en el
tratamiento (<span class="math inline">\(y_{i,1}\)</span>)
<strong>o</strong> lo que habríamos observado en el control (<span
class="math inline">\(y_{i,0}\)</span>).</p>
<p><span class="math display">\[Y_i = T_i y_{i,1} + (1-T_i)*
y_{i,0}\]</span></p>
<p>So, if <span class="math inline">\(y_{i,1}=y_{i,0}\)</span> then
<span class="math inline">\(Y_i = y_{i,0}\)</span>.</p>
<p>Lo que <em>observamos realmente</em> es lo que <em>habríamos
observado en la condición de control</em>.</p>
</section>
<section
id="el-diseño-guía-la-creación-de-una-distribución-de-estadísticas-de-prueba-hipotéticas"
class="slide level2 allowframebreaks">
<h2 class="allowframebreaks">El diseño guía la creación de una
distribución de estadísticas de prueba hipotéticas</h2>
<p>Necesitamos saber cómo repetir nuestro experimento:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>repeatExperiment <span class="ot">&lt;-</span> <span class="cf">function</span>(N) {</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">complete_ra</span>(N)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Luego lo repetimos, calculando la estadística de prueba implícita por
la hipótesis y el diseño cada iteración:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123456</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>possibleMeanDiffsH0 <span class="ot">&lt;-</span> <span class="fu">replicate</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10000</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">meanTT</span>(<span class="at">ys =</span> Y, <span class="at">z =</span> <span class="fu">repeatExperiment</span>(<span class="at">N =</span> <span class="dv">10</span>))</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123456</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>possibleMeanRankDiffsH0 <span class="ot">&lt;-</span> <span class="fu">replicate</span>(</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="dv">10000</span>,</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">meanrankTT</span>(<span class="at">ys =</span> Y, <span class="at">z =</span> <span class="fu">repeatExperiment</span>(<span class="at">N =</span> <span class="dv">10</span>))</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</section>
<section
id="planear-las-distribuciones-de-aleatoriedad-bajo-la-hipótesis-nula"
class="slide level2 allowframebreaks">
<h2 class="allowframebreaks">Planear las distribuciones de aleatoriedad
bajo la hipótesis nula</h2>

<div class="figure" style="text-align: center">
<img src="figs/figunnamed-chunk-6-1.png" alt=" Un ejemplo de uso del diseño del experimento para probar una hipótesis con dos estadísticas de prueba diferentes." width=".8\textwidth"  />
<p class="caption">
Un ejemplo de uso del diseño del experimento para probar una hipótesis
con dos estadísticas de prueba diferentes.
</p>
</div>
</section>
<section id="los-valores-p-resumen-los-planes" class="slide level2">
<h2>Los valores-<span class="math inline">\(p\)</span> resumen los
planes</h2>
<p>¿Cómo debemos interpretar los valores-<span
class="math inline">\(p\)</span>? (Nótese que son de una cola)</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>pMeanTT <span class="ot">&lt;-</span> <span class="fu">mean</span>(possibleMeanDiffsH0 <span class="sc">&gt;=</span> observedMeanTT)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>pMeanRankTT <span class="ot">&lt;-</span> <span class="fu">mean</span>(possibleMeanRankDiffsH0 <span class="sc">&gt;=</span> observedMeanRankTT)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>pMeanTT</span></code></pre></div>
<pre><code>[1] 0.7785</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>pMeanRankTT</span></code></pre></div>
<pre><code>[1] 0.3198</code></pre>
</section>
<section id="cómo-hacer-esto-en-r-coin" class="slide level2">
<h2>Cómo hacer esto en R: COIN</h2>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="do">## usando el paquete coin</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(coin)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12345</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>pMean2 <span class="ot">&lt;-</span> coin<span class="sc">::</span><span class="fu">pvalue</span>(<span class="fu">oneway_test</span>(Y <span class="sc">~</span> <span class="fu">factor</span>(T),</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> dat,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">distribution =</span> <span class="fu">approximate</span>(<span class="at">nresample =</span> <span class="dv">1000</span>), <span class="at">alternative =</span> <span class="st">&quot;less&quot;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>dat<span class="sc">$</span>rankY <span class="ot">&lt;-</span> <span class="fu">rank</span>(dat<span class="sc">$</span>Y)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>pMeanRank2 <span class="ot">&lt;-</span> coin<span class="sc">::</span><span class="fu">pvalue</span>(<span class="fu">oneway_test</span>(rankY <span class="sc">~</span> <span class="fu">factor</span>(T),</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> dat,</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">distribution =</span> <span class="fu">approximate</span>(<span class="at">nresample =</span> <span class="dv">1000</span>), <span class="at">alternative =</span> <span class="st">&quot;less&quot;</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>pMean2</span></code></pre></div>
<pre><code>[1] 0.783
99 percent confidence interval:
 0.7476 0.8157 </code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>pMeanRank2</span></code></pre></div>
<pre><code>[1] 0.323
99 percent confidence interval:
 0.2853 0.3624 </code></pre>
</section>
<section id="cómo-hacer-esto-en-r-ritools"
class="slide level2 allowframebreaks">
<h2 class="allowframebreaks">Cómo hacer esto en R: RItools</h2>
<p>Primero instalar la versión de desarrollo del paquete de RItools</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dev_mode() ## no instalar el paquete de manera global</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">install</span>(<span class="st">&quot;markmfredrickson/RItools@randomization-distribution&quot;</span>,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">force =</span> <span class="cn">TRUE</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co"># dev_mode()</span></span></code></pre></div>
<p>Luego use la función <code>RItest</code>.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dev_mode()</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RItools)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>thedesignA <span class="ot">&lt;-</span> <span class="fu">simpleRandomSampler</span>(<span class="at">total =</span> N, <span class="at">z =</span> dat<span class="sc">$</span>T, <span class="at">b =</span> <span class="fu">rep</span>(<span class="dv">1</span>, N))</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>pMean4 <span class="ot">&lt;-</span> <span class="fu">RItest</span>(</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> dat<span class="sc">$</span>Y, <span class="at">z =</span> dat<span class="sc">$</span>T, <span class="at">samples =</span> <span class="dv">1000</span>, <span class="at">test.stat =</span> meanTT,</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">sampler =</span> thedesignA</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>pMeanRank4 <span class="ot">&lt;-</span> <span class="fu">RItest</span>(</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> dat<span class="sc">$</span>Y, <span class="at">z =</span> dat<span class="sc">$</span>T, <span class="at">samples =</span> <span class="dv">1000</span>, <span class="at">test.stat =</span> meanrankTT,</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">sampler =</span> thedesignA</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>pMean4</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>pMeanRank4</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="co"># dev_mode() ## and turn off dev_mode</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>pMean4</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>Call<span class="sc">:</span>  <span class="fu">RItest</span>(<span class="at">y =</span> dat<span class="sc">$</span>Y, <span class="at">z =</span> dat<span class="sc">$</span>T, <span class="at">test.stat =</span> meanTT, <span class="at">sampler =</span> thedesignA,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">samples =</span> <span class="dv">1000</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>                        Value <span class="fu">Pr</span>(<span class="sc">&gt;</span>x)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>Estadística de Prueba Observada <span class="sc">-</span><span class="fl">49.6</span>   <span class="fl">0.78</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>pMeanRank4</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>Call<span class="sc">:</span>  <span class="fu">RItest</span>(<span class="at">y =</span> dat<span class="sc">$</span>Y, <span class="at">z =</span> dat<span class="sc">$</span>T, <span class="at">test.stat =</span> meanrankTT, <span class="at">sampler =</span> thedesignA,</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">samples =</span> <span class="dv">1000</span>)</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>                        Value <span class="fu">Pr</span>(<span class="sc">&gt;</span>x)</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>Estadística de Prueba Observada     <span class="dv">1</span>   <span class="fl">0.32</span></span></code></pre></div>
</section>
<section id="cómo-hacer-esto-en-r-ri2" class="slide level2">
<h2>Cómo hacer esto en R: RI2</h2>
<p>¿Cómo deberíamos interpretar el valor-<span
class="math inline">\(p\)</span> de dos colas aquí?</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="do">## usando el paquete ri2</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ri2)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>thedesign <span class="ot">&lt;-</span> <span class="fu">declare_ra</span>(<span class="at">N =</span> N)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>dat<span class="sc">$</span>Z <span class="ot">&lt;-</span> dat<span class="sc">$</span>T</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>pMean4 <span class="ot">&lt;-</span> <span class="fu">conduct_ri</span>(Y <span class="sc">~</span> Z,</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">declaration =</span> thedesign,</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">sharp_hypothesis =</span> <span class="dv">0</span>, <span class="at">data =</span> dat, <span class="at">sims =</span> <span class="dv">1000</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(pMean4)</span></code></pre></div>
<pre><code>  term estimate two_tailed_p_value
1    Z    -49.6             0.4444</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>pMeanRank4 <span class="ot">&lt;-</span> <span class="fu">conduct_ri</span>(rankY <span class="sc">~</span> Z,</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">declaration =</span> thedesign,</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">sharp_hypothesis =</span> <span class="dv">0</span>, <span class="at">data =</span> dat, <span class="at">sims =</span> <span class="dv">1000</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(pMeanRank4)</span></code></pre></div>
<pre><code>  term estimate two_tailed_p_value
1    Z        1             0.6349</code></pre>
</section>
<section id="siguientes-temas" class="slide level2">
<h2>Siguientes temas</h2>
<ul>
<li><p>Probando hipótesis nulas débiles, <span
class="math inline">\(H_0: \bar{y}_{1} = \bar{y}_{0}\)</span>.</p></li>
<li><p>Rechazando hipótesis nulas (y haciendo errores de falso positivo
y/o falso negativo).</p></li>
<li><p>Mantener las tasas de error de falsos positivos correctas cuando
se evalúa más de una hipótesis.</p></li>
<li><p>Poder de las pruebas de hipótesis (<a
href="https://egap.github.io/learningdays-book/statistical-power-and-design-diagnosands.html">Modulo
sobre el Poder Estadístico y los Diagnósticos de Diseño</a>).</p></li>
</ul>
</section></section>
<section>
<section id="probando-hipótesis-nulas-débiles"
class="title-slide slide level1">
<h1>Probando hipótesis nulas débiles</h1>

</section>
<section
id="probando-las-hipótesis-nulas-débiles-de-que-no-hay-efectos-promedio"
class="slide level2">
<h2>Probando las hipótesis nulas débiles de que no hay efectos
promedio</h2>
<ul>
<li><p>La hipótesis nula débil es una afirmación sobre los agregados, y
casi siempre se plantea en términos de promedios: <span
class="math inline">\(H_0: \bar{y}_{1} = \bar{y}_{0}\)</span></p></li>
<li><p>La estadística de prueba para esta hipótesis es casi siempre la
diferencia simple de medias (por ejemplo, el <code>meanTT()</code>
anteriormente mencionado).</p></li>
</ul>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>lm1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(Y <span class="sc">~</span> T, <span class="at">data =</span> dat)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>lm1P <span class="ot">&lt;-</span> <span class="fu">summary</span>(lm1)<span class="sc">$</span>coef[<span class="st">&quot;T&quot;</span>, <span class="st">&quot;Pr(&gt;|t|)&quot;</span>]</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>ttestP1 <span class="ot">&lt;-</span> <span class="fu">t.test</span>(Y <span class="sc">~</span> T, <span class="at">data =</span> dat)<span class="sc">$</span>p.value</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(estimatr)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>ttestP2 <span class="ot">&lt;-</span> <span class="fu">difference_in_means</span>(Y <span class="sc">~</span> T, <span class="at">data =</span> dat)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="at">lm1P =</span> lm1P, <span class="at">ttestP1 =</span> ttestP1, <span class="at">tttestP2 =</span> ttestP2<span class="sc">$</span>p.value)</span></code></pre></div>
<pre><code>      lm1P    ttestP1 tttestP2.T 
    0.3321     0.3587     0.3587 </code></pre>
<ul>
<li>¿Por qué el valor-<span class="math inline">\(p\)</span> de OLS es
diferente? ¿Qué supuestos utilizamos para calcularlo?</li>
</ul>
</section>
<section
id="probando-las-hipótesis-nulas-débiles-de-que-no-hay-efectos-promedio-1"
class="slide level2">
<h2>Probando las hipótesis nulas débiles de que no hay efectos
promedio</h2>
<p>Tanto la variación como la locación de <span
class="math inline">\(Y\)</span> cambia con el tratamiento en esta
simulación.</p>

<div class="figure">
<img src="figs/figunnamed-chunk-8-1.png" alt="Boxplot  de las variables de resultado observados por el estado de tratamiento" width=".7\textwidth"  />
<p class="caption">
Boxplot de las variables de resultado observados por el estado de
tratamiento
</p>
</div>
</section>
<section
id="probando-las-hipótesis-nulas-débiles-de-que-no-hay-efectos-promedio-2"
class="slide level2">
<h2>Probando las hipótesis nulas débiles de que no hay efectos
promedio</h2>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="do">## By hand:</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>varEstATE <span class="ot">&lt;-</span> <span class="cf">function</span>(Y, T) {</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">var</span>(Y[T <span class="sc">==</span> <span class="dv">1</span>]) <span class="sc">/</span> <span class="fu">sum</span>(T) <span class="sc">+</span> <span class="fu">var</span>(Y[T <span class="sc">==</span> <span class="dv">0</span>]) <span class="sc">/</span> <span class="fu">sum</span>(<span class="dv">1</span> <span class="sc">-</span> T)</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>seEstATE <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(<span class="fu">varEstATE</span>(dat<span class="sc">$</span>Y, dat<span class="sc">$</span>T))</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>obsTStat <span class="ot">&lt;-</span> observedMeanTT <span class="sc">/</span> seEstATE</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">observedTestStat =</span> observedMeanTT,</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">stderror =</span> seEstATE,</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">tstat =</span> obsTStat,</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">pval =</span> <span class="dv">2</span> <span class="sc">*</span> <span class="fu">min</span>(</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pt</span>(obsTStat, <span class="at">df =</span> <span class="dv">8</span>, <span class="at">lower.tail =</span> <span class="cn">TRUE</span>),</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pt</span>(obsTStat, <span class="at">df =</span> <span class="dv">8</span>, <span class="at">lower.tail =</span> <span class="cn">FALSE</span>)</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>observedTestStat         stderror            tstat             pval 
        -49.6000          48.0448          -1.0324           0.3321 </code></pre>
</section></section>
<section>
<section id="rechazando-hipótesis-nulas"
class="title-slide slide level1">
<h1>Rechazando hipótesis nulas</h1>

</section>
<section id="rechazando-hipótesis-y-creando-errores"
class="slide level2">
<h2>Rechazando hipótesis y creando errores</h2>
<ul>
<li><p>“Típicamente, el nivel de una prueba [<span
class="math inline">\(\alpha\)</span>] es una promesa sobre el
rendimiento de esta, el tamaño es un dato sobre su rendimiento…”
(Rosenbaum 2010, Glosario)</p></li>
<li><p><span class="math inline">\(\alpha\)</span> es la probabilidad de
rechazar la hipótesis nula cuando la hipótesis nula es
verdadera.</p></li>
<li><p>¿Cómo deberíamos interpretar <span
class="math inline">\(p\)</span>=0.78? ¿Cómo deberíamos interpretar
<span class="math inline">\(p\)</span>=0.32 (nuestras pruebas de la
hipótesis nula aguda)?</p></li>
<li><p>¿Qué significa “rechazar” <span class="math inline">\(H_0:
y_{i,1}=y_{i,2}\)</span> at <span
class="math inline">\(\alpha=.05\)</span>?</p></li>
</ul>
</section>
<section id="tasas-de-falsos-positivos-en-las-pruebas-de-hipótesis"
class="slide level2 allowframebreaks">
<h2 class="allowframebreaks">Tasas de falsos positivos en las pruebas de
hipótesis</h2>

<div class="figure">
<img src="figs/fignormp-1.png" alt="Valor p de una prueba estadística Normalmente distribuida." width=".5\textwidth"  />
<p class="caption">
Valor p de una prueba estadística Normalmente distribuida.
</p>
</div>
<p>Nótese que:</p>
<ul>
<li><p>La curva está centrada en el valor hipotético.</p></li>
<li><p>La curva representa el mundo de la hipótesis.</p></li>
<li><p>El valor <span class="math inline">\(p\)</span> es lo raro que
sería ver la estadística de prueba observada (o un valor más alejado del
valor hipotético) en el mundo de la hipótesis nula.</p></li>
<li><p>En la imagen, el valor observado de la estadística de prueba es
consistente con la distribución hipotetizada, pero no es súper
consistente.</p></li>
<li><p>Incluso si <span class="math inline">\(p &lt; .05\)</span> (o
<span class="math inline">\(p &lt; .001\)</span>), la estadística de
prueba observada debe reflejar algún valor de la distribución
hipotetizada. Esto significa que siempre se puede cometer un error al
rechazar una hipótesis nula.</p></li>
</ul>
</section>
<section id="errores-de-falsos-positivos-y-falsos-negativos"
class="slide level2">
<h2>Errores de falsos positivos y falsos negativos</h2>
<ul>
<li><p>Si decimos: “¡El resultado experimental es significativamente
diferente del valor hipotético de cero (<span
class="math inline">\(p=.001\)</span>)! ¡Rechazamos la hipótesis!”
<strong>cuando la verdad es cero</strong> estamos cometiendo un
<strong>error de falso positivo</strong> (pretender detectar algo
positivamente cuando no hay señal, sólo ruido).</p></li>
<li><p>Si decimos: “No podemos distinguir este resultado del cero (<span
class="math inline">\(p=.3\)</span>). No podemos rechazar la hipótesis
de cero”. <strong>cuando la verdad no es cero</strong> estamos
cometiendo un <strong>error de falso negativo</strong> (afirmando la
incapacidad de detectar algo cuando hay una señal, pero está abrumada
por el ruido).</p></li>
</ul>
</section>
<section id="una-sola-prueba-de-una-sola-hipótesis"
class="slide level2">
<h2>Una sola prueba de una sola hipótesis</h2>
<ul>
<li><p>Una única prueba de una única hipótesis debería fomentar los
errores de falsos positivos en contadas ocasiones (por ejemplo, si
establecemos <span class="math inline">\(\alpha=.05\)</span>), entonces
estamos diciendo que nos sentimos cómodos con que nuestro procedimiento
de prueba cometa errores de falsos positivos en <strong>no más del 5% de
las pruebas de una asignación de tratamiento dada en un experimento
determinado</strong>.</p></li>
<li><p>Además, una <strong>prueba única de una sola hipótesis</strong>
debería detectar la señal cuando existe — debería tener un alto
<strong>poder estadístico</strong>. En otras palabras, no debería fallar
en la detección de una señal cuando existe (es decir, debería tener
bajas tasas de error de falso negativo).</p></li>
</ul>
</section>
<section id="las-decisiones-implican-errores" class="slide level2">
<h2>Las decisiones implican errores</h2>
<ul>
<li><p>Si los errores son necesarios, ¿cómo podemos diagnosticarlos?
¿Cómo podemos saber si nuestro proceso de comprobación de hipótesis
puede generar demasiados errores de falsos positivos?</p></li>
<li><p>¡Diagnosticar usando simulación!</p></li>
</ul>
</section>
<section
id="diagnosticar-las-tasas-de-falsos-positivos-mediante-simulación"
class="slide level2">
<h2>Diagnosticar las tasas de falsos positivos mediante simulación</h2>
<ul>
<li><p>A través de repeticiones del diseño:</p>
<ul>
<li>Cree una hipótesis nula verdadera.</li>
<li>Pruebe la hipótesis verdadera nula.</li>
<li>El valor <span class="math inline">\(p\)</span> debe ser grande si
la prueba funciona correctamente.</li>
</ul></li>
<li><p>La proporción de valores <span class="math inline">\(p\)</span>
pequeños no debería ser mayor que <span
class="math inline">\(\alpha\)</span> si la prueba funciona
correctamente.</p></li>
</ul>
</section>
<section
id="diagnosticar-las-tasas-de-falsos-positivos-mediante-simulación-1"
class="slide level2">
<h2>Diagnosticar las tasas de falsos positivos mediante simulación</h2>
<p>Ejemplo con un resultado binario. ¿Funciona la prueba cómo
debería?</p>
</section>
<section id="diagnosticar-falsos-positivos-mediante-simulación"
class="slide level2">
<h2>Diagnosticar falsos positivos mediante simulación</h2>
<p>¿Cómo son los valores p cuándo no hay efecto?</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>collectPValues <span class="ot">&lt;-</span> <span class="cf">function</span>(y, trt, <span class="at">thedistribution =</span> <span class="fu">exact</span>()) {</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  new_trt <span class="ot">&lt;-</span> <span class="fu">repeatExperiment</span>(<span class="fu">length</span>(y)) <span class="do">## Y y T no tienen relación</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  thedata <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">new_trt =</span> new_trt, <span class="at">y =</span> y)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  thedata<span class="sc">$</span>ranky <span class="ot">&lt;-</span> <span class="fu">rank</span>(y)</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  thedata<span class="sc">$</span>new_trtF <span class="ot">&lt;-</span> <span class="fu">factor</span>(thedata<span class="sc">$</span>new_trt)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  thelm <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> new_trt, <span class="at">data =</span> thedata) <span class="do">## Las cuatro pruebas</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  t_test_CLT <span class="ot">&lt;-</span> <span class="fu">difference_in_means</span>(y <span class="sc">~</span> new_trt, <span class="at">data =</span> thedata)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  t_test_exact <span class="ot">&lt;-</span> <span class="fu">oneway_test</span>(y <span class="sc">~</span> new_trtF,</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> thedata,</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">distribution =</span> thedistribution</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>  t_test_rank_exact <span class="ot">&lt;-</span> <span class="fu">oneway_test</span>(ranky <span class="sc">~</span> new_trtF,</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> thedata,</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">distribution =</span> thedistribution</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>  owP <span class="ot">&lt;-</span> coin<span class="sc">::</span><span class="fu">pvalue</span>(t_test_exact)[[<span class="dv">1</span>]]</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>  owRankP <span class="ot">&lt;-</span> coin<span class="sc">::</span><span class="fu">pvalue</span>(t_test_rank_exact)[[<span class="dv">1</span>]]</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">c</span>( <span class="do">## Regrese los valores p</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">lmp =</span> <span class="fu">summary</span>(thelm)<span class="sc">$</span>coef[<span class="st">&quot;new_trt&quot;</span>, <span class="st">&quot;Pr(&gt;|t|)&quot;</span>],</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">neyp =</span> t_test_CLT<span class="sc">$</span>p.value[[<span class="dv">1</span>]],</span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">rtp =</span> owP,</span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">rtpRank =</span> owRankP</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</section>
<section
id="diagnosticar-las-tasas-de-falsos-positivos-mediante-simulación-2"
class="slide level2">
<h2>Diagnosticar las tasas de falsos positivos mediante simulación</h2>
<ul>
<li><p>Cuando no hay ningún efecto, una prueba de la hipótesis nula de
ausencia de efectos debería producir un valor p
<strong>grande</strong>.</p></li>
<li><p>Si la prueba funciona bien, deberíamos ver sobre todo valores p
grandes y muy pocos valores p pequeños.</p></li>
<li><p>Algunos de los valores p para las cuatro pruebas diferentes
(hicimos 5000 simulaciones, sólo mostramos 5)</p></li>
</ul>
<pre><code>        [,1] [,2] [,3] [,4]   [,5]
lmp        1    1    1    1 0.1411
neyp       1    1    1    1 0.1778
rtp        1    1    1    1 0.4444
rtpRank    1    1    1    1 0.4444</code></pre>
</section>
<section
id="diagnosticar-las-tasas-de-falsos-positivos-mediante-simulación-3"
class="slide level2">
<h2>Diagnosticar las tasas de falsos positivos mediante simulación</h2>
<p>De hecho, si no hay ningún efecto, y si decidimos rechazar la
hipótesis nula de ausencia de efectos con <span
class="math inline">\(\alpha=.25\)</span>, querríamos que <strong>no más
del 25% de nuestros valores p en esta simulación sean menores que
p=.25</strong>. ¿Qué podemos observar aquí? ¿Qué pruebas parecen tener
tasas de falsos positivos demasiado altas?</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Calcule la proporción de valores p menores que .25, por cada fila de pDist</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(pDist, <span class="dv">1</span>, <span class="cf">function</span>(x) {</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mean</span>(x <span class="sc">&lt;</span> .<span class="dv">25</span>)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<pre><code>    lmp    neyp     rtp rtpRank 
 0.4536  0.4536  0.0000  0.0000 </code></pre>
</section>
<section
id="diagnosticar-las-tasas-de-falsos-positivos-mediante-simulación-4"
class="slide level2">
<h2>Diagnosticar las tasas de falsos positivos mediante simulación</h2>
<p>Compare las pruebas trazando la proporción de valores p menores que
un número determinado. Las pruebas de “inferencia aleatoria” controlan
la tasa de falsos positivos (son las pruebas de uso de permutación
directa, repitiendo el experimento).</p>

<div class="figure">
<img src="figs/figplotecdf-1.png" alt=" \tiny Dist. p-val para 4 pruebas cuando no hay efectos n=10. Cuando la prueba controla su tasa de falsos positivos los puntos caen sobre o por debajo de la línea diagonal." width=".6\textwidth"  />
<p class="caption">
Dist. p-val para 4 pruebas cuando no hay efectos n=10. Cuando la prueba
controla su tasa de falsos positivos los puntos caen sobre o por debajo
de la línea diagonal.
</p>
</div>
</section>
<section
id="tasa-de-falsos-positivos-con-n60-y-variable-de-resultado-binaria"
class="slide level2">
<h2>Tasa de falsos positivos con <span
class="math inline">\(N=60\)</span> y variable de resultado binaria</h2>
<p>En este diseño, sólo las pruebas basadas en la inferencia de
aleatorización directa controlan la tasa de falsos positivos.</p>

<div class="figure">
<img src="figs/figplotecdfBig-1.png" alt=" \tiny  Dist. P-val para 4 pruebas cuando no hay efectos n=60 y una variable de resultado binaria. Una prueba que controla la tasa de falsos positivos debería tener puntos en la línea diagonal o por debajo de ella." width=".7\textwidth"  />
<p class="caption">
Dist. P-val para 4 pruebas cuando no hay efectos n=60 y una variable de
resultado binaria. Una prueba que controla la tasa de falsos positivos
debería tener puntos en la línea diagonal o por debajo de ella.
</p>
</div>
</section>
<section
id="tasa-de-falsos-positivos-con-n60-y-variable-de-resultado-continua"
class="slide level2">
<h2>Tasa de falsos positivos con <span
class="math inline">\(N=60\)</span> y variable de resultado
continua</h2>
<p>Aquí todas las pruebas hacen un buen trabajo al controlar la tasa de
falsos positivos.</p>

<div class="figure">
<img src="figs/figplotecdfBig2-1.png" alt="\tiny  Dist. P-val para 4 pruebas cuando no hay efectos  n=60 y una variable de resultado continua. Cuando la  prueba que controla la tasa de falsos positivos los puntos caen sobre o debajo de la línea diagonal." width=".7\textwidth"  />
<p class="caption">
Dist. P-val para 4 pruebas cuando no hay efectos n=60 y una variable de
resultado continua. Cuando la prueba que controla la tasa de falsos
positivos los puntos caen sobre o debajo de la línea diagonal.
</p>
</div>
</section>
<section id="resumen" class="slide level2">
<h2>Resumen</h2>
<ul>
<li><p>Una buena prueba:</p>
<ol type="1">
<li><p>raramente arroja dudas sobre la verdad, y</p></li>
<li><p>distingue fácilmente la señal del ruido (pone en duda la falsedad
con frecuencia).</p></li>
</ol></li>
<li><p>Podemos saber si nuestro procedimiento de prueba controla las
tasas de falsos positivos dado nuestro diseño.</p></li>
<li><p>Cuando las tasas de falsos positivos no están controladas, ¿qué
puede estar fallando? (A menudo tiene que ver con las
asintóticas).</p></li>
</ul>
</section></section>
<section>
<section id="temas-avanzados" class="title-slide slide level1">
<h1>Temas avanzados</h1>

</section>
<section
id="algunos-temas-avanzados-relacionados-con-las-pruebas-de-hipótesis"
class="slide level2">
<h2>Algunos temas avanzados relacionados con las pruebas de
hipótesis</h2>
<ul>
<li><p>Incluso si un procedimiento de prueba determinado controla la
tasa de falsos positivos para una sola prueba, puede que no controle la
tasa para un grupo de pruebas múltiples. Léase: <a
href="https://egap.org/methods-guides/10-things-you-need-know-about-multiple-comparisons">10
Things you need to know about multiple comparisons</a> para obtener una
guía de los enfoques para controlar dichas tasas de rechazo en múltiples
pruebas.</p></li>
<li><p>Un intervalo de confianza de <span
class="math inline">\(100(1-\alpha)\)</span> puede definirse como el
rango de hipótesis en el que todos los valores <span
class="math inline">\(p\)</span> son mayores o iguales que <span
class="math inline">\(alpha\)</span>. Esto se llama invertir la prueba
de hipótesis (<span class="citation"
data-cites="rosenbaum2010design">Rosenbaum (<a
href="#/ref-rosenbaum2010design" role="doc-biblioref">2010</a>)</span>).
Es decir, un intervalo de confianza es una colección de pruebas de
hipótesis.</p></li>
</ul>
</section>
<section id="qué-más-debe-saber-sobre-las-pruebas-de-hipótesis"
class="slide level2 allowframebreaks">
<h2 class="allowframebreaks">Qué más debe saber sobre las pruebas de
hipótesis</h2>
<ul>
<li><p>Una estimación puntual basada en pruebas de hipótesis se denomina
estimación puntual de Hodges-Lehmann (<span class="citation"
data-cites="rosenbaum1993hlp">Rosenbaum (<a
href="#/ref-rosenbaum1993hlp"
role="doc-biblioref">1993</a>)</span>,<span class="citation"
data-cites="hodges1963elb">Hodges and Lehmann (<a
href="#/ref-hodges1963elb"
role="doc-biblioref">1963</a>)</span>).</p></li>
<li><p>Un conjunto de pruebas de hipótesis puede combinarse en una sola
prueba de hipótesis (<span class="citation"
data-cites="hansen:bowers:2008">Hansen and Bowers (<a
href="#/ref-hansen:bowers:2008"
role="doc-biblioref">2008</a>)</span>,<span class="citation"
data-cites="caughey2017nonparametric">Caughey, Dafoe, and Seawright (<a
href="#/ref-caughey2017nonparametric"
role="doc-biblioref">2017</a>)</span>).</p></li>
<li><p>En las pruebas de equivalencia, se puede plantear la hipótesis de
que dos estadísticas de prueba son equivalentes (es decir, el grupo de
tratamiento es el mismo que el grupo de control) en lugar de una sola
estadística de prueba (la diferencia entre los dos grupos es cero)
(<span class="citation" data-cites="hartman2018equivalence">Hartman and
Hidalgo (<a href="#/ref-hartman2018equivalence"
role="doc-biblioref">2018</a>)</span>).</p></li>
<li><p>Dado que una prueba de hipótesis es un modelo de variable de
resultado potenciales, se puede utilizar la prueba de hipótesis para
aprender sobre modelos complejos, como los modelos de propagación de los
efectos del tratamiento a través de redes (<span class="citation"
data-cites="bowers2013reasoning">Bowers, Fredrickson, and Panagopoulos
(<a href="#/ref-bowers2013reasoning"
role="doc-biblioref">2013</a>)</span>, <span class="citation"
data-cites="bowers2016research">Bowers, Fredrickson, and Aronow (<a
href="#/ref-bowers2016research" role="doc-biblioref">2016</a>)</span>,
<span class="citation" data-cites="bowers2018models">Bowers et al. (<a
href="#/ref-bowers2018models"
role="doc-biblioref">2018</a>)</span>)</p></li>
</ul>
</section>
<section id="ejercicio-pruebas-de-hipótesis-y-estadísticas-de-prueba"
class="slide level2">
<h2>Ejercicio: Pruebas de hipótesis y estadísticas de prueba</h2>
<ol type="1">
<li><p>Si una intervención fue muy eficaz en el aumento de la
variabilidad de una variable de resultado, pero no cambió la media,
¿sería grande o pequeño el valor <span class="math inline">\(p\)</span>
reportado por R o Stata si utilizamos <code>lm_robust()</code> o
<code>difference_of_means()</code> o <code>reg</code> o
<code>t.test</code>?</p></li>
<li><p>Si una intervención hace que la media del grupo de control se
reduzca moderadamente pero aumenta mucho algunas variables de resultado
(como un efecto 10 veces mayor), ¿el valor <span
class="math inline">\(p\)</span> de R <code>lm_robust()</code> o
<code>difference_of_means()</code> sería grande o pequeño?</p></li>
</ol>
</section></section>
<section>
<section id="probar-muchas-hipótesis" class="title-slide slide level1">
<h1>Probar muchas hipótesis</h1>

</section>
<section id="cuándo-podríamos-probar-muchas-hipótesis"
class="slide level2">
<h2>¿Cuándo podríamos probar muchas hipótesis?</h2>
<ul>
<li><p>¿Difiere el efecto de un tratamiento experimental entre los
distintos grupos? ¿Podrían surgir diferencias en el efecto del
tratamiento debido a algunas características de fondo de los sujetos
experimentales?</p></li>
<li><p>¿Qué estrategias de comunicación fueron más eficaces en una única
variable de resultado?</p></li>
<li><p>¿Cuáles, entre varias variables de resultado, fueron
influenciados por una única intervención experimental?</p></li>
</ul>
</section>
<section
id="tasas-de-falsos-positivos-en-las-pruebas-de-hipótesis-múltiples"
class="slide level2 fragile">
<h2 class="fragile">Tasas de falsos positivos en las pruebas de
hipótesis múltiples</h2>
<p>Digamos que nuestra probabilidad de cometer un error de falso
positivo es de 0,05 en una sola prueba. ¿Qué ocurre si preguntamos: (1)
<em>cuál de estos 10 resultados tiene una relación estadísticamente
significativa con los dos brazos de tratamiento</em>? o (2) <em>cuál de
estos 10 brazos de tratamiento tiene una relación estadísticamente
significativa con la única variable de resultado</em>?</p>
<ul>
<li>La probabilidad de un error de falso positivo debe ser menor o igual
a 0,05 en una prueba.</li>
<li>La probabilidad de un error de falso positivo debe ser menor o igual
a <span class="math inline">\(1 - ( ( 1 - .05 ) \times (1 - .05) ) =
.0975\)</span> en 2 pruebas.</li>
<li>La probabilidad de al menos un error de falso positivo con <span
class="math inline">\(\alpha=.05\)</span> en 10 pruebas debería ser
<span class="math inline">\(\le\)</span> <span class="math inline">\(1 -
(1-.05)^{10}=.40\)</span>.</li>
</ul>
</section>
<section id="descubrimientos-con-pruebas-múltiples"
class="slide level2">
<h2>Descubrimientos con pruebas múltiples</h2>
<p><strong>Número de errores hechos al probar hipótesis nulas <span
class="math inline">\(m\)</span></strong> <span class="citation"
data-cites="benjamini1995">(<a href="#/ref-benjamini1995"
role="doc-biblioref">Benjamini and Hochberg 1995</a> ’s Table 1)</span>.
Las celdas son el número de pruebas. <span
class="math inline">\(R\)</span> es # de “descubrimientos” y <span
class="math inline">\(V\)</span> es # de falsos descubrimientos, <span
class="math inline">\(U\)</span> es # de no-rechazos correctos, y <span
class="math inline">\(S\)</span> es # de rechazos correctos.</p>
<table>
<colgroup>
<col style="width: 39%" />
<col style="width: 26%" />
<col style="width: 22%" />
<col style="width: 11%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th style="text-align: center;">Declarado No significativo</th>
<th style="text-align: center;"><div class="line-block">Declarado</div>
| Significativo</th>
<th style="text-align: center;">Total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Hipótesis nula real (<span
class="math inline">\(H_{real}=0\)</span>)</td>
<td style="text-align: center;"><pre><code>        U</code></pre></td>
<td style="text-align: center;"><pre><code>      V</code></pre></td>
<td style="text-align: center;"><span
class="math inline">\(m_0\)</span></td>
</tr>
<tr class="even">
<td>Hiptsis nula falsa (<span class="math inline">\(H_{real} \ne
0\)</span>)</td>
<td style="text-align: center;"><pre><code>        T</code></pre></td>
<td style="text-align: center;"><pre><code>      S</code></pre></td>
<td style="text-align: center;">m - <span
class="math inline">\(m_0\)</span></td>
</tr>
<tr class="odd">
<td>Total</td>
<td style="text-align: center;"><pre><code>       m-R</code></pre></td>
<td style="text-align: center;"><pre><code>      R</code></pre></td>
<td style="text-align: center;">m</td>
</tr>
</tbody>
</table>
</section>
<section
id="dos-tasas-de-error-principales-a-controlar-cuando-se-prueban-muchas-hipótesis"
class="slide level2 allowframebreaks">
<h2 class="allowframebreaks">Dos tasas de error principales a controlar
cuando se prueban muchas hipótesis</h2>
<ol type="1">
<li><p><strong>La tasa de error familiar (FWER)</strong> es <span
class="math inline">\(P(V&gt;0)\)</span> (Probabilidad de cualquier
error de falso positivo).</p>
<ul>
<li><p>Nos gustaría controlar esto si planeamos tomar una decisión sobre
los resultados de nuestras pruebas múltiples. El proyecto de
investigación es principalmente confirmatorio.</p></li>
<li><p>Véanse, por ejemplo, los proyectos de la OES <a
href="http://oes.gsa.gov" class="uri">http://oes.gsa.gov</a>: las
agencias federales tomarán decisiones sobre programas en función de la
detección de resultados o no.</p></li>
</ul></li>
<li><p><strong>La tasa de falsos descubrimientos (FDR)</strong> es <span
class="math inline">\(E(V/R | R&gt;0)\)</span> (proporción promedio de
Errores de falsos positivos dados algunos rechazos).</p>
<ul>
<li><p>Nos gustaría controlar esto si estamos usando <em>este</em>
experimento para planificar <em>el próximo</em> experimento. Estamos
dispuestos a aceptar una mayor probabilidad de error en aras de darnos
más posibilidades de descubrimiento.</p></li>
<li><p>Por ejemplo, se podría imaginar que una organización, un
gobierno, una ONG, podría decidir llevar a cabo <em>una serie de
experimentos</em> como parte de una “agenda de aprendizaje”: ningún
experimento determina la toma de decisiones, hay más espacio para la
exploración.</p></li>
</ul></li>
</ol>
<p>Nos centraremos en el FWER, pero recomendamos pensar en el FDR y en
las agendas de aprendizaje como una forma muy útil de proceder.</p>
</section>
<section id="preguntas-con-variables-de-resultado-múltiples"
class="slide level2">
<h2>Preguntas con variables de resultado múltiples</h2>
<ul>
<li><p>¿Cuál es el efecto de un tratamiento sobre múltiples variables de
resultado?</p></li>
<li><p>¿En qué variables de resultado (de entre muchas) tuvo efecto el
tratamiento?</p></li>
<li><p>La segunda pregunta, en particular, puede conducir al tipo de
problemas de tasa de error familiar no controlada a los que nos
referimos anteriormente.</p></li>
</ul>
</section>
<section
id="pruebas-de-hipótesis-múltiples-variables-de-resultado-múltiples"
class="slide level2">
<h2>Pruebas de hipótesis múltiples: Variables de Resultado
Múltiples</h2>
<p>Imagine que tenemos cinco variables de resultado y un tratamiento
(mostrando aquí las variables de resultado potenciales y
observadas):</p>
<pre><code>   ID T Y1_T_0 Y1_T_1 Y2_T_0 Y2_T_1 Y3_T_0 Y3_T_1 Y4_T_0 Y4_T_1 Y5_T_0 Y5_T_1
1 001 0   0.19   0.19  0.366  0.366  0.546  0.546 -0.626 -0.626 -0.125 -0.125
2 002 0  -0.43  -0.43  0.931  0.931 -2.233 -2.233  1.309  1.309  1.078  1.078
3 003 0   0.91   0.91 -1.907 -1.907  0.288  0.288 -0.133 -0.133 -1.261 -1.261
4 004 0   1.79   1.79  0.052  0.052  0.544  0.544 -1.608 -1.608 -0.452 -0.452
5 005 1   1.00   1.00 -0.848 -0.848 -1.192 -1.192 -1.308 -1.308 -1.027 -1.027
6 006 0   1.11   1.11 -0.368 -0.368 -0.018 -0.018 -0.045 -0.045  0.068  0.068</code></pre>
<pre><code>   ID T    Y1     Y2     Y3     Y4     Y5
1 001 0  0.19  0.366  0.546 -0.626 -0.125
2 002 0 -0.43  0.931 -2.233  1.309  1.078
3 003 0  0.91 -1.907  0.288 -0.133 -1.261
4 004 0  1.79  0.052  0.544 -1.608 -0.452
5 005 1  1.00 -0.848 -1.192 -1.308 -1.027
6 006 0  1.11 -0.368 -0.018 -0.045  0.068</code></pre>
</section>
<section id="podemos-detectar-un-efecto-en-la-variable-de-resultado-y1"
class="slide level2">
<h2>Podemos detectar un efecto en la variable de resultado
<code>Y1</code>?</h2>
<p>¿Podemos detectar un efecto en la variable de resultado
<code>Y1</code>? (es decir, ¿la prueba de hipótesis produce un valor
<span class="math inline">\(p\)</span> lo suficientemente pequeño?) </p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>coin<span class="sc">::</span><span class="fu">pvalue</span>(<span class="fu">oneway_test</span>(Y1 <span class="sc">~</span> <span class="fu">factor</span>(T), <span class="at">data =</span> dat1))</span></code></pre></div>
<pre><code>[1] 0.88</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Notese que el valor p de la prueba t es igual a la prueba chi al cuadrado</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="do">## valor p.</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>coin<span class="sc">::</span><span class="fu">pvalue</span>(<span class="fu">independence_test</span>(Y1 <span class="sc">~</span> <span class="fu">factor</span>(T),</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> dat1,</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">teststat =</span> <span class="st">&quot;quadratic&quot;</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>))</span></code></pre></div>
<pre><code>[1] 0.88</code></pre>
</section>
<section
id="en-cuál-de-las-cinco-variables-de-resultado-podemos-detectar-un-efecto"
class="slide level2">
<h2>¿En cuál de las cinco variables de resultado podemos detectar un
efecto?</h2>
<p>¿En cuál de las cinco variables de resultado podemos detectar un
efecto? (es decir, ¿alguna de las cinco pruebas de hipótesis produce un
valor <span class="math inline">\(p\)</span> lo suficientemente
pequeño?) </p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> coin<span class="sc">::</span><span class="fu">pvalue</span>(<span class="fu">oneway_test</span>(Y1 <span class="sc">~</span> <span class="fu">factor</span>(T), <span class="at">data =</span> dat1))</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> coin<span class="sc">::</span><span class="fu">pvalue</span>(<span class="fu">oneway_test</span>(Y2 <span class="sc">~</span> <span class="fu">factor</span>(T), <span class="at">data =</span> dat1))</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> coin<span class="sc">::</span><span class="fu">pvalue</span>(<span class="fu">oneway_test</span>(Y3 <span class="sc">~</span> <span class="fu">factor</span>(T), <span class="at">data =</span> dat1))</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>p4 <span class="ot">&lt;-</span> coin<span class="sc">::</span><span class="fu">pvalue</span>(<span class="fu">oneway_test</span>(Y4 <span class="sc">~</span> <span class="fu">factor</span>(T), <span class="at">data =</span> dat1))</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>p5 <span class="ot">&lt;-</span> coin<span class="sc">::</span><span class="fu">pvalue</span>(<span class="fu">oneway_test</span>(Y5 <span class="sc">~</span> <span class="fu">factor</span>(T), <span class="at">data =</span> dat1))</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>theps <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">p1 =</span> p1, <span class="at">p2 =</span> p2, <span class="at">p3 =</span> p3, <span class="at">p4 =</span> p4, <span class="at">p5 =</span> p5)</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(theps)</span></code></pre></div>
<pre><code>  p5   p4   p3   p2   p1 
0.27 0.30 0.43 0.59 0.88 </code></pre>
</section>
<section
id="podemos-detectar-un-efecto-en-cualquiera-de-las-cinco-variables-de-resultado"
class="slide level2">
<h2>¿Podemos detectar un efecto en “cualquiera” de las cinco variables
de resultado?</h2>
<p>¿Podemos detectar un efecto en “cualquiera” de las cinco variables de
resultado? (es decir, ¿ pueden las cinco pruebas de hipótesis para las
cinco variables de resultado producir un valor <span
class="math inline">\(p\)</span> lo suficientemente pequeño?) </p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>coin<span class="sc">::</span><span class="fu">pvalue</span>(<span class="fu">independence_test</span>(Y1 <span class="sc">+</span> Y2 <span class="sc">+</span> Y3 <span class="sc">+</span> Y4 <span class="sc">+</span> Y5 <span class="sc">~</span> <span class="fu">factor</span>(T),</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> dat1, <span class="at">teststat =</span> <span class="st">&quot;quadratic&quot;</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>))</span></code></pre></div>
<pre><code>[1] 0.67</code></pre>
<p>¿Cuál enfoque es más probable que nos engañe con demasiados
resultados “estadísticamente significativos” (5 pruebas o 1 prueba
ómnibus)?</p>
</section>
<section id="comparación-de-enfoques-i" class="slide level2">
<h2>Comparación de enfoques I</h2>
<p>Hagamos una simulación para conocer estos enfoques de prueba.</p>
<ul>
<li><p>Vamos a (1) establecer que los verdaderos efectos causales sean
0, (2) reasignar repetidamente el tratamiento, y (3) hacer cada una de
estas tres pruebas cada vez.</p></li>
<li><p>Dado que el efecto verdadero es 0, esperamos que la
<em>mayoría</em> de los valores <span class="math inline">\(p\)</span>
sean grandes. (De hecho, nos gustaría que no más del 5% de los valores
<span class="math inline">\(p\)</span> sean mayores que <span
class="math inline">\(p=.05\)</span>, si utilizamos el criterio de
aceptación-rechazo <span
class="math inline">\(\alpha=.05\)</span>).</p></li>
</ul>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>des1_sim <span class="ot">&lt;-</span> <span class="fu">simulate_design</span>(des1_plus, <span class="at">sims =</span> <span class="dv">1000</span>)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>res1 <span class="ot">&lt;-</span> des1_sim <span class="sc">%&gt;%</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(estimator) <span class="sc">%&gt;%</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">fwer =</span> <span class="fu">mean</span>(p.value <span class="sc">&lt;</span> .<span class="dv">05</span>), <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>)</span></code></pre></div>
</section>
<section id="comparación-de-enfoques-ii" class="slide level2">
<h2>Comparación de enfoques II</h2>
<table>
<caption>Tasas de error familiares</caption>
<thead>
<tr class="header">
<th style="text-align: left;">estimator</th>
<th style="text-align: right;">fwer</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">t-test all</td>
<td style="text-align: right;">0.22</td>
</tr>
<tr class="even">
<td style="text-align: left;">t-test all holm adj</td>
<td style="text-align: right;">0.04</td>
</tr>
<tr class="odd">
<td style="text-align: left;">t-test omnibus</td>
<td style="text-align: right;">0.04</td>
</tr>
<tr class="even">
<td style="text-align: left;">t-test Y1</td>
<td style="text-align: right;">0.05</td>
</tr>
</tbody>
</table>
<ul>
<li><p>El enfoque que utiliza 5 pruebas produce una <span
class="math inline">\(p &lt; .05\)</span> con demasiada frecuencia —
recuerde que no hay efectos causales en absoluto para ninguno de estas
variables de resultado.</p></li>
<li><p>Una prueba de una sola variable de resultado (<code>Y1</code>)
tiene <span class="math inline">\(p &lt; .05\)</span> en no más del 5%
de las simulaciones.</p></li>
<li><p>La prueba ómnibus también muestra una tasa de error bien
controlada.</p></li>
<li><p>El uso de una corrección de pruebas múltiples (aquí utilizamos la
corrección de “Holm”) también controla correctamente la tasa de falsos
positivos.</p></li>
</ul>
</section>
<section id="la-corrección-de-holm" class="slide level2">
<h2>La corrección de Holm</h2>
<p>Así es como se usa la corrección de Holm (Note que le sucede a los
valores <span class="math inline">\(p\)</span>):</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>theps</span></code></pre></div>
<pre><code>  p1   p2   p3   p4   p5 
0.88 0.59 0.43 0.30 0.27 </code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">p.adjust</span>(theps, <span class="at">method =</span> <span class="st">&quot;holm&quot;</span>)</span></code></pre></div>
<pre><code>p1 p2 p3 p4 p5 
 1  1  1  1  1 </code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Para mostrar que sucede con los valores p &quot;significativos&quot;</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>theps_new <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">c</span>(theps, <span class="at">newlowp =</span> .<span class="dv">01</span>))</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="fu">p.adjust</span>(theps_new, <span class="at">method =</span> <span class="st">&quot;holm&quot;</span>)</span></code></pre></div>
<pre><code>newlowp      p5      p4      p3      p2      p1 
   0.06    1.00    1.00    1.00    1.00    1.00 </code></pre>
</section>
<section
id="pruebas-de-hipótesis-múltiples-brazos-de-tratamiento-múltiples"
class="slide level2 allowframebreaks">
<h2 class="allowframebreaks">Pruebas de hipótesis múltiples: Brazos de
tratamiento múltiples</h2>
<ul>
<li><p>El mismo tipo de problema puede darse cuando la pregunta es sobre
los efectos diferenciales de un tratamiento con múltiples
brazos.</p></li>
<li><p>Con 5 brazos, “el efecto del brazo 1” podría significar muchas
cosas diferentes: “¿Es la variable de resultado potencial promedio del
brazo 1 más grande que la del brazo 2?”, “¿Son las variables de
resultado potenciales del brazo 1 más grandes que el promedio de las
variables de resultado potenciales de todos los demás brazos?”.</p></li>
<li><p>¡Si sólo nos enfocamos en las comparaciones por pares entre
brazos, podríamos tener <span class="math inline">\(((5 \times 5) - 5)/2
= 10\)</span> pruebas únicas!</p></li>
</ul>
</section>
<section
id="pruebas-de-hipótesis-múltiples-brazos-de-tratamiento-múltiples-1"
class="slide level2 allowframebreaks">
<h2 class="allowframebreaks">Pruebas de hipótesis múltiples: Brazos de
tratamiento múltiples</h2>
<p>Aquí hay unas potenciales variables de resultado observadas, y unos
valores múltiples de <code>T</code>.</p>
<pre><code>   ID T  Y_T_2  Y_T_3  Y_T_4  Y_T_5      Y
1 001 3  0.366  0.546 -0.626 -0.125  0.546
2 002 3  0.931 -2.233  1.309  1.078 -2.233
3 003 4 -1.907  0.288 -0.133 -1.261 -0.133
4 004 5  0.052  0.544 -1.608 -0.452 -0.452
5 005 2 -0.848 -1.192 -1.308 -1.027 -0.848
6 006 3 -0.368 -0.018 -0.045  0.068 -0.018</code></pre>
</section>
<section
id="pruebas-de-hipótesis-múltiples-brazos-de-tratamiento-múltiples-2"
class="slide level2 allowframebreaks">
<h2 class="allowframebreaks">Pruebas de hipótesis múltiples: Brazos de
tratamiento múltiples</h2>
<p>Aquí están las 10 pruebas por pares con y sin ajuste para pruebas
múltiples. Observe cómo un resultado “significativo” (<span
class="math inline">\(p=.01\)</span>) cambia con el ajuste.</p>
<pre><code>   Comparison      Stat p.value p.adjust
1   1 - 2 = 0     1.435   0.231   1.0000
2   1 - 3 = 0    0.8931  0.3447   1.0000
3   1 - 4 = 0     6.404 0.01139   0.1139
4   1 - 5 = 0    0.8216  0.3647   1.0000
5   2 - 3 = 0   0.05882  0.8084   1.0000
6   2 - 4 = 0     2.641  0.1041   0.7287
7   2 - 5 = 0    0.0437  0.8344   1.0000
8   3 - 4 = 0     3.232 0.07222   0.6500
9   3 - 5 = 0 0.0003464  0.9852   1.0000
10  4 - 5 = 0     2.899 0.08861   0.7089</code></pre>
</section>
<section id="enfoques-para-la-prueba-de-hipótesis-con-múltiples-brazos"
class="slide level2">
<h2>Enfoques para la prueba de hipótesis con múltiples brazos</h2>
<p>Mostramos cuatro enfoques diferentes:</p>
<ol type="1">
<li>Hacer todas las pruebas por pares y elegir la mejor (mala
idea);</li>
<li>Hacer todas las pruebas por pares y elegir la mejor después de
ajustar los valores p para las pruebas múltiples (buena idea, pero con
muy poco poder estadístico);</li>
<li>probar la hipótesis de que no hay relación entre <em>cualquier
brazo</em> (una prueba ómnibus) y la variable de resultado (buena
idea);</li>
<li>elegir un brazo en el que concentrarse de antemano (buena
idea).</li>
</ol>
<table>
<caption>Enfoques para pruebas en experimentos de múltiples
brazos.</caption>
<thead>
<tr class="header">
<th style="text-align: left;">estimator</th>
<th style="text-align: right;">fwer</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Escoger mejor prueba en parejas</td>
<td style="text-align: right;">0.238</td>
</tr>
<tr class="even">
<td style="text-align: left;">Escoger mejor prueba en parejas después de
ajuste</td>
<td style="text-align: right;">0.028</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Prueba general</td>
<td style="text-align: right;">0.034</td>
</tr>
<tr class="even">
<td style="text-align: left;">prueba t T1 vs todas</td>
<td style="text-align: right;">0.018</td>
</tr>
</tbody>
</table>
</section>
<section id="resumen-1" class="slide level2">
<h2>Resumen</h2>
<ul>
<li><p>Los problemas en las pruebas múltiples pueden surgir de múltiples
variables de resultado o múltiples tratamientos (o múltiples
moderadores/términos de interacción).</p></li>
<li><p>Los procedimientos para realizar pruebas de hipótesis e
intervalos de confianza pueden implicar errores. La práctica ordinaria
controla las tasas de error en una sola prueba (o en un solo intervalo
de confianza). Pero las pruebas múltiples requieren un trabajo adicional
para garantizar que las tasas de error estén controladas.</p></li>
<li><p>La pérdida de poder derivada de los enfoques de ajuste nos anima
a considerar qué <em>preguntas queremos hacer a los datos</em>. Por
ejemplo, si queremos saber si el tratamiento tuvo <em>algún efecto</em>,
una prueba conjunta o una prueba ómnibus con múltiples variables de
resultado aumentará nuestro poder estadístico sin necesidad de
ajustes.</p></li>
</ul>
</section></section>
<section id="referencias"
class="title-slide slide level1 unnumbered allowframebreaks">
<h1 class="unnumbered allowframebreaks">Referencias</h1>
<div id="refs" class="references csl-bib-body hanging-indent"
role="doc-bibliography">
<div id="ref-benjamini1995" class="csl-entry" role="doc-biblioentry">
Benjamini, Yoav, and Yosef Hochberg. 1995. <span>“<span
class="nocase">Controlling the false discovery rate: a practical and
powerful approach to multiple testing</span>.”</span> <em>Journal of the
Royal Statistical Society</em> 57 (1): 289–300. <a
href="http://www.jstor.org/stable/2346101">http://www.jstor.org/stable/2346101</a>.
</div>
<div id="ref-bowers2018models" class="csl-entry" role="doc-biblioentry">
Bowers, Jake, Bruce A Desmarais, Mark Frederickson, Nahomi Ichino,
Hsuan-Wei Lee, and Simi Wang. 2018. <span>“Models, Methods and Network
Topology: Experimental Design for the Study of Interference.”</span>
<em>Social Networks</em> 54: 196–208.
</div>
<div id="ref-bowers2013reasoning" class="csl-entry"
role="doc-biblioentry">
Bowers, Jake, Mark M Fredrickson, and Costas Panagopoulos. 2013.
<span>“<span class="nocase">Reasoning about Interference Between Units:
A General Framework</span>.”</span> <em>Political Analysis</em> 21 (1):
97–124.
</div>
<div id="ref-bowers2016research" class="csl-entry"
role="doc-biblioentry">
Bowers, Jake, Mark Fredrickson, and Peter M Aronow. 2016.
<span>“Research Note: A More Powerful Test Statistic for Reasoning about
Interference Between Units.”</span> <em>Political Analysis</em> 24 (3):
395–403.
</div>
<div id="ref-caughey2017nonparametric" class="csl-entry"
role="doc-biblioentry">
Caughey, Devin, Allan Dafoe, and Jason Seawright. 2017.
<span>“Nonparametric Combination (NPC): A Framework for Testing
Elaborate Theories.”</span> <em>The Journal of Politics</em> 79 (2):
688–701.
</div>
<div id="ref-hansen:bowers:2008" class="csl-entry"
role="doc-biblioentry">
Hansen, Ben B., and Jake Bowers. 2008. <span>“Covariate Balance in
Simple, Stratified and Clustered Comparative Studies.”</span>
<em>Statistical Science</em> 23 (2): 219–36.
</div>
<div id="ref-hartman2018equivalence" class="csl-entry"
role="doc-biblioentry">
Hartman, Erin, and F Daniel Hidalgo. 2018. <span>“An Equivalence
Approach to Balance and Placebo Tests.”</span> <em>American Journal of
Political Science</em> 62 (4): 1000–1013.
</div>
<div id="ref-hodges1963elb" class="csl-entry" role="doc-biblioentry">
Hodges, J. L., and E. L. Lehmann. 1963. <span>“<span
class="nocase">Estimates of location based on rank tests</span>.”</span>
<em>Ann. Math. Statist</em> 34: 598–611.
</div>
<div id="ref-rosenbaum1993hlp" class="csl-entry" role="doc-biblioentry">
Rosenbaum, Paul R. 1993. <span>“Hodges-Lehmann Point Estimates of
Treatment Effect in Observational Studies.”</span> <em>Journal of the
American Statistical Association</em> 88 (424): 1250–53.
</div>
<div id="ref-rosenbaum2010design" class="csl-entry"
role="doc-biblioentry">
———. 2010. <span>“<span class="nocase">Design of observational
studies</span>.”</span> <em>Springer Series in Statistics</em>.
</div>
</div>
</section>
    </div>
  </div>

  <script src="hypothesistesting-slides_files/reveal.js-3.3.0.1/lib/js/head.min.js"></script>
  <script src="hypothesistesting-slides_files/reveal.js-3.3.0.1/js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        // Display controls in the bottom right corner
        controls: true,
        // Display a presentation progress bar
        progress: true,
        // Display the page number of the current slide
        slideNumber: true,
        // Push each slide change to the browser history
        history: true,
        // Enable keyboard shortcuts for navigation
        keyboard: true,
        // Enable the slide overview mode
        overview: true,
        // Vertical centering of slides
        center: false,
        // Enables touch navigation on devices with touch input
        touch: true,
        // Turns fragments on and off globally
        fragments: true,
        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,
        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,
        // Stop auto-sliding after user input
        autoSlideStoppable: true,
        // Opens links in an iframe preview overlay
        previewLinks: true,
        // Transition style
        transition: 'fade', // none/fade/slide/convex/concave/zoom
        // Transition speed
        transitionSpeed: 'default', // default/fast/slow
        // Transition style for full page slide backgrounds
        backgroundTransition: 'default', // none/fade/slide/convex/concave/zoom
        // Number of slides away from the current that are visible
        viewDistance: 3,



        chalkboard: {
          toggleNotesButton: false,
          theme: 'whiteboard',
        },

        keyboard: {
          67: function() { RevealChalkboard.toggleNotesCanvas() },    // toggle notes canvas when 'c' is pressed
          66: function() { RevealChalkboard.toggleChalkboard() }, // toggle chalkboard when 'b' is pressed
          46: function() { RevealChalkboard.clear() },    // clear chalkboard when 'DEL' is pressed
           8: function() { RevealChalkboard.reset() },    // reset chalkboard data on current slide when 'BACKSPACE' is pressed
          68: function() { RevealChalkboard.download() }, // downlad recorded chalkboard drawing when 'd' is pressed
        },

        // Optional reveal.js plugins
        dependencies: [
          { src: 'hypothesistesting-slides_files/reveal.js-3.3.0.1/plugin/notes/notes.js', async: true },
          { src: 'hypothesistesting-slides_files/reveal.js-3.3.0.1/plugin/search/search.js', async: true },
          { src: 'hypothesistesting-slides_files/reveal.js-3.3.0.1/plugin/chalkboard/chalkboard.js', async: true },
        ]
      });
    </script>
  <!-- dynamically load mathjax for compatibility with self-contained -->
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>

<script>
  (function() {
    if (window.jQuery) {
      Reveal.addEventListener( 'slidechanged', function(event) {  
        window.jQuery(event.previousSlide).trigger('hidden');
        window.jQuery(event.currentSlide).trigger('shown');
      });
    }
  })();
</script>


  </body>
</html>
